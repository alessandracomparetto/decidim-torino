{"ast":null,"code":"$(function () {\n  var $projects = $(\"#projects, #project\");\n  var $budgetSummaryTotal = $(\".budget-summary__total\");\n  var $budgetExceedModal = $(\"#budget-excess\");\n  var $budgetSummary = $(\".budget-summary__progressbox\");\n  var $voteButton = $(\".budget-vote-button\");\n  var totalAllocation = parseInt($budgetSummaryTotal.attr(\"data-total-allocation\"), 10);\n\n  var cancelEvent = function cancelEvent(event) {\n    $(event.currentTarget).removeClass(\"loading-spinner\");\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  $voteButton.on(\"click\", \"span\", function () {\n    $(\".budget-list__action\").click();\n  });\n  $projects.on(\"click\", \".budget-list__action\", function (event) {\n    var currentAllocation = parseInt($budgetSummary.attr(\"data-current-allocation\"), 10);\n    var $currentTarget = $(event.currentTarget);\n    var projectAllocation = parseInt($currentTarget.attr(\"data-allocation\"), 10);\n\n    if (!$currentTarget.attr(\"data-open\")) {\n      $currentTarget.addClass(\"loading-spinner\");\n    }\n\n    if ($currentTarget.attr(\"disabled\")) {\n      cancelEvent(event);\n    } else if ($currentTarget.attr(\"data-add\") === \"true\" && currentAllocation + projectAllocation > totalAllocation) {\n      $budgetExceedModal.foundation(\"toggle\");\n      cancelEvent(event);\n    }\n  });\n});","map":{"version":3,"mappings":"AAAAA,CAAC,CAAC,YAAM;AACN,MAAMC,SAAS,GAAGD,CAAC,CAAC,qBAAD,CAAnB;AACA,MAAME,mBAAmB,GAAGF,CAAC,CAAC,wBAAD,CAA7B;AACA,MAAMG,kBAAkB,GAAGH,CAAC,CAAC,gBAAD,CAA5B;AACA,MAAMI,cAAc,GAAGJ,CAAC,CAAC,8BAAD,CAAxB;AACA,MAAMK,WAAW,GAAGL,CAAC,CAAC,qBAAD,CAArB;AACA,MAAMM,eAAe,GAAGC,QAAQ,CAACL,mBAAmB,CAACM,IAApBN,CAAyB,uBAAzBA,CAAD,EAAoD,EAApD,CAAhC;;AAEA,MAAMO,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD,EAAW;AAC7BV,KAAC,CAACU,KAAK,CAACC,aAAP,CAADX,CAAuBY,WAAvBZ,CAAmC,iBAAnCA;AACAU,SAAK,CAACG,eAANH;AACAA,SAAK,CAACI,cAANJ;AAHF;;AAMAL,aAAW,CAACU,EAAZV,CAAe,OAAfA,EAAwB,MAAxBA,EAAgC,YAAM;AACpCL,KAAC,CAAC,sBAAD,CAADA,CAA0BgB,KAA1BhB;AADF;AAIAC,WAAS,CAACc,EAAVd,CAAa,OAAbA,EAAsB,sBAAtBA,EAA8C,UAACS,KAAD,EAAW;AACvD,QAAMO,iBAAiB,GAAGV,QAAQ,CAACH,cAAc,CAACI,IAAfJ,CAAoB,yBAApBA,CAAD,EAAiD,EAAjD,CAAlC;AACA,QAAMc,cAAc,GAAGlB,CAAC,CAACU,KAAK,CAACC,aAAP,CAAxB;AACA,QAAMQ,iBAAiB,GAAGZ,QAAQ,CAACW,cAAc,CAACV,IAAfU,CAAoB,iBAApBA,CAAD,EAAyC,EAAzC,CAAlC;;AAEA,QAAI,CAACA,cAAc,CAACV,IAAfU,CAAoB,WAApBA,CAAL,EAAuC;AACrCA,oBAAc,CAACE,QAAfF,CAAwB,iBAAxBA;AACD;;AAED,QAAIA,cAAc,CAACV,IAAfU,CAAoB,UAApBA,CAAJ,EAAqC;AACnCT,iBAAW,CAACC,KAAD,CAAXD;AADF,WAEO,IAAKS,cAAc,CAACV,IAAfU,CAAoB,UAApBA,MAAoC,MAApCA,IAAiDD,iBAAiB,GAAGE,iBAApBF,GAAyCX,eAA/F,EAAiH;AACtHH,wBAAkB,CAACkB,UAAnBlB,CAA8B,QAA9BA;AACAM,iBAAW,CAACC,KAAD,CAAXD;AACD;AAdH;AAlBD,EAADT","names":["$","$projects","$budgetSummaryTotal","$budgetExceedModal","$budgetSummary","$voteButton","totalAllocation","parseInt","attr","cancelEvent","event","currentTarget","removeClass","stopPropagation","preventDefault","on","click","currentAllocation","$currentTarget","projectAllocation","addClass","foundation"],"sources":["/var/lib/gems/2.7.0/gems/decidim-budgets-0.26.0/app/packs/src/decidim/budgets/projects.js"],"sourcesContent":["$(() => {\n  const $projects = $(\"#projects, #project\");\n  const $budgetSummaryTotal = $(\".budget-summary__total\");\n  const $budgetExceedModal = $(\"#budget-excess\");\n  const $budgetSummary = $(\".budget-summary__progressbox\");\n  const $voteButton = $(\".budget-vote-button\");\n  const totalAllocation = parseInt($budgetSummaryTotal.attr(\"data-total-allocation\"), 10);\n\n  const cancelEvent = (event) => {\n    $(event.currentTarget).removeClass(\"loading-spinner\");\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  $voteButton.on(\"click\", \"span\", () => {\n    $(\".budget-list__action\").click();\n  });\n\n  $projects.on(\"click\", \".budget-list__action\", (event) => {\n    const currentAllocation = parseInt($budgetSummary.attr(\"data-current-allocation\"), 10);\n    const $currentTarget = $(event.currentTarget);\n    const projectAllocation = parseInt($currentTarget.attr(\"data-allocation\"), 10);\n\n    if (!$currentTarget.attr(\"data-open\")) {\n      $currentTarget.addClass(\"loading-spinner\");\n    }\n\n    if ($currentTarget.attr(\"disabled\")) {\n      cancelEvent(event);\n    } else if (($currentTarget.attr(\"data-add\") === \"true\") && ((currentAllocation + projectAllocation) > totalAllocation)) {\n      $budgetExceedModal.foundation(\"toggle\");\n      cancelEvent(event);\n    }\n  });\n});\n"]},"metadata":{},"sourceType":"module"}