{"ast":null,"code":"import { pushState, registerCallback } from \"src/decidim/history\";\n\nvar initializeListingOptionsMenu = function initializeListingOptionsMenu(options) {\n  $(document).on(\"click\", \"\".concat(options.containerSelector, \" a\"), function (event) {\n    var $target = $(event.target);\n    $target.parents(\".menu\").find(\"a:first\").text($target.text());\n    pushState($target.attr(\"href\"));\n  });\n  registerCallback(options.callbackName, function () {\n    var url = window.location.toString();\n    var match = url.match(/${options.urlParameter}=([^&]*)/);\n    var $targetMenu = $(\"\".concat(options.containerSelector, \" .menu\"));\n    var value = $targetMenu.find(\".menu a:first\").data(options.dataAttribute);\n\n    if (match) {\n      value = match[1];\n    }\n\n    var linkText = $targetMenu.find(\".menu a[data-\".concat(options.dataAttribute, \"=\\\"\").concat(value, \"\\\"]\")).text();\n    $targetMenu.find(\"a:first\").text(linkText);\n  });\n};\n\n$(function () {\n  initializeListingOptionsMenu({\n    containerSelector: \".order-by\",\n    callbackName: \"orders\",\n    urlParameter: \"order\",\n    dataAttribute: \"order\"\n  });\n  initializeListingOptionsMenu({\n    containerSelector: \".results-per-page\",\n    callbackName: \"results_per_page\",\n    urlParameter: \"per_page\",\n    dataAttribute: \"per-page-option\"\n  });\n});","map":{"version":3,"mappings":"AAAA,SAASA,SAAT,EAAoBC,gBAApB,QAA4C,qBAA5C;;AAEA,IAAMC,4BAA4B,GAAG,SAA/BA,4BAA+B,CAACC,OAAD,EAAa;AAChDC,GAAC,CAACC,QAAD,CAADD,CAAYE,EAAZF,CAAe,OAAfA,YAA2BD,OAAO,CAACI,iBAAnC,SAA0D,UAACC,KAAD,EAAW;AACnE,QAAMC,OAAO,GAAGL,CAAC,CAACI,KAAK,CAACE,MAAP,CAAjB;AAEAD,WAAO,CAACE,OAARF,CAAgB,OAAhBA,EAAyBG,IAAzBH,CAA8B,SAA9BA,EAAyCI,IAAzCJ,CAA8CA,OAAO,CAACI,IAARJ,EAA9CA;AAEAT,aAAS,CAACS,OAAO,CAACK,IAARL,CAAa,MAAbA,CAAD,CAATT;AALF;AAQAC,kBAAgB,CAACE,OAAO,CAACY,YAAT,EAAuB,YAAM;AAC3C,QAAMC,GAAG,GAAGC,MAAM,CAACC,QAAPD,CAAgBE,QAAhBF,EAAZ;AACA,QAAMG,KAAK,GAAGJ,GAAG,CAACI,KAAJJ,CAAU,iCAAVA,CAAd;AACA,QAAMK,WAAW,GAAGjB,CAAC,WAAID,OAAO,CAACI,iBAAZ,YAArB;AACA,QAAIe,KAAK,GAAGD,WAAW,CAACT,IAAZS,CAAiB,eAAjBA,EAAkCE,IAAlCF,CAAuClB,OAAO,CAACqB,aAA/CH,CAAZ;;AAEA,QAAID,KAAJ,EAAW;AACTE,WAAK,GAAGF,KAAK,CAAC,CAAD,CAAbE;AACD;;AAED,QAAMG,QAAQ,GAAGJ,WAAW,CAACT,IAAZS,wBAAiClB,OAAO,CAACqB,aAAzC,gBAA2DF,KAA3D,UAAsET,IAAtEQ,EAAjB;AAEAA,eAAW,CAACT,IAAZS,CAAiB,SAAjBA,EAA4BR,IAA5BQ,CAAiCI,QAAjCJ;AAZc,IAAhBpB;AATF;;AAyBAG,CAAC,CAAC,YAAM;AACNF,8BAA4B,CAAC;AAC3BK,qBAAiB,EAAE,WADQ;AAE3BQ,gBAAY,EAAE,QAFa;AAG3BW,gBAAY,EAAE,OAHa;AAI3BF,iBAAa,EAAE;AAJY,GAAD,CAA5BtB;AAMAA,8BAA4B,CAAC;AAC3BK,qBAAiB,EAAE,mBADQ;AAE3BQ,gBAAY,EAAE,kBAFa;AAG3BW,gBAAY,EAAE,UAHa;AAI3BF,iBAAa,EAAE;AAJY,GAAD,CAA5BtB;AAPD,EAADE","names":["pushState","registerCallback","initializeListingOptionsMenu","options","$","document","on","containerSelector","event","$target","target","parents","find","text","attr","callbackName","url","window","location","toString","match","$targetMenu","value","data","dataAttribute","linkText","urlParameter"],"sources":["/var/lib/gems/2.7.0/gems/decidim-core-0.26.0/app/packs/src/decidim/results_listing.js"],"sourcesContent":["import { pushState, registerCallback } from \"src/decidim/history\"\n\nconst initializeListingOptionsMenu = (options) => {\n  $(document).on(\"click\", `${options.containerSelector} a`, (event) => {\n    const $target = $(event.target);\n\n    $target.parents(\".menu\").find(\"a:first\").text($target.text());\n\n    pushState($target.attr(\"href\"));\n  })\n\n  registerCallback(options.callbackName, () => {\n    const url = window.location.toString();\n    const match = url.match(/${options.urlParameter}=([^&]*)/);\n    const $targetMenu = $(`${options.containerSelector} .menu`);\n    let value = $targetMenu.find(\".menu a:first\").data(options.dataAttribute);\n\n    if (match) {\n      value = match[1];\n    }\n\n    const linkText = $targetMenu.find(`.menu a[data-${options.dataAttribute}=\"${value}\"]`).text();\n\n    $targetMenu.find(\"a:first\").text(linkText);\n  });\n};\n\n$(() => {\n  initializeListingOptionsMenu({\n    containerSelector: \".order-by\",\n    callbackName: \"orders\",\n    urlParameter: \"order\",\n    dataAttribute: \"order\"\n  });\n  initializeListingOptionsMenu({\n    containerSelector: \".results-per-page\",\n    callbackName: \"results_per_page\",\n    urlParameter: \"per_page\",\n    dataAttribute: \"per-page-option\"\n  });\n});\n"]},"metadata":{},"sourceType":"module"}