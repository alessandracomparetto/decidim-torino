{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\n$(function () {\n  var $content = $(\".picker-content\"),\n      pickerMore = $content.data(\"picker-more\"),\n      pickerPath = $content.data(\"picker-path\"),\n      toggleNoProposals = function toggleNoProposals() {\n    var showNoProposals = $(\"#proposals_list li:visible\").length === 0;\n    $(\"#no_proposals\").toggle(showNoProposals);\n  };\n\n  var jqxhr = null;\n  var filterBuffer = \"\";\n  toggleNoProposals();\n  $(\".data_picker-modal-content\").on(\"change keyup\", \"#proposals_filter\", function (event) {\n    var filter = event.target.value.toLowerCase();\n\n    if (pickerMore) {\n      if (filter.length < 3) {\n        return;\n      }\n\n      if (filter === filterBuffer) {\n        return;\n      }\n\n      if (jqxhr !== null) {\n        jqxhr.abort();\n      }\n\n      $content.html(\"<div class='loading-spinner'></div>\");\n      jqxhr = $.get(\"\".concat(pickerPath, \"?q=\").concat(filter), function (data) {\n        filterBuffer = filter;\n        $content.html(data);\n        jqxhr = null;\n        toggleNoProposals();\n\n        if (_typeof(window.theDataPicker) === \"object\" && window.theDataPicker.current !== null) {\n          window.theDataPicker._handleCheckboxes($content);\n\n          window.theDataPicker._handleLinks($content);\n        }\n      });\n    } else {\n      $(\"#proposals_list li\").each(function (index, li) {\n        $(li).toggle(li.textContent.toLowerCase().indexOf(filter) > -1);\n      });\n      toggleNoProposals();\n    }\n  });\n});","map":{"version":3,"mappings":";;;;;;;;;;AAAAA,CAAC,CAAC,YAAM;AACN,MAAMC,QAAQ,GAAGD,CAAC,CAAC,iBAAD,CAAlB;AAAA,MACIE,UAAU,GAAGD,QAAQ,CAACE,IAATF,CAAc,aAAdA,CADjB;AAAA,MAEIG,UAAU,GAAGH,QAAQ,CAACE,IAATF,CAAc,aAAdA,CAFjB;AAAA,MAGII,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AACxB,QAAMC,eAAe,GAAGN,CAAC,CAAC,4BAAD,CAADA,CAAgCO,MAAhCP,KAA2C,CAAnE;AACAA,KAAC,CAAC,eAAD,CAADA,CAAmBQ,MAAnBR,CAA0BM,eAA1BN;AALN;;AAQA,MAAIS,KAAK,GAAG,IAAZ;AACA,MAAIC,YAAY,GAAG,EAAnB;AAEAL,mBAAiB;AAEjBL,GAAC,CAAC,4BAAD,CAADA,CAAgCW,EAAhCX,CAAmC,cAAnCA,EAAmD,mBAAnDA,EAAwE,UAACY,KAAD,EAAW;AACjF,QAAMC,MAAM,GAAGD,KAAK,CAACE,MAANF,CAAaG,KAAbH,CAAmBI,WAAnBJ,EAAf;;AAEA,QAAIV,UAAJ,EAAgB;AACd,UAAIW,MAAM,CAACN,MAAPM,GAAgB,CAApB,EAAuB;AACrB;AACD;;AAED,UAAIA,MAAM,KAAKH,YAAf,EAA6B;AAC3B;AACD;;AAED,UAAID,KAAK,KAAK,IAAd,EAAoB;AAClBA,aAAK,CAACQ,KAANR;AACD;;AAEDR,cAAQ,CAACiB,IAATjB,CAAc,qCAAdA;AACAQ,WAAK,GAAGT,CAAC,CAACmB,GAAFnB,WAASI,UAAT,gBAAyBS,MAAzB,GAAmC,UAACV,IAAD,EAAU;AACnDO,oBAAY,GAAGG,MAAfH;AACAT,gBAAQ,CAACiB,IAATjB,CAAcE,IAAdF;AACAQ,aAAK,GAAG,IAARA;AACAJ,yBAAiB;;AAEjB,YAAIe,QAAOC,MAAM,CAACC,aAAd,MAAgC,QAAhC,IAA4CD,MAAM,CAACC,aAAPD,CAAqBE,OAArBF,KAAiC,IAAjF,EAAuF;AACrFA,gBAAM,CAACC,aAAPD,CAAqBG,iBAArBH,CAAuCpB,QAAvCoB;;AACAA,gBAAM,CAACC,aAAPD,CAAqBI,YAArBJ,CAAkCpB,QAAlCoB;AACD;AATK,QAARZ;AAdF,WAyBO;AACLT,OAAC,CAAC,oBAAD,CAADA,CAAwB0B,IAAxB1B,CAA6B,UAAC2B,KAAD,EAAQC,EAAR,EAAe;AAC1C5B,SAAC,CAAC4B,EAAD,CAAD5B,CAAMQ,MAANR,CAAa4B,EAAE,CAACC,WAAHD,CAAeZ,WAAfY,GAA6BE,OAA7BF,CAAqCf,MAArCe,IAA+C,CAAC,CAA7D5B;AADF;AAGAK,uBAAiB;AAClB;AAjCH;AAdD,EAADL","names":["$","$content","pickerMore","data","pickerPath","toggleNoProposals","showNoProposals","length","toggle","jqxhr","filterBuffer","on","event","filter","target","value","toLowerCase","abort","html","get","_typeof","window","theDataPicker","current","_handleCheckboxes","_handleLinks","each","index","li","textContent","indexOf"],"sources":["/var/lib/gems/2.7.0/gems/decidim-proposals-0.26.0/app/packs/src/decidim/proposals/admin/proposals_picker.js"],"sourcesContent":["$(() => {\n  const $content = $(\".picker-content\"),\n      pickerMore = $content.data(\"picker-more\"),\n      pickerPath = $content.data(\"picker-path\"),\n      toggleNoProposals = () => {\n        const showNoProposals = $(\"#proposals_list li:visible\").length === 0\n        $(\"#no_proposals\").toggle(showNoProposals)\n      }\n\n  let jqxhr = null\n  let filterBuffer = \"\"\n\n  toggleNoProposals()\n\n  $(\".data_picker-modal-content\").on(\"change keyup\", \"#proposals_filter\", (event) => {\n    const filter = event.target.value.toLowerCase()\n\n    if (pickerMore) {\n      if (filter.length < 3) {\n        return\n      }\n\n      if (filter === filterBuffer) {\n        return\n      }\n\n      if (jqxhr !== null) {\n        jqxhr.abort()\n      }\n\n      $content.html(\"<div class='loading-spinner'></div>\")\n      jqxhr = $.get(`${pickerPath}?q=${filter}`, (data) => {\n        filterBuffer = filter\n        $content.html(data)\n        jqxhr = null\n        toggleNoProposals()\n\n        if (typeof window.theDataPicker === \"object\" && window.theDataPicker.current !== null) {\n          window.theDataPicker._handleCheckboxes($content);\n          window.theDataPicker._handleLinks($content);\n        }\n      })\n    } else {\n      $(\"#proposals_list li\").each((index, li) => {\n        $(li).toggle(li.textContent.toLowerCase().indexOf(filter) > -1)\n      })\n      toggleNoProposals()\n    }\n  })\n})\n"]},"metadata":{},"sourceType":"module"}