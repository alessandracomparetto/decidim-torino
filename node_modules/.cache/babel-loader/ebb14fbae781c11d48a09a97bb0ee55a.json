{"ast":null,"code":"var DEFAULT_ATTRIBUTES = {\n  role: \"img\",\n  \"aria-hidden\": \"true\"\n};\n/**\n * Generates a Decidim icon element and returns it as a string.\n * @param {String} iconKey - the key of the icon to be generated\n * @param {Object} attributes - extra attributes to define for the icon SVG\n * @param {int} wait - number of milliseconds to wait before executing the function.\n * @private\n * @returns {Void} - Returns nothing.\n */\n\nexport default function icon(iconKey) {\n  var attributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var iconAttributes = $.extend(DEFAULT_ATTRIBUTES, attributes);\n  var title = iconAttributes.title || iconAttributes.ariaLabel;\n  Reflect.deleteProperty(iconAttributes, \"title\");\n  var htmlAttributes = {\n    \"class\": \"icon icon--\".concat(iconKey)\n  };\n  Object.keys(iconAttributes).forEach(function (key) {\n    // Convert the key to dash-format.\n    var newKey = key.replace(/([A-Z])/g, function (ucw) {\n      return \"-\".concat(ucw[0].toLowerCase());\n    });\n\n    if (typeof htmlAttributes[key] === \"undefined\") {\n      htmlAttributes[newKey] = iconAttributes[key];\n    } else {\n      htmlAttributes[newKey] = \"\".concat(htmlAttributes[newKey], \" \").concat(iconAttributes[key]);\n    }\n  });\n  var iconsPath = window.Decidim.config.get(\"icons_path\");\n  var elHtml = \"<svg><use href=\\\"\".concat(iconsPath, \"#icon-\").concat(iconKey, \"\\\"></use></svg>\");\n  var $el = $(elHtml);\n\n  if (title) {\n    $el.prepend(\"<title>\".concat(title, \"</title>\"));\n  } else {\n    // This keeps accessibility audit tools happy\n    $el.prepend(\"<title>\".concat(iconKey, \"</title>\")); // Force hidden if title is not defined\n\n    htmlAttributes[\"aria-hidden\"] = \"true\";\n  }\n\n  $el.attr(htmlAttributes);\n  return $(\"<div />\").append($el).html();\n}","map":{"version":3,"mappings":"AAAA,IAAMA,kBAAkB,GAAG;AACzBC,MAAI,EAAE,KADmB;AAEzB,iBAAe;AAFU,CAA3B;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,IAAT,CAAcC,OAAd,EAAwC;AAAA,MAAjBC,UAAiB,uEAAJ,EAAI;AACrD,MAAMC,cAAc,GAAGC,CAAC,CAACC,MAAFD,CAASN,kBAATM,EAA6BF,UAA7BE,CAAvB;AACA,MAAME,KAAK,GAAGH,cAAc,CAACG,KAAfH,IAAwBA,cAAc,CAACI,SAArD;AACAC,SAAO,CAACC,cAARD,CAAuBL,cAAvBK,EAAuC,OAAvCA;AAEA,MAAME,cAAc,GAAG;AACrB,kCAAuBT,OAAvB;AADqB,GAAvB;AAGAU,QAAM,CAACC,IAAPD,CAAYR,cAAZQ,EAA4BE,OAA5BF,CAAoC,UAACG,GAAD,EAAS;AAC3C;AACA,QAAMC,MAAM,GAAGD,GAAG,CAACE,OAAJF,CAAY,UAAZA,EAAwB,UAACG,GAAD;AAAA,wBAAaA,GAAG,CAAC,CAAD,CAAHA,CAAOC,WAAPD,EAAb;AAAxB,MAAf;;AACA,QAAI,OAAOP,cAAc,CAACI,GAAD,CAArB,KAA+B,WAAnC,EAAgD;AAC9CJ,oBAAc,CAACK,MAAD,CAAdL,GAAyBP,cAAc,CAACW,GAAD,CAAvCJ;AADF,WAEO;AACLA,oBAAc,CAACK,MAAD,CAAdL,aAA4BA,cAAc,CAACK,MAAD,CAA1C,cAAsDZ,cAAc,CAACW,GAAD,CAApE;AACD;AAPH;AAUA,MAAMK,SAAS,GAAIC,MAAM,CAACC,OAAPD,CAAeE,MAAfF,CAAsBG,GAAtBH,CAA0B,YAA1BA,CAAnB;AACA,MAAMI,MAAM,8BAAsBL,SAAtB,mBAAwClB,OAAxC,oBAAZ;AACA,MAAMwB,GAAG,GAAGrB,CAAC,CAACoB,MAAD,CAAb;;AACA,MAAIlB,KAAJ,EAAW;AACTmB,OAAG,CAACC,OAAJD,kBAAsBnB,KAAtB;AADF,SAEO;AACL;AACAmB,OAAG,CAACC,OAAJD,kBAAsBxB,OAAtB,eAFK,CAGL;;AACAS,kBAAc,CAAC,aAAD,CAAdA,GAAgC,MAAhCA;AACD;;AACDe,KAAG,CAACE,IAAJF,CAASf,cAATe;AAEA,SAAOrB,CAAC,CAAC,SAAD,CAADA,CAAawB,MAAbxB,CAAoBqB,GAApBrB,EAAyByB,IAAzBzB,EAAP;AACD","names":["DEFAULT_ATTRIBUTES","role","icon","iconKey","attributes","iconAttributes","$","extend","title","ariaLabel","Reflect","deleteProperty","htmlAttributes","Object","keys","forEach","key","newKey","replace","ucw","toLowerCase","iconsPath","window","Decidim","config","get","elHtml","$el","prepend","attr","append","html"],"sources":["/var/lib/gems/2.7.0/gems/decidim-core-0.26.0/app/packs/src/decidim/icon.js"],"sourcesContent":["const DEFAULT_ATTRIBUTES = {\n  role: \"img\",\n  \"aria-hidden\": \"true\"\n};\n\n/**\n * Generates a Decidim icon element and returns it as a string.\n * @param {String} iconKey - the key of the icon to be generated\n * @param {Object} attributes - extra attributes to define for the icon SVG\n * @param {int} wait - number of milliseconds to wait before executing the function.\n * @private\n * @returns {Void} - Returns nothing.\n */\nexport default function icon(iconKey, attributes = {}) {\n  const iconAttributes = $.extend(DEFAULT_ATTRIBUTES, attributes);\n  const title = iconAttributes.title || iconAttributes.ariaLabel;\n  Reflect.deleteProperty(iconAttributes, \"title\");\n\n  const htmlAttributes = {\n    \"class\": `icon icon--${iconKey}`\n  };\n  Object.keys(iconAttributes).forEach((key) => {\n    // Convert the key to dash-format.\n    const newKey = key.replace(/([A-Z])/g, (ucw) => `-${ucw[0].toLowerCase()}`);\n    if (typeof htmlAttributes[key] === \"undefined\") {\n      htmlAttributes[newKey] = iconAttributes[key];\n    } else {\n      htmlAttributes[newKey] = `${htmlAttributes[newKey]} ${iconAttributes[key]}`;\n    }\n  });\n\n  const iconsPath =  window.Decidim.config.get(\"icons_path\");\n  const elHtml = `<svg><use href=\"${iconsPath}#icon-${iconKey}\"></use></svg>`;\n  const $el = $(elHtml);\n  if (title) {\n    $el.prepend(`<title>${title}</title>`);\n  } else {\n    // This keeps accessibility audit tools happy\n    $el.prepend(`<title>${iconKey}</title>`);\n    // Force hidden if title is not defined\n    htmlAttributes[\"aria-hidden\"] = \"true\";\n  }\n  $el.attr(htmlAttributes);\n\n  return $(\"<div />\").append($el).html();\n}\n"]},"metadata":{},"sourceType":"module"}