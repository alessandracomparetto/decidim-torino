{"ast":null,"code":"/* eslint-disable no-invalid-this */\n$(function () {\n  var button = $(\"#vote_button\"),\n      buttonChange = $(\"#question-vote-confirm-modal-button-change\"),\n      responseButtons = $(\".response-title\"),\n      voteConfirmDialog = $(\"#question-vote-confirm-modal\"),\n      voteDialog = $(\"#question-vote-modal\");\n\n  if (voteDialog.length && button.length) {\n    button.click(function () {\n      voteDialog.foundation(\"open\");\n    });\n  }\n\n  if (voteDialog.length && responseButtons.length && voteConfirmDialog.length) {\n    responseButtons.click(function () {\n      $(\"#question-vote-confirm-modal-question-title\").text($(this).text());\n      $(\"#decidim_consultations_response_id\").val($(this).data(\"response-id\"));\n      voteDialog.foundation(\"close\");\n      voteConfirmDialog.foundation(\"open\");\n    });\n  }\n\n  if (buttonChange.length && voteDialog.length && voteConfirmDialog.length) {\n    buttonChange.click(function () {\n      voteConfirmDialog.foundation(\"close\");\n      voteDialog.foundation(\"open\");\n    });\n  }\n\n  $(\"#confirm-vote-form\").on(\"ajax:beforeSend\", function () {\n    $(\"#confirm-vote-form-loader,#confirm-vote-form\").toggleClass(\"hide\");\n  });\n  $(\"#confirm-vote-form\").on(\"ajax:success\", function () {\n    voteConfirmDialog.foundation(\"close\");\n  });\n  $(\"#confirm-vote-form\").on(\"ajax:error\", function (event) {\n    var error = event && event.detail && event.detail[0].error;\n    $(\"#vote-result-callout\").addClass(\"alert\").removeClass(\"hide warning\");\n    $(\"#vote-result-callout .callout-title\").text($(\"#vote-result-callout\").data(\"title-ko\"));\n    $(\"#vote-result-callout .callout-message\").text(error || $(\"#vote-result-callout\").data(\"message-ko\"));\n    $(\"#confirm-vote-form-loader,#confirm-vote-form\").toggleClass(\"hide\");\n    voteConfirmDialog.foundation(\"close\");\n  });\n});","map":{"version":3,"mappings":"AAAA;AAEAA,CAAC,CAAC,YAAM;AACN,MAAIC,MAAM,GAAGD,CAAC,CAAC,cAAD,CAAd;AAAA,MACIE,YAAY,GAAGF,CAAC,CAAC,4CAAD,CADpB;AAAA,MAEIG,eAAe,GAAGH,CAAC,CAAC,iBAAD,CAFvB;AAAA,MAGII,iBAAiB,GAAGJ,CAAC,CAAC,8BAAD,CAHzB;AAAA,MAIIK,UAAU,GAAGL,CAAC,CAAC,sBAAD,CAJlB;;AAMA,MAAIK,UAAU,CAACC,MAAXD,IAAqBJ,MAAM,CAACK,MAAhC,EAAwC;AACtCL,UAAM,CAACM,KAAPN,CAAa,YAAY;AACvBI,gBAAU,CAACG,UAAXH,CAAsB,MAAtBA;AADF;AAGD;;AAED,MAAIA,UAAU,CAACC,MAAXD,IAAqBF,eAAe,CAACG,MAArCD,IAA+CD,iBAAiB,CAACE,MAArE,EAA6E;AAC3EH,mBAAe,CAACI,KAAhBJ,CAAsB,YAAY;AAChCH,OAAC,CAAC,6CAAD,CAADA,CAAiDS,IAAjDT,CAAsDA,CAAC,CAAC,IAAD,CAADA,CAAQS,IAART,EAAtDA;AACAA,OAAC,CAAC,oCAAD,CAADA,CAAwCU,GAAxCV,CAA4CA,CAAC,CAAC,IAAD,CAADA,CAAQW,IAARX,CAAa,aAAbA,CAA5CA;AAEAK,gBAAU,CAACG,UAAXH,CAAsB,OAAtBA;AACAD,uBAAiB,CAACI,UAAlBJ,CAA6B,MAA7BA;AALF;AAOD;;AAED,MAAIF,YAAY,CAACI,MAAbJ,IAAuBG,UAAU,CAACC,MAAlCJ,IAA4CE,iBAAiB,CAACE,MAAlE,EAA0E;AACxEJ,gBAAY,CAACK,KAAbL,CAAmB,YAAW;AAC5BE,uBAAiB,CAACI,UAAlBJ,CAA6B,OAA7BA;AACAC,gBAAU,CAACG,UAAXH,CAAsB,MAAtBA;AAFF;AAID;;AAEDL,GAAC,CAAC,oBAAD,CAADA,CAAwBY,EAAxBZ,CAA2B,iBAA3BA,EAA8C,YAAW;AACvDA,KAAC,CAAC,8CAAD,CAADA,CAAkDa,WAAlDb,CAA8D,MAA9DA;AADF;AAIAA,GAAC,CAAC,oBAAD,CAADA,CAAwBY,EAAxBZ,CAA2B,cAA3BA,EAA2C,YAAW;AACpDI,qBAAiB,CAACI,UAAlBJ,CAA6B,OAA7BA;AADF;AAIAJ,GAAC,CAAC,oBAAD,CAADA,CAAwBY,EAAxBZ,CAA2B,YAA3BA,EAAyC,UAASc,KAAT,EAAgB;AACvD,QAAMC,KAAK,GAAGD,KAAK,IAAIA,KAAK,CAACE,MAAfF,IAAyBA,KAAK,CAACE,MAANF,CAAa,CAAbA,EAAgBC,KAAvD;AACAf,KAAC,CAAC,sBAAD,CAADA,CAA0BiB,QAA1BjB,CAAmC,OAAnCA,EAA4CkB,WAA5ClB,CAAwD,cAAxDA;AACAA,KAAC,CAAC,qCAAD,CAADA,CAAyCS,IAAzCT,CAA8CA,CAAC,CAAC,sBAAD,CAADA,CAA0BW,IAA1BX,CAA+B,UAA/BA,CAA9CA;AACAA,KAAC,CAAC,uCAAD,CAADA,CAA2CS,IAA3CT,CAAgDe,KAAK,IAAIf,CAAC,CAAC,sBAAD,CAADA,CAA0BW,IAA1BX,CAA+B,YAA/BA,CAAzDA;AACAA,KAAC,CAAC,8CAAD,CAADA,CAAkDa,WAAlDb,CAA8D,MAA9DA;AACAI,qBAAiB,CAACI,UAAlBJ,CAA6B,OAA7BA;AANF;AAtCD,EAADJ","names":["$","button","buttonChange","responseButtons","voteConfirmDialog","voteDialog","length","click","foundation","text","val","data","on","toggleClass","event","error","detail","addClass","removeClass"],"sources":["/var/lib/gems/2.7.0/gems/decidim-consultations-0.26.0/app/packs/src/decidim/consultations/vote_dialog.js"],"sourcesContent":["/* eslint-disable no-invalid-this */\n\n$(() => {\n  let button = $(\"#vote_button\"),\n      buttonChange = $(\"#question-vote-confirm-modal-button-change\"),\n      responseButtons = $(\".response-title\"),\n      voteConfirmDialog = $(\"#question-vote-confirm-modal\"),\n      voteDialog = $(\"#question-vote-modal\");\n\n  if (voteDialog.length && button.length) {\n    button.click(function () {\n      voteDialog.foundation(\"open\");\n    });\n  }\n\n  if (voteDialog.length && responseButtons.length && voteConfirmDialog.length) {\n    responseButtons.click(function () {\n      $(\"#question-vote-confirm-modal-question-title\").text($(this).text());\n      $(\"#decidim_consultations_response_id\").val($(this).data(\"response-id\"));\n\n      voteDialog.foundation(\"close\");\n      voteConfirmDialog.foundation(\"open\");\n    });\n  }\n\n  if (buttonChange.length && voteDialog.length && voteConfirmDialog.length) {\n    buttonChange.click(function() {\n      voteConfirmDialog.foundation(\"close\");\n      voteDialog.foundation(\"open\");\n    });\n  }\n\n  $(\"#confirm-vote-form\").on(\"ajax:beforeSend\", function() {\n    $(\"#confirm-vote-form-loader,#confirm-vote-form\").toggleClass(\"hide\");\n  });\n\n  $(\"#confirm-vote-form\").on(\"ajax:success\", function() {\n    voteConfirmDialog.foundation(\"close\");\n  });\n\n  $(\"#confirm-vote-form\").on(\"ajax:error\", function(event) {\n    const error = event && event.detail && event.detail[0].error;\n    $(\"#vote-result-callout\").addClass(\"alert\").removeClass(\"hide warning\");\n    $(\"#vote-result-callout .callout-title\").text($(\"#vote-result-callout\").data(\"title-ko\"));\n    $(\"#vote-result-callout .callout-message\").text(error || $(\"#vote-result-callout\").data(\"message-ko\"));\n    $(\"#confirm-vote-form-loader,#confirm-vote-form\").toggleClass(\"hide\");\n    voteConfirmDialog.foundation(\"close\");\n  });\n});\n"]},"metadata":{},"sourceType":"module"}