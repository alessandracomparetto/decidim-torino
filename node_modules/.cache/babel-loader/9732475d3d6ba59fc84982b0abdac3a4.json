{"ast":null,"code":"function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nvar BudgetRuleTogglerComponent = /*#__PURE__*/function () {\n  function BudgetRuleTogglerComponent() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, BudgetRuleTogglerComponent);\n\n    this.ruleCheckboxes = options.ruleCheckboxes;\n\n    this._runAll();\n  }\n\n  _createClass(BudgetRuleTogglerComponent, [{\n    key: \"_runAll\",\n    value: function _runAll() {\n      var _this = this;\n\n      this.ruleCheckboxes.each(function (_i, checkbox) {\n        _this._bindEvent(checkbox);\n\n        _this.run(checkbox);\n      });\n    }\n  }, {\n    key: \"_bindEvent\",\n    value: function _bindEvent(target) {\n      var _this2 = this;\n\n      $(target).on(\"change\", function (event) {\n        _this2.run(event.target);\n      });\n    }\n  }, {\n    key: \"run\",\n    value: function run(target) {\n      var _this3 = this;\n\n      this.toggleTextInput(target);\n\n      if ($(target).prop(\"checked\")) {\n        this.ruleCheckboxes.filter(function (_i, checkbox) {\n          return checkbox !== target;\n        }).prop(\"checked\", false).each(function (_i, checkbox) {\n          _this3.toggleTextInput(checkbox);\n        });\n      }\n    }\n  }, {\n    key: \"toggleTextInput\",\n    value: function toggleTextInput(target) {\n      var container = $(target).closest(\"div\");\n\n      if (container.length < 1) {\n        return;\n      }\n\n      var containerClassPrefix = container.attr(\"class\").replace(/^vote_rule_/, \"vote_\").replace(/_enabled_container$/, \"\");\n      var input = $(\"[class^=\\\"\".concat(containerClassPrefix, \"\\\"][class$=\\\"_container\\\"]\"));\n\n      if ($(target).prop(\"checked\")) {\n        input.slideDown();\n      } else {\n        input.slideUp();\n      }\n    }\n  }]);\n\n  return BudgetRuleTogglerComponent;\n}();\n\nexport { BudgetRuleTogglerComponent as default };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;IAAqBA,0B;AACnB,wCAA0B;AAAA,QAAdC,OAAc,uEAAJ,EAAI;;AAAAC;;AACxB,SAAKC,cAAL,GAAsBF,OAAO,CAACE,cAA9B;;AACA,SAAKC,OAAL;AACD;;;;WAED,mBAAU;AAAA;;AACR,WAAKD,cAAL,CAAoBE,IAApB,CAAyB,UAACC,EAAD,EAAKC,QAAL,EAAkB;AACzCC,aAAI,CAACC,UAAL,CAAgBF,QAAhB;;AACAC,aAAI,CAACE,GAAL,CAASH,QAAT;AAFF;AAID;;;WAED,oBAAWI,MAAX,EAAmB;AAAA;;AACjBC,OAAC,CAACD,MAAD,CAADC,CAAUC,EAAVD,CAAa,QAAbA,EAAuB,UAACE,KAAD,EAAW;AAChCC,cAAI,CAACL,GAAL,CAASI,KAAK,CAACH,MAAf;AADF;AAGD;;;WAED,aAAIA,MAAJ,EAAY;AAAA;;AACV,WAAKK,eAAL,CAAqBL,MAArB;;AAEA,UAAIC,CAAC,CAACD,MAAD,CAADC,CAAUK,IAAVL,CAAe,SAAfA,CAAJ,EAA+B;AAC7B,aAAKT,cAAL,CAAoBe,MAApB,CACE,UAACZ,EAAD,EAAKC,QAAL,EAAkB;AAChB,iBAAOA,QAAQ,KAAKI,MAApB;AAFJ,WAGKM,IAHL,CAGU,SAHV,EAGqB,KAHrB,EAG4BZ,IAH5B,CAIE,UAACC,EAAD,EAAKC,QAAL,EAAkB;AAChBY,gBAAI,CAACH,eAAL,CAAqBT,QAArB;AALJ;AAOD;AACF;;;WAED,yBAAgBI,MAAhB,EAAwB;AACtB,UAAMS,SAAS,GAAGR,CAAC,CAACD,MAAD,CAADC,CAAUS,OAAVT,CAAkB,KAAlBA,CAAlB;;AACA,UAAIQ,SAAS,CAACE,MAAVF,GAAmB,CAAvB,EAA0B;AACxB;AACD;;AACD,UAAMG,oBAAoB,GAAGH,SAAS,CAACI,IAAVJ,CAAe,OAAfA,EAC3BK,OAD2BL,CACnB,aADmBA,EACJ,OADIA,EAE3BK,OAF2BL,CAEnB,qBAFmBA,EAEI,EAFJA,CAA7B;AAGA,UAAMM,KAAK,GAAGd,CAAC,qBAAaW,oBAAb,gCAAf;;AAEA,UAAIX,CAAC,CAACD,MAAD,CAADC,CAAUK,IAAVL,CAAe,SAAfA,CAAJ,EAA+B;AAC7Bc,aAAK,CAACC,SAAND;AADF,aAEO;AACLA,aAAK,CAACE,OAANF;AACD;AACF;;;;;;SAhDkB1B,0B","names":["BudgetRuleTogglerComponent","options","_classCallCheck","ruleCheckboxes","_runAll","each","_i","checkbox","_this","_bindEvent","run","target","$","on","event","_this2","toggleTextInput","prop","filter","_this3","container","closest","length","containerClassPrefix","attr","replace","input","slideDown","slideUp"],"sources":["/var/lib/gems/2.7.0/gems/decidim-admin-0.26.0/app/packs/src/decidim/admin/budget_rule_toggler.component.js"],"sourcesContent":["export default class BudgetRuleTogglerComponent {\n  constructor(options = {}) {\n    this.ruleCheckboxes = options.ruleCheckboxes;\n    this._runAll();\n  }\n\n  _runAll() {\n    this.ruleCheckboxes.each((_i, checkbox) => {\n      this._bindEvent(checkbox);\n      this.run(checkbox);\n    });\n  }\n\n  _bindEvent(target) {\n    $(target).on(\"change\", (event) => {\n      this.run(event.target);\n    });\n  }\n\n  run(target) {\n    this.toggleTextInput(target);\n\n    if ($(target).prop(\"checked\")) {\n      this.ruleCheckboxes.filter(\n        (_i, checkbox) => {\n          return checkbox !== target;\n        }).prop(\"checked\", false).each(\n        (_i, checkbox) => {\n          this.toggleTextInput(checkbox);\n        });\n    }\n  }\n\n  toggleTextInput(target) {\n    const container = $(target).closest(\"div\");\n    if (container.length < 1) {\n      return;\n    }\n    const containerClassPrefix = container.attr(\"class\").\n      replace(/^vote_rule_/, \"vote_\").\n      replace(/_enabled_container$/, \"\");\n    const input = $(`[class^=\"${containerClassPrefix}\"][class$=\"_container\"]`);\n\n    if ($(target).prop(\"checked\")) {\n      input.slideDown();\n    } else {\n      input.slideUp();\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}