{"ast":null,"code":"$(function () {\n  var $userRegistrationForm = $(\"#register-form\");\n  var $userGroupFields = $userRegistrationForm.find(\".user-group-fields\");\n  var inputSelector = 'input[name=\"user[sign_up_as]\"]';\n  var newsletterSelector = 'input[type=\"checkbox\"][name=\"user[newsletter]\"]';\n  var $newsletterModal = $(\"#sign-up-newsletter-modal\");\n\n  var setGroupFieldsVisibility = function setGroupFieldsVisibility(value) {\n    if (value === \"user\") {\n      $userGroupFields.hide();\n    } else {\n      $userGroupFields.show();\n    }\n  };\n\n  var checkNewsletter = function checkNewsletter(check) {\n    $userRegistrationForm.find(newsletterSelector).prop(\"checked\", check);\n    $newsletterModal.data(\"continue\", true);\n    $newsletterModal.foundation(\"close\");\n    $userRegistrationForm.submit();\n  };\n\n  setGroupFieldsVisibility($userRegistrationForm.find(\"\".concat(inputSelector, \":checked\")).val());\n  $userRegistrationForm.on(\"change\", inputSelector, function (event) {\n    var value = event.target.value;\n    setGroupFieldsVisibility(value);\n  });\n  $userRegistrationForm.on(\"submit\", function (event) {\n    var newsletterChecked = $userRegistrationForm.find(newsletterSelector);\n\n    if (!$newsletterModal.data(\"continue\")) {\n      if (!newsletterChecked.prop(\"checked\")) {\n        event.preventDefault();\n        $newsletterModal.foundation(\"open\");\n      }\n    }\n  });\n  $newsletterModal.find(\".check-newsletter\").on(\"click\", function (event) {\n    checkNewsletter($(event.target).data(\"check\"));\n  });\n});","map":{"version":3,"mappings":"AAAAA,CAAC,CAAC,YAAM;AACN,MAAMC,qBAAqB,GAAGD,CAAC,CAAC,gBAAD,CAA/B;AACA,MAAME,gBAAgB,GAAQD,qBAAqB,CAACE,IAAtBF,CAA2B,oBAA3BA,CAA9B;AACA,MAAMG,aAAa,GAAW,gCAA9B;AACA,MAAMC,kBAAkB,GAAM,iDAA9B;AACA,MAAMC,gBAAgB,GAAQN,CAAC,CAAC,2BAAD,CAA/B;;AAGA,MAAMO,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACC,KAAD,EAAW;AAC1C,QAAIA,KAAK,KAAK,MAAd,EAAsB;AACpBN,sBAAgB,CAACO,IAAjBP;AADF,WAEO;AACLA,sBAAgB,CAACQ,IAAjBR;AACD;AALH;;AAQA,MAAMS,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAW;AACjCX,yBAAqB,CAACE,IAAtBF,CAA2BI,kBAA3BJ,EAA+CY,IAA/CZ,CAAoD,SAApDA,EAA+DW,KAA/DX;AACAK,oBAAgB,CAACQ,IAAjBR,CAAsB,UAAtBA,EAAkC,IAAlCA;AACAA,oBAAgB,CAACS,UAAjBT,CAA4B,OAA5BA;AACAL,yBAAqB,CAACe,MAAtBf;AAJF;;AAOAM,0BAAwB,CAACN,qBAAqB,CAACE,IAAtBF,WAA8BG,aAA9B,eAAuDa,GAAvDhB,EAAD,CAAxBM;AAEAN,uBAAqB,CAACiB,EAAtBjB,CAAyB,QAAzBA,EAAmCG,aAAnCH,EAAkD,UAACkB,KAAD,EAAW;AAC3D,QAAMX,KAAK,GAAGW,KAAK,CAACC,MAAND,CAAaX,KAA3B;AAEAD,4BAAwB,CAACC,KAAD,CAAxBD;AAHF;AAMAN,uBAAqB,CAACiB,EAAtBjB,CAAyB,QAAzBA,EAAmC,UAACkB,KAAD,EAAW;AAC5C,QAAME,iBAAiB,GAAGpB,qBAAqB,CAACE,IAAtBF,CAA2BI,kBAA3BJ,CAA1B;;AACA,QAAI,CAACK,gBAAgB,CAACQ,IAAjBR,CAAsB,UAAtBA,CAAL,EAAwC;AACtC,UAAI,CAACe,iBAAiB,CAACR,IAAlBQ,CAAuB,SAAvBA,CAAL,EAAwC;AACtCF,aAAK,CAACG,cAANH;AACAb,wBAAgB,CAACS,UAAjBT,CAA4B,MAA5BA;AACD;AACF;AAPH;AAUAA,kBAAgB,CAACH,IAAjBG,CAAsB,mBAAtBA,EAA2CY,EAA3CZ,CAA8C,OAA9CA,EAAuD,UAACa,KAAD,EAAW;AAChER,mBAAe,CAACX,CAAC,CAACmB,KAAK,CAACC,MAAP,CAADpB,CAAgBc,IAAhBd,CAAqB,OAArBA,CAAD,CAAfW;AADF;AAzCD,EAADX","names":["$","$userRegistrationForm","$userGroupFields","find","inputSelector","newsletterSelector","$newsletterModal","setGroupFieldsVisibility","value","hide","show","checkNewsletter","check","prop","data","foundation","submit","val","on","event","target","newsletterChecked","preventDefault"],"sources":["/var/lib/gems/2.7.0/gems/decidim-core-0.26.0/app/packs/src/decidim/user_registrations.js"],"sourcesContent":["$(() => {\n  const $userRegistrationForm = $(\"#register-form\");\n  const $userGroupFields      = $userRegistrationForm.find(\".user-group-fields\");\n  const inputSelector         = 'input[name=\"user[sign_up_as]\"]';\n  const newsletterSelector    = 'input[type=\"checkbox\"][name=\"user[newsletter]\"]';\n  const $newsletterModal      = $(\"#sign-up-newsletter-modal\");\n\n\n  const setGroupFieldsVisibility = (value) => {\n    if (value === \"user\") {\n      $userGroupFields.hide();\n    } else {\n      $userGroupFields.show();\n    }\n  }\n\n  const checkNewsletter = (check) => {\n    $userRegistrationForm.find(newsletterSelector).prop(\"checked\", check);\n    $newsletterModal.data(\"continue\", true);\n    $newsletterModal.foundation(\"close\");\n    $userRegistrationForm.submit();\n  }\n\n  setGroupFieldsVisibility($userRegistrationForm.find(`${inputSelector}:checked`).val());\n\n  $userRegistrationForm.on(\"change\", inputSelector, (event) => {\n    const value = event.target.value;\n\n    setGroupFieldsVisibility(value);\n  });\n\n  $userRegistrationForm.on(\"submit\", (event) => {\n    const newsletterChecked = $userRegistrationForm.find(newsletterSelector);\n    if (!$newsletterModal.data(\"continue\")) {\n      if (!newsletterChecked.prop(\"checked\")) {\n        event.preventDefault();\n        $newsletterModal.foundation(\"open\");\n      }\n    }\n  });\n\n  $newsletterModal.find(\".check-newsletter\").on(\"click\", (event) => {\n    checkNewsletter($(event.target).data(\"check\"));\n  });\n});\n"]},"metadata":{},"sourceType":"module"}