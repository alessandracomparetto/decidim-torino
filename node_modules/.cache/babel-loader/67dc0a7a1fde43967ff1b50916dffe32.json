{"ast":null,"code":"function _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n/* eslint-disable */\n\n/* =========================================================\n * foundation-datepicker.js\n * Copyright 2015 Peter Beno, najlepsiwebdesigner@gmail.com, @benopeter\n * project website http://foundation-datepicker.peterbeno.com\n * ========================================================= */\n// This file is a modified version of the original file\n// See\n//  - https://github.com/decidim/decidim/pull/1207\n//  - https://github.com/decidim/decidim/pull/2512\n//  - https://github.com/decidim/decidim/pull/3515\n\n\n!function ($) {\n  function UTCDate() {\n    return new Date(Date.UTC.apply(Date, arguments));\n  }\n\n  function UTCToday() {\n    var today = new Date();\n    return UTCDate(today.getUTCFullYear(), today.getUTCMonth(), today.getUTCDate());\n  }\n\n  var Datepicker = function Datepicker(element, options) {\n    var that = this;\n    this.element = $(element);\n    this.autoShow = options.autoShow == undefined ? true : options.autoShow;\n    this.appendTo = options.appendTo || \"body\";\n    this.closeButton = options.closeButton;\n    this.language = options.language || this.element.data(\"date-language\") || \"en\";\n    this.language = this.language in dates ? this.language : this.language.split(\"-\")[0]; // Check if \"de-DE\" style date is available, if not language should fallback to 2 letter code eg \"de\"\n\n    this.language = this.language in dates ? this.language : \"en\";\n    this.isRTL = dates[this.language].rtl || false;\n    this.format = DPGlobal.parseFormat(options.format || this.element.data(\"date-format\") || dates[this.language].format || \"mm/dd/yyyy\");\n    this.formatText = options.format || this.element.data(\"date-format\") || dates[this.language].format || \"mm/dd/yyyy\";\n    this.isInline = false;\n    this.isInput = this.element.is(\"input\");\n    this.component = this.element.is(\".date\") ? this.element.find(\".prefix, .postfix\") : false;\n    this.hasInput = this.component && this.element.find(\"input\").length;\n    this.disableDblClickSelection = options.disableDblClickSelection;\n\n    this.onRender = options.onRender || function () {};\n\n    if (this.component && this.component.length === 0) {\n      this.component = false;\n    }\n\n    this.linkField = options.linkField || this.element.data(\"link-field\") || false;\n    this.linkFormat = DPGlobal.parseFormat(options.linkFormat || this.element.data(\"link-format\") || \"yyyy-mm-dd hh:ii:ss\");\n    this.minuteStep = options.minuteStep || this.element.data(\"minute-step\") || 5;\n    this.pickerPosition = options.pickerPosition || this.element.data(\"picker-position\") || \"bottom-right\";\n    this.initialDate = options.initialDate || null;\n    this.faCSSprefix = options.faCSSprefix || \"fa\";\n    this.leftArrow = options.leftArrow || \"<i class=\\\"\".concat(this.faCSSprefix, \" \").concat(this.faCSSprefix, \"-chevron-left fi-arrow-left\\\"/>\");\n    this.rightArrow = options.rightArrow || \"<i class=\\\"\".concat(this.faCSSprefix, \" \").concat(this.faCSSprefix, \"-chevron-right fi-arrow-right\\\"/>\");\n    this.closeIcon = options.closeIcon || \"<i class=\\\"\".concat(this.faCSSprefix, \" \").concat(this.faCSSprefix, \"-remove \").concat(this.faCSSprefix, \"-times fi-x\\\"></i>\");\n    this.minView = 0;\n\n    if (\"minView\" in options) {\n      this.minView = options.minView;\n    } else if (\"minView\" in this.element.data()) {\n      this.minView = this.element.data(\"min-view\");\n    }\n\n    this.minView = DPGlobal.convertViewMode(this.minView);\n    this.maxView = DPGlobal.modes.length - 1;\n\n    if (\"maxView\" in options) {\n      this.maxView = options.maxView;\n    } else if (\"maxView\" in this.element.data()) {\n      this.maxView = this.element.data(\"max-view\");\n    }\n\n    this.maxView = DPGlobal.convertViewMode(this.maxView);\n    this.startViewMode = \"month\";\n\n    if (\"startView\" in options) {\n      this.startViewMode = options.startView;\n    } else if (\"startView\" in this.element.data()) {\n      this.startViewMode = this.element.data(\"start-view\");\n    }\n\n    this.startViewMode = DPGlobal.convertViewMode(this.startViewMode);\n    this.viewMode = this.startViewMode;\n\n    if (!(\"minView\" in options) && !(\"maxView\" in options) && !this.element.data(\"min-view\") && !this.element.data(\"max-view\")) {\n      this.pickTime = false;\n\n      if (\"pickTime\" in options) {\n        this.pickTime = options.pickTime;\n      }\n\n      if (this.pickTime == true) {\n        this.minView = 0;\n        this.maxView = 4;\n      } else {\n        this.minView = 2;\n        this.maxView = 4;\n      }\n    }\n\n    this.forceParse = true;\n\n    if (\"forceParse\" in options) {\n      this.forceParse = options.forceParse;\n    } else if (\"dateForceParse\" in this.element.data()) {\n      this.forceParse = this.element.data(\"date-force-parse\");\n    }\n\n    this.picker = $(DPGlobal.template(this.leftArrow, this.rightArrow, this.closeIcon)).appendTo(this.isInline ? this.element : this.appendTo).on({\n      click: $.proxy(this.click, this),\n      mousedown: $.proxy(this.mousedown, this)\n    });\n\n    if (this.closeButton) {\n      this.picker.find(\"a.datepicker-close\").show();\n    } else {\n      this.picker.find(\"a.datepicker-close\").hide();\n    }\n\n    if (this.isInline) {\n      this.picker.addClass(\"datepicker-inline\");\n    } else {\n      this.picker.addClass(\"datepicker-dropdown dropdown-menu\");\n    }\n\n    if (this.isRTL) {\n      this.picker.addClass(\"datepicker-rtl\");\n      this.picker.find(\".date-switch\").each(function () {\n        $(this).parent().prepend($(this).siblings(\".next\"));\n        $(this).parent().append($(this).siblings(\".prev\"));\n      });\n      this.picker.find(\".prev, .next\").toggleClass(\"prev next\");\n    }\n\n    $(document).on(\"mousedown\", function (e) {\n      if (that.isInput && e.target === that.element[0]) {\n        return;\n      } // Clicked outside the datepicker, hide it\n\n\n      if ($(e.target).closest(\".datepicker.datepicker-inline, .datepicker.datepicker-dropdown\").length === 0) {\n        that.hide();\n      }\n    });\n    this.autoclose = true;\n\n    if (\"autoclose\" in options) {\n      this.autoclose = options.autoclose;\n    } else if (\"dateAutoclose\" in this.element.data()) {\n      this.autoclose = this.element.data(\"date-autoclose\");\n    }\n\n    this.keyboardNavigation = true;\n\n    if (\"keyboardNavigation\" in options) {\n      this.keyboardNavigation = options.keyboardNavigation;\n    } else if (\"dateKeyboardNavigation\" in this.element.data()) {\n      this.keyboardNavigation = this.element.data(\"date-keyboard-navigation\");\n    }\n\n    this.todayBtn = options.todayBtn || this.element.data(\"date-today-btn\") || false;\n    this.todayHighlight = options.todayHighlight || this.element.data(\"date-today-highlight\") || false;\n    this.calendarWeeks = false;\n\n    if (\"calendarWeeks\" in options) {\n      this.calendarWeeks = options.calendarWeeks;\n    } else if (\"dateCalendarWeeks\" in this.element.data()) {\n      this.calendarWeeks = this.element.data(\"date-calendar-weeks\");\n    }\n\n    if (this.calendarWeeks) {\n      this.picker.find(\"tfoot th.today\").attr(\"colspan\", function (i, val) {\n        return parseInt(val) + 1;\n      });\n    }\n\n    this.weekStart = (options.weekStart || this.element.data(\"date-weekstart\") || dates[this.language].weekStart || 0) % 7;\n    this.weekEnd = (this.weekStart + 6) % 7;\n    this.startDate = -Infinity;\n    this.endDate = Infinity;\n    this.daysOfWeekDisabled = [];\n    this.datesDisabled = [];\n    this.setStartDate(options.startDate || this.element.data(\"date-startdate\"));\n    this.setEndDate(options.endDate || this.element.data(\"date-enddate\"));\n    this.setDaysOfWeekDisabled(options.daysOfWeekDisabled || this.element.data(\"date-days-of-week-disabled\"));\n    this.setDatesDisabled(options.datesDisabled || this.element.data(\"dates-disabled\"));\n\n    if (this.initialDate != null) {\n      this.date = this.viewDate = DPGlobal.parseDate(this.initialDate, this.format, this.language);\n      this.setValue();\n    }\n\n    this.fillDow();\n    this.fillMonths();\n    this.update();\n    this.showMode();\n\n    if (this.isInline) {\n      this.show();\n    }\n\n    this._attachEvents();\n  };\n\n  Datepicker.prototype = {\n    constructor: Datepicker,\n    _events: [],\n    _attachEvents: function _attachEvents() {\n      this._detachEvents();\n\n      if (this.isInput) {\n        // single input\n        if (!this.keyboardNavigation) {\n          this._events = [[this.element, {\n            focus: this.autoShow ? $.proxy(this.show, this) : function () {}\n          }]];\n        } else {\n          this._events = [[this.element, {\n            focus: this.autoShow ? $.proxy(this.show, this) : function () {},\n            keyup: $.proxy(this.update, this),\n            keydown: $.proxy(this.keydown, this),\n            click: this.element.attr(\"readonly\") ? $.proxy(this.show, this) : function () {}\n          }]];\n        }\n      } else if (this.component && this.hasInput) {\n        // component: input + button\n        this._events = [// For components that are not readonly, allow keyboard nav\n        [this.element.find(\"input\"), {\n          focus: this.autoShow ? $.proxy(this.show, this) : function () {},\n          keyup: $.proxy(this.update, this),\n          keydown: $.proxy(this.keydown, this)\n        }], [this.component, {\n          click: $.proxy(this.show, this)\n        }]];\n      } else if (this.element.is(\"div\")) {\n        // inline datepicker\n        this.isInline = true;\n      } else {\n        this._events = [[this.element, {\n          click: $.proxy(this.show, this)\n        }]];\n      }\n\n      if (this.disableDblClickSelection) {\n        this._events[this._events.length] = [this.element, {\n          dblclick: function dblclick(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            $(this).blur();\n          }\n        }];\n      }\n\n      for (var el, ev, i = 0; i < this._events.length; i++) {\n        el = this._events[i][0];\n        ev = this._events[i][1];\n        el.on(ev);\n      }\n    },\n    _detachEvents: function _detachEvents() {\n      for (var el, ev, i = 0; i < this._events.length; i++) {\n        el = this._events[i][0];\n        ev = this._events[i][1];\n        el.off(ev);\n      }\n\n      this._events = [];\n    },\n    show: function show(e) {\n      this.picker.show();\n      this.height = this.component ? this.component.outerHeight() : this.element.outerHeight();\n      this.update();\n      this.place();\n      $(window).on(\"resize\", $.proxy(this.place, this));\n\n      if (e) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n\n      this.element.trigger({\n        type: \"show\",\n        date: this.date\n      });\n    },\n    hide: function hide(e) {\n      if (this.isInline) {\n        return;\n      }\n\n      if (!this.picker.is(\":visible\")) {\n        return;\n      }\n\n      this.picker.hide();\n      $(window).off(\"resize\", this.place);\n      this.viewMode = this.startViewMode;\n      this.showMode();\n\n      if (!this.isInput) {\n        $(document).off(\"mousedown\", this.hide);\n      }\n\n      if (this.forceParse && (this.isInput && this.element.val() || this.hasInput && this.element.find(\"input\").val())) {\n        this.setValue();\n      }\n\n      this.element.trigger({\n        type: \"hide\",\n        date: this.date\n      });\n    },\n    remove: function remove() {\n      this._detachEvents();\n\n      this.picker.remove();\n      delete this.element.data().datepicker;\n    },\n    getDate: function getDate() {\n      var d = this.getUTCDate();\n      return new Date(d.getTime() + d.getTimezoneOffset() * 60000);\n    },\n    getUTCDate: function getUTCDate() {\n      return this.date;\n    },\n    setDate: function setDate(d) {\n      this.setUTCDate(new Date(d.getTime() - d.getTimezoneOffset() * 60000));\n    },\n    setUTCDate: function setUTCDate(d) {\n      this.date = d;\n      this.setValue();\n    },\n    setValue: function setValue() {\n      var formatted = this.getFormattedDate();\n\n      if (!this.isInput) {\n        if (this.component) {\n          this.element.find(\"input\").val(formatted);\n        }\n\n        this.element.data(\"date\", formatted);\n      } else {\n        this.element.val(formatted);\n      }\n    },\n    getFormattedDate: function getFormattedDate(format) {\n      if (format === undefined) {\n        format = this.format;\n      }\n\n      return DPGlobal.formatDate(this.date, format, this.language);\n    },\n    setStartDate: function setStartDate(startDate) {\n      this.startDate = startDate || -Infinity;\n\n      if (this.startDate !== -Infinity) {\n        this.startDate = DPGlobal.parseDate(this.startDate, this.format, this.language);\n      }\n\n      this.update();\n      this.updateNavArrows();\n    },\n    setEndDate: function setEndDate(endDate) {\n      this.endDate = endDate || Infinity;\n\n      if (this.endDate !== Infinity) {\n        this.endDate = DPGlobal.parseDate(this.endDate, this.format, this.language);\n      }\n\n      this.update();\n      this.updateNavArrows();\n    },\n    setDaysOfWeekDisabled: function setDaysOfWeekDisabled(daysOfWeekDisabled) {\n      this.daysOfWeekDisabled = daysOfWeekDisabled || [];\n\n      if (!$.isArray(this.daysOfWeekDisabled)) {\n        this.daysOfWeekDisabled = this.daysOfWeekDisabled.split(/,\\s*/);\n      }\n\n      this.daysOfWeekDisabled = $.map(this.daysOfWeekDisabled, function (d) {\n        return parseInt(d, 10);\n      });\n      this.update();\n      this.updateNavArrows();\n    },\n    setDatesDisabled: function setDatesDisabled(datesDisabled) {\n      this.datesDisabled = datesDisabled || [];\n\n      if (!$.isArray(this.datesDisabled)) {\n        this.datesDisabled = this.datesDisabled.split(/,\\s*/);\n      }\n\n      this.datesDisabled = $.map(this.datesDisabled, function (d) {\n        return DPGlobal.parseDate(d, this.format, this.language).valueOf();\n      });\n      this.update();\n      this.updateNavArrows();\n    },\n    place: function place() {\n      if (this.isInline) {\n        return;\n      }\n\n      var zIndexes = [];\n      this.element.parents().map(function () {\n        if ($(this).css(\"z-index\") != \"auto\") {\n          zIndexes.push(parseInt($(this).css(\"z-index\")));\n        }\n      });\n      var zIndex = zIndexes.sort(function (a, b) {\n        return a - b;\n      }).pop() + 10;\n      var textbox = this.component ? this.component : this.element;\n      var offset = textbox.offset();\n      var height = textbox.outerHeight() + parseInt(textbox.css(\"margin-top\"));\n      var width = textbox.outerWidth() + parseInt(textbox.css(\"margin-left\"));\n      var fullOffsetTop = offset.top + height;\n      var offsetLeft = offset.left;\n      this.picker.removeClass(\"datepicker-top datepicker-bottom\"); // can we show it on top?\n\n      var canShowTop = $(window).scrollTop() < offset.top - this.picker.outerHeight();\n      var canShowBottom = fullOffsetTop + this.picker.outerHeight() < $(window).scrollTop() + $(window).height(); // If the datepicker is going to be below the window, show it on top of the input if it fits\n\n      if (!canShowBottom && canShowTop) {\n        fullOffsetTop = offset.top - this.picker.outerHeight();\n        this.picker.addClass(\"datepicker-top\");\n      } else {\n        // Scroll up if we cannot show it on bottom or top (for mobile devices)\n        if (!canShowBottom) {\n          $(window).scrollTop(offset.top);\n        }\n\n        this.picker.addClass(\"datepicker-bottom\");\n      } // if the datepicker is going to go past the right side of the window, we want\n      // to set the right position so the datepicker lines up with the textbox\n\n\n      if (offset.left + this.picker.width() >= $(window).width()) {\n        offsetLeft = offset.left + width - this.picker.width();\n      }\n\n      this.picker.css({\n        top: fullOffsetTop,\n        left: offsetLeft,\n        zIndex: zIndex\n      });\n    },\n    update: function update() {\n      var date,\n          fromArgs = false;\n      var currentVal = this.isInput ? this.element.val() : this.element.data(\"date\") || this.element.find(\"input\").val();\n\n      if (arguments && arguments.length && (typeof arguments[0] === \"string\" || arguments[0] instanceof Date)) {\n        date = arguments[0];\n        fromArgs = true;\n      } else {\n        date = this.isInput ? this.element.val() : this.element.data(\"date\") || this.element.find(\"input\").val();\n      }\n\n      this.date = DPGlobal.parseDate(date, this.format, this.language);\n\n      if (fromArgs) {\n        this.setValue();\n      } else if (currentVal == \"\") {\n        this.element.trigger({\n          type: \"changeDate\",\n          date: null\n        });\n      }\n\n      if (this.date < this.startDate) {\n        this.viewDate = new Date(this.startDate.valueOf());\n      } else if (this.date > this.endDate) {\n        this.viewDate = new Date(this.endDate.valueOf());\n      } else {\n        this.viewDate = new Date(this.date.valueOf());\n      }\n\n      this.fill();\n    },\n    fillDow: function fillDow() {\n      var dowCnt = this.weekStart,\n          html = \"<tr>\";\n\n      if (this.calendarWeeks) {\n        var cell = '<th class=\"cw\">&nbsp;</th>';\n        html += cell;\n        this.picker.find(\".datepicker-days thead tr:first-child\").prepend(cell);\n      }\n\n      while (dowCnt < this.weekStart + 7) {\n        html += \"<th class=\\\"dow\\\">\".concat(dates[this.language].daysMin[dowCnt++ % 7], \"</th>\");\n      }\n\n      html += \"</tr>\";\n      this.picker.find(\".datepicker-days thead\").append(html);\n    },\n    fillMonths: function fillMonths() {\n      var html = \"\",\n          i = 0;\n\n      while (i < 12) {\n        html += \"<span class=\\\"month\\\">\".concat(dates[this.language].monthsShort[i++], \"</span>\");\n      }\n\n      this.picker.find(\".datepicker-months td\").html(html);\n    },\n    fill: function fill() {\n      if (this.date == null || this.viewDate == null) {\n        return;\n      }\n\n      var d = new Date(this.viewDate.valueOf()),\n          year = d.getUTCFullYear(),\n          month = d.getUTCMonth(),\n          dayMonth = d.getUTCDate(),\n          hours = d.getUTCHours(),\n          minutes = d.getUTCMinutes(),\n          startYear = this.startDate !== -Infinity ? this.startDate.getUTCFullYear() : -Infinity,\n          startMonth = this.startDate !== -Infinity ? this.startDate.getUTCMonth() : -Infinity,\n          endYear = this.endDate !== Infinity ? this.endDate.getUTCFullYear() : Infinity,\n          endMonth = this.endDate !== Infinity ? this.endDate.getUTCMonth() : Infinity,\n          currentDate = this.date && UTCDate(this.date.getUTCFullYear(), this.date.getUTCMonth(), this.date.getUTCDate()).valueOf(),\n          today = new Date(),\n          titleFormat = dates[this.language].titleFormat || dates.en.titleFormat; // this.picker.find('.datepicker-days thead th.date-switch')\n      //          .text(DPGlobal.formatDate(new UTCDate(year, month), titleFormat, this.language));\n\n      this.picker.find(\".datepicker-days thead th:eq(1)\").text(\"\".concat(dates[this.language].months[month], \" \").concat(year));\n      this.picker.find(\".datepicker-hours thead th:eq(1)\").text(\"\".concat(dayMonth, \" \").concat(dates[this.language].months[month], \" \").concat(year));\n      this.picker.find(\".datepicker-minutes thead th:eq(1)\").text(\"\".concat(dayMonth, \" \").concat(dates[this.language].months[month], \" \").concat(year));\n      this.picker.find(\"tfoot th.today\").text(dates[this.language].today).toggle(this.todayBtn !== false);\n      this.updateNavArrows();\n      this.fillMonths();\n      var prevMonth = UTCDate(year, month - 1, 28, 0, 0, 0, 0),\n          day = DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth());\n      prevMonth.setUTCDate(day);\n      prevMonth.setUTCDate(day - (prevMonth.getUTCDay() - this.weekStart + 7) % 7);\n      var nextMonth = new Date(prevMonth.valueOf());\n      nextMonth.setUTCDate(nextMonth.getUTCDate() + 42);\n      nextMonth = nextMonth.valueOf();\n      var html = [];\n      var clsName;\n\n      while (prevMonth.valueOf() < nextMonth) {\n        if (prevMonth.getUTCDay() == this.weekStart) {\n          html.push(\"<tr>\");\n\n          if (this.calendarWeeks) {\n            // adapted from https://github.com/timrwood/moment/blob/master/moment.js#L128\n            var a = new Date(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth(), prevMonth.getUTCDate() - prevMonth.getDay() + 10 - (this.weekStart && this.weekStart % 7 < 5 && 7)),\n                b = new Date(a.getFullYear(), 0, 4),\n                calWeek = ~~((a - b) / 864e5 / 7 + 1.5);\n            html.push(\"<td class=\\\"cw\\\">\".concat(calWeek, \"</td>\"));\n          }\n        }\n\n        clsName = \" \".concat(this.onRender(prevMonth), \" \");\n\n        if (prevMonth.getUTCFullYear() < year || prevMonth.getUTCFullYear() == year && prevMonth.getUTCMonth() < month) {\n          clsName += \" old\";\n        } else if (prevMonth.getUTCFullYear() > year || prevMonth.getUTCFullYear() == year && prevMonth.getUTCMonth() > month) {\n          clsName += \" new\";\n        } // Compare internal UTC date with local today, not UTC today\n\n\n        if (this.todayHighlight && prevMonth.getUTCFullYear() == today.getFullYear() && prevMonth.getUTCMonth() == today.getMonth() && prevMonth.getUTCDate() == today.getDate()) {\n          clsName += \" today\";\n        }\n\n        if (currentDate && prevMonth.valueOf() == currentDate) {\n          clsName += \" active\";\n        }\n\n        if (prevMonth.valueOf() < this.startDate || prevMonth.valueOf() > this.endDate || $.inArray(prevMonth.getUTCDay(), this.daysOfWeekDisabled) !== -1 || $.inArray(prevMonth.valueOf(), this.datesDisabled) !== -1) {\n          clsName += \" disabled\";\n        }\n\n        html.push(\"<td class=\\\"day\".concat(clsName, \"\\\">\").concat(prevMonth.getUTCDate(), \"</td>\"));\n\n        if (prevMonth.getUTCDay() == this.weekEnd) {\n          html.push(\"</tr>\");\n        }\n\n        prevMonth.setUTCDate(prevMonth.getUTCDate() + 1);\n      }\n\n      this.picker.find(\".datepicker-days tbody\").empty().append(html.join(\"\"));\n      html = [];\n\n      for (var i = 0; i < 24; i++) {\n        var actual = UTCDate(year, month, dayMonth, i);\n        clsName = \"\"; // We want the previous hour for the startDate\n\n        if (actual.valueOf() + 3600000 < this.startDate || actual.valueOf() > this.endDate) {\n          clsName += \" disabled\";\n        } else if (hours == i) {\n          clsName += \" active\";\n        }\n\n        html.push(\"<span class=\\\"hour\".concat(clsName, \"\\\">\").concat(i, \":00</span>\"));\n      }\n\n      this.picker.find(\".datepicker-hours td\").html(html.join(\"\"));\n      html = [];\n\n      for (var i = 0; i < 60; i += this.minuteStep) {\n        var actual = UTCDate(year, month, dayMonth, hours, i);\n        clsName = \"\";\n\n        if (actual.valueOf() < this.startDate || actual.valueOf() > this.endDate) {\n          clsName += \" disabled\";\n        } else if (Math.floor(minutes / this.minuteStep) == Math.floor(i / this.minuteStep)) {\n          clsName += \" active\";\n        }\n\n        html.push(\"<span class=\\\"minute\".concat(clsName, \"\\\">\").concat(hours, \":\").concat(i < 10 ? \"0\".concat(i) : i, \"</span>\"));\n      }\n\n      this.picker.find(\".datepicker-minutes td\").html(html.join(\"\"));\n      var currentYear = this.date && this.date.getUTCFullYear();\n      var months = this.picker.find(\".datepicker-months\").find(\"th:eq(1)\").text(year).end().find(\"span\").removeClass(\"active\");\n\n      if (currentYear && currentYear == year) {\n        months.eq(this.date.getUTCMonth()).addClass(\"active\");\n      }\n\n      if (year < startYear || year > endYear) {\n        months.addClass(\"disabled\");\n      }\n\n      if (year == startYear) {\n        months.slice(0, startMonth).addClass(\"disabled\");\n      }\n\n      if (year == endYear) {\n        months.slice(endMonth + 1).addClass(\"disabled\");\n      }\n\n      html = \"\";\n      year = parseInt(year / 10, 10) * 10;\n      var yearCont = this.picker.find(\".datepicker-years\").find(\"th:eq(1)\").text(\"\".concat(year, \"-\").concat(year + 9)).end().find(\"td\");\n      year -= 1;\n\n      for (var i = -1; i < 11; i++) {\n        html += \"<span class=\\\"year\".concat(i == -1 || i == 10 ? \" old\" : \"\").concat(currentYear == year ? \" active\" : \"\").concat(year < startYear || year > endYear ? \" disabled\" : \"\", \"\\\">\").concat(year, \"</span>\");\n        year += 1;\n      }\n\n      yearCont.html(html);\n    },\n    updateNavArrows: function updateNavArrows() {\n      var d = new Date(this.viewDate),\n          year = d.getUTCFullYear(),\n          month = d.getUTCMonth(),\n          day = d.getUTCDate(),\n          hour = d.getUTCHours();\n\n      switch (this.viewMode) {\n        case 0:\n          if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear() && month <= this.startDate.getUTCMonth() && day <= this.startDate.getUTCDate() && hour <= this.startDate.getUTCHours()) {\n            this.picker.find(\".prev\").css({\n              visibility: \"hidden\"\n            });\n          } else {\n            this.picker.find(\".prev\").css({\n              visibility: \"visible\"\n            });\n          }\n\n          if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear() && month >= this.endDate.getUTCMonth() && day >= this.endDate.getUTCDate() && hour >= this.endDate.getUTCHours()) {\n            this.picker.find(\".next\").css({\n              visibility: \"hidden\"\n            });\n          } else {\n            this.picker.find(\".next\").css({\n              visibility: \"visible\"\n            });\n          }\n\n          break;\n\n        case 1:\n          if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear() && month <= this.startDate.getUTCMonth() && day <= this.startDate.getUTCDate()) {\n            this.picker.find(\".prev\").css({\n              visibility: \"hidden\"\n            });\n          } else {\n            this.picker.find(\".prev\").css({\n              visibility: \"visible\"\n            });\n          }\n\n          if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear() && month >= this.endDate.getUTCMonth() && day >= this.endDate.getUTCDate()) {\n            this.picker.find(\".next\").css({\n              visibility: \"hidden\"\n            });\n          } else {\n            this.picker.find(\".next\").css({\n              visibility: \"visible\"\n            });\n          }\n\n          break;\n\n        case 2:\n          if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear() && month <= this.startDate.getUTCMonth()) {\n            this.picker.find(\".prev\").css({\n              visibility: \"hidden\"\n            });\n          } else {\n            this.picker.find(\".prev\").css({\n              visibility: \"visible\"\n            });\n          }\n\n          if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear() && month >= this.endDate.getUTCMonth()) {\n            this.picker.find(\".next\").css({\n              visibility: \"hidden\"\n            });\n          } else {\n            this.picker.find(\".next\").css({\n              visibility: \"visible\"\n            });\n          }\n\n          break;\n\n        case 3:\n        case 4:\n          if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear()) {\n            this.picker.find(\".prev\").css({\n              visibility: \"hidden\"\n            });\n          } else {\n            this.picker.find(\".prev\").css({\n              visibility: \"visible\"\n            });\n          }\n\n          if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear()) {\n            this.picker.find(\".next\").css({\n              visibility: \"hidden\"\n            });\n          } else {\n            this.picker.find(\".next\").css({\n              visibility: \"visible\"\n            });\n          }\n\n          break;\n      }\n    },\n    click: function click(e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      if ($(e.target).hasClass(\"datepicker-close\") || $(e.target).parent().hasClass(\"datepicker-close\")) {\n        this.hide();\n      }\n\n      var target = $(e.target).closest(\"span, td, th\");\n\n      if (target.length == 1) {\n        if (target.is(\".disabled\")) {\n          this.element.trigger({\n            type: \"outOfRange\",\n            date: this.viewDate,\n            startDate: this.startDate,\n            endDate: this.endDate\n          });\n          return;\n        }\n\n        switch (target[0].nodeName.toLowerCase()) {\n          case \"th\":\n            switch (target[0].className) {\n              case \"date-switch\":\n                this.showMode(1);\n                break;\n\n              case \"prev\":\n              case \"next\":\n                var dir = DPGlobal.modes[this.viewMode].navStep * (target[0].className == \"prev\" ? -1 : 1);\n\n                switch (this.viewMode) {\n                  case 0:\n                    this.viewDate = this.moveHour(this.viewDate, dir);\n                    break;\n\n                  case 1:\n                    this.viewDate = this.moveDate(this.viewDate, dir);\n                    break;\n\n                  case 2:\n                    this.viewDate = this.moveMonth(this.viewDate, dir);\n                    break;\n\n                  case 3:\n                  case 4:\n                    this.viewDate = this.moveYear(this.viewDate, dir);\n                    break;\n                }\n\n                this.fill();\n                break;\n\n              case \"today\":\n                var date = new Date();\n                date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds());\n                this.viewMode = this.startViewMode;\n                this.showMode(0);\n\n                this._setDate(date);\n\n                break;\n            }\n\n            break;\n\n          case \"span\":\n            if (!target.is(\".disabled\")) {\n              if (target.is(\".month\")) {\n                if (this.minView === 3) {\n                  var month = target.parent().find(\"span\").index(target) || 0;\n                  var year = this.viewDate.getUTCFullYear(),\n                      day = 1,\n                      hours = this.viewDate.getUTCHours(),\n                      minutes = this.viewDate.getUTCMinutes(),\n                      seconds = this.viewDate.getUTCSeconds();\n\n                  this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n                } else {\n                  this.viewDate.setUTCDate(1);\n                  var month = target.parent().find(\"span\").index(target);\n                  this.viewDate.setUTCMonth(month);\n                  this.element.trigger({\n                    type: \"changeMonth\",\n                    date: this.viewDate\n                  });\n                }\n              } else if (target.is(\".year\")) {\n                if (this.minView === 4) {\n                  var year = parseInt(target.text(), 10) || 0;\n                  var month = 0,\n                      day = 1,\n                      hours = this.viewDate.getUTCHours(),\n                      minutes = this.viewDate.getUTCMinutes(),\n                      seconds = this.viewDate.getUTCSeconds();\n\n                  this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n                } else {\n                  this.viewDate.setUTCDate(1);\n                  var year = parseInt(target.text(), 10) || 0;\n                  this.viewDate.setUTCFullYear(year);\n                  this.element.trigger({\n                    type: \"changeYear\",\n                    date: this.viewDate\n                  });\n                }\n              } else if (target.is(\".hour\")) {\n                var hours = parseInt(target.text(), 10) || 0;\n                var year = this.viewDate.getUTCFullYear(),\n                    month = this.viewDate.getUTCMonth(),\n                    day = this.viewDate.getUTCDate(),\n                    minutes = this.viewDate.getUTCMinutes(),\n                    seconds = this.viewDate.getUTCSeconds();\n\n                this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n              } else if (target.is(\".minute\")) {\n                var minutes = parseInt(target.text().substr(target.text().indexOf(\":\") + 1), 10) || 0;\n                var year = this.viewDate.getUTCFullYear(),\n                    month = this.viewDate.getUTCMonth(),\n                    day = this.viewDate.getUTCDate(),\n                    hours = this.viewDate.getUTCHours(),\n                    seconds = this.viewDate.getUTCSeconds();\n\n                this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n              }\n\n              if (this.viewMode != 0) {\n                var oldViewMode = this.viewMode;\n                this.showMode(-1);\n                this.fill();\n\n                if (oldViewMode == this.viewMode && this.autoclose) {\n                  this.hide();\n                }\n              } else {\n                this.fill();\n\n                if (this.autoclose) {\n                  this.hide();\n                }\n              }\n            }\n\n            break;\n\n          case \"td\":\n            if (target.is(\".day\") && !target.is(\".disabled\")) {\n              var day = parseInt(target.text(), 10) || 1;\n              var year = this.viewDate.getUTCFullYear(),\n                  month = this.viewDate.getUTCMonth(),\n                  hours = this.viewDate.getUTCHours(),\n                  minutes = this.viewDate.getUTCMinutes(),\n                  seconds = this.viewDate.getUTCSeconds();\n\n              if (target.is(\".old\")) {\n                if (month === 0) {\n                  month = 11;\n                  year -= 1;\n                } else {\n                  month -= 1;\n                }\n              } else if (target.is(\".new\")) {\n                if (month == 11) {\n                  month = 0;\n                  year += 1;\n                } else {\n                  month += 1;\n                }\n              }\n\n              this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n            }\n\n            var oldViewMode = this.viewMode;\n            this.showMode(-1);\n            this.fill();\n\n            if (oldViewMode == this.viewMode && this.autoclose) {\n              this.hide();\n            }\n\n            break;\n        }\n      }\n    },\n    _setDate: function _setDate(date, which) {\n      if (!which || which == \"date\") {\n        this.date = date;\n      }\n\n      if (!which || which == \"view\") {\n        this.viewDate = date;\n      }\n\n      this.fill();\n      this.setValue();\n      this.element.trigger({\n        type: \"changeDate\",\n        date: this.date\n      });\n      var element;\n\n      if (this.isInput) {\n        element = this.element;\n      } else if (this.component) {\n        element = this.element.find(\"input\");\n      }\n\n      if (element) {\n        element.change();\n\n        if (this.autoclose && (!which || which == \"date\")) {// this.hide();\n        }\n      }\n    },\n    moveHour: function moveHour(date, dir) {\n      if (!dir) {\n        return date;\n      }\n\n      var new_date = new Date(date.valueOf());\n      dir = dir > 0 ? 1 : -1;\n      new_date.setUTCHours(new_date.getUTCHours() + dir);\n      return new_date;\n    },\n    moveDate: function moveDate(date, dir) {\n      if (!dir) {\n        return date;\n      }\n\n      var new_date = new Date(date.valueOf());\n      dir = dir > 0 ? 1 : -1;\n      new_date.setUTCDate(new_date.getUTCDate() + dir);\n      return new_date;\n    },\n    moveMonth: function moveMonth(date, dir) {\n      if (!dir) {\n        return date;\n      }\n\n      var new_date = new Date(date.valueOf()),\n          day = new_date.getUTCDate(),\n          month = new_date.getUTCMonth(),\n          mag = Math.abs(dir),\n          new_month,\n          test;\n      dir = dir > 0 ? 1 : -1;\n\n      if (mag == 1) {\n        test = dir == -1 // If going back one month, make sure month is not current month\n        // (eg, Mar 31 -> Feb 31 == Feb 28, not Mar 02)\n        ? function () {\n          return new_date.getUTCMonth() == month;\n        } // If going forward one month, make sure month is as expected\n        // (eg, Jan 31 -> Feb 31 == Feb 28, not Mar 02)\n        : function () {\n          return new_date.getUTCMonth() != new_month;\n        };\n        new_month = month + dir;\n        new_date.setUTCMonth(new_month); // Dec -> Jan (12) or Jan -> Dec (-1) -- limit expected date to 0-11\n\n        if (new_month < 0 || new_month > 11) {\n          new_month = (new_month + 12) % 12;\n        }\n      } else {\n        // For magnitudes >1, move one month at a time...\n        for (var i = 0; i < mag; i++) // ...which might decrease the day (eg, Jan 31 to Feb 28, etc)...\n        {\n          new_date = this.moveMonth(new_date, dir);\n        } // ...then reset the day, keeping it in the new month\n\n\n        new_month = new_date.getUTCMonth();\n        new_date.setUTCDate(day);\n\n        test = function test() {\n          return new_month != new_date.getUTCMonth();\n        };\n      } // Common date-resetting loop -- if date is beyond end of month, make it\n      // end of month\n\n\n      while (test()) {\n        new_date.setUTCDate(--day);\n        new_date.setUTCMonth(new_month);\n      }\n\n      return new_date;\n    },\n    moveYear: function moveYear(date, dir) {\n      return this.moveMonth(date, dir * 12);\n    },\n    dateWithinRange: function dateWithinRange(date) {\n      return date >= this.startDate && date <= this.endDate;\n    },\n    keydown: function keydown(e) {\n      if (!this.keyboardNavigation) {\n        return true;\n      }\n\n      if (this.picker.is(\":not(:visible)\")) {\n        if (e.keyCode == 27) // allow escape to hide and re-show picker\n          {\n            this.show();\n          }\n\n        return;\n      }\n\n      var dateChanged = false,\n          day,\n          dir,\n          month,\n          newDate,\n          newViewDate;\n\n      switch (e.keyCode) {\n        case 27:\n          // escape\n          this.hide();\n          e.preventDefault();\n          break;\n\n        case 37: // left\n\n        case 39:\n          // right\n          if (!this.keyboardNavigation) {\n            break;\n          }\n\n          dir = e.keyCode == 37 ? -1 : 1;\n\n          if (e.ctrlKey) {\n            newDate = this.moveYear(this.date, dir);\n            newViewDate = this.moveYear(this.viewDate, dir);\n          } else if (e.shiftKey) {\n            newDate = this.moveMonth(this.date, dir);\n            newViewDate = this.moveMonth(this.viewDate, dir);\n          } else {\n            newDate = new Date(this.date.valueOf());\n            newDate.setUTCDate(this.date.getUTCDate() + dir);\n            newViewDate = new Date(this.viewDate.valueOf());\n            newViewDate.setUTCDate(this.viewDate.getUTCDate() + dir);\n          }\n\n          if (this.dateWithinRange(newDate)) {\n            this.date = newDate;\n            this.viewDate = newViewDate;\n            this.setValue();\n            this.update();\n            e.preventDefault();\n            dateChanged = true;\n          }\n\n          break;\n\n        case 38: // up\n\n        case 40:\n          // down\n          if (!this.keyboardNavigation) {\n            break;\n          }\n\n          dir = e.keyCode == 38 ? -1 : 1;\n\n          if (e.ctrlKey) {\n            newDate = this.moveYear(this.date, dir);\n            newViewDate = this.moveYear(this.viewDate, dir);\n          } else if (e.shiftKey) {\n            newDate = this.moveMonth(this.date, dir);\n            newViewDate = this.moveMonth(this.viewDate, dir);\n          } else {\n            newDate = new Date(this.date.valueOf());\n            newDate.setUTCDate(this.date.getUTCDate() + dir * 7);\n            newViewDate = new Date(this.viewDate.valueOf());\n            newViewDate.setUTCDate(this.viewDate.getUTCDate() + dir * 7);\n          }\n\n          if (this.dateWithinRange(newDate)) {\n            this.date = newDate;\n            this.viewDate = newViewDate;\n            this.setValue();\n            this.update();\n            e.preventDefault();\n            dateChanged = true;\n          }\n\n          break;\n\n        case 13:\n          // enter\n          this.hide();\n          e.preventDefault();\n          break;\n\n        case 9:\n          // tab\n          this.hide();\n          break;\n      }\n\n      if (dateChanged) {\n        this.element.trigger({\n          type: \"changeDate\",\n          date: this.date\n        });\n        var element;\n\n        if (this.isInput) {\n          element = this.element;\n        } else if (this.component) {\n          element = this.element.find(\"input\");\n        }\n\n        if (element) {\n          element.change();\n        }\n      }\n    },\n    showMode: function showMode(dir) {\n      if (dir) {\n        var newViewMode = Math.max(0, Math.min(DPGlobal.modes.length - 1, this.viewMode + dir));\n\n        if (newViewMode >= this.minView && newViewMode <= this.maxView) {\n          this.viewMode = newViewMode;\n        }\n      }\n      /*\n                vitalets: fixing bug of very special conditions:\n                jquery 1.7.1 + webkit + show inline datepicker in bootstrap popover.\n                Method show() does not set display css correctly and datepicker is not shown.\n                Changed to .css('display', 'block') solve the problem.\n                See https://github.com/vitalets/x-editable/issues/37\n                 In jquery 1.7.2+ everything works fine.\n            */\n      // this.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).show();\n\n\n      this.picker.find(\">div\").hide().filter(\".datepicker-\".concat(DPGlobal.modes[this.viewMode].clsName)).css(\"display\", \"block\");\n      this.updateNavArrows();\n    },\n    changeViewDate: function changeViewDate(date) {\n      this.date = date;\n      this.viewDate = date;\n      this.fill();\n    },\n    reset: function reset(e) {\n      this._setDate(null, \"date\");\n    }\n  };\n\n  $.fn.fdatepicker = function (option) {\n    var args = Array.apply(void 0, arguments);\n    args.shift();\n    return this.each(function () {\n      var $this = $(this),\n          data = $this.data(\"datepicker\"),\n          options = _typeof(option) === \"object\" && option;\n\n      if (!data) {\n        $this.data(\"datepicker\", data = new Datepicker(this, $.extend({}, $.fn.fdatepicker.defaults, options)));\n      }\n\n      if (typeof option === \"string\" && typeof data[option] === \"function\") {\n        var _data;\n\n        (_data = data)[option].apply(_data, _toConsumableArray(args));\n      }\n    });\n  };\n\n  $.fn.fdatepicker.defaults = {\n    onRender: function onRender(date) {\n      return \"\";\n    }\n  };\n  $.fn.fdatepicker.Constructor = Datepicker;\n  var dates = $.fn.fdatepicker.dates = {\n    \"en\": {\n      days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\n      daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\n      daysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\n      months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n      monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n      today: \"Today\",\n      titleFormat: \"MM yyyy\"\n    }\n  };\n  var DPGlobal = {\n    modes: [{\n      clsName: \"minutes\",\n      navFnc: \"Hours\",\n      navStep: 1\n    }, {\n      clsName: \"hours\",\n      navFnc: \"Date\",\n      navStep: 1\n    }, {\n      clsName: \"days\",\n      navFnc: \"Month\",\n      navStep: 1\n    }, {\n      clsName: \"months\",\n      navFnc: \"FullYear\",\n      navStep: 1\n    }, {\n      clsName: \"years\",\n      navFnc: \"FullYear\",\n      navStep: 10\n    }],\n    isLeapYear: function isLeapYear(year) {\n      return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n    },\n    getDaysInMonth: function getDaysInMonth(year, month) {\n      return [31, DPGlobal.isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n    },\n    validParts: /hh?|ii?|ss?|dd?|mm?|MM?|yy(?:yy)?/g,\n    nonpunctuation: /[^ -\\/:-@\\[\\u3400-\\u9fff-`{-~\\t\\n\\r]+/g,\n    parseFormat: function parseFormat(format) {\n      // IE treats \\0 as a string end in inputs (truncating the value),\n      // so it's a bad format delimiter, anyway\n      var separators = format.replace(this.validParts, \"\\0\").split(\"\\0\"),\n          parts = format.match(this.validParts);\n\n      if (!separators || !separators.length || !parts || parts.length === 0) {\n        throw new Error(\"Invalid date format.\");\n      }\n\n      this.formatText = format;\n      return {\n        separators: separators,\n        parts: parts\n      };\n    },\n    parseDate: function parseDate(date, format, language) {\n      if (date instanceof Date) {\n        return new Date(date.valueOf() - date.getTimezoneOffset() * 60000);\n      }\n\n      if (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}$/.test(date)) {\n        format = this.parseFormat(\"yyyy-mm-dd\");\n      }\n\n      if (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}[T ]\\d{1,2}\\:\\d{1,2}$/.test(date)) {\n        format = this.parseFormat(\"yyyy-mm-dd hh:ii\");\n      }\n\n      if (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}[T ]\\d{1,2}\\:\\d{1,2}\\:\\d{1,2}[Z]{0,1}$/.test(date)) {\n        format = this.parseFormat(\"yyyy-mm-dd hh:ii:ss\");\n      }\n\n      if (/^[-+]\\d+[dmwy]([\\s,]+[-+]\\d+[dmwy])*$/.test(date)) {\n        var part_re = /([-+]\\d+)([dmwy])/,\n            parts = date.match(/([-+]\\d+)([dmwy])/g),\n            part,\n            dir;\n        date = new Date();\n\n        for (var i = 0; i < parts.length; i++) {\n          part = part_re.exec(parts[i]);\n          dir = parseInt(part[1]);\n\n          switch (part[2]) {\n            case \"d\":\n              date.setUTCDate(date.getUTCDate() + dir);\n              break;\n\n            case \"m\":\n              date = Datetimepicker.prototype.moveMonth.call(Datetimepicker.prototype, date, dir);\n              break;\n\n            case \"w\":\n              date.setUTCDate(date.getUTCDate() + dir * 7);\n              break;\n\n            case \"y\":\n              date = Datetimepicker.prototype.moveYear.call(Datetimepicker.prototype, date, dir);\n              break;\n          }\n        }\n\n        return UTCDate(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\n      }\n\n      var parts = date && date.match(this.nonpunctuation) || [],\n          date = new Date(),\n          parsed = {},\n          setters_order = [\"hh\", \"h\", \"ii\", \"i\", \"ss\", \"s\", \"yyyy\", \"yy\", \"M\", \"MM\", \"m\", \"mm\", \"d\", \"dd\"],\n          setters_map = {\n        hh: function hh(d, v) {\n          return d.setUTCHours(v);\n        },\n        h: function h(d, v) {\n          return d.setUTCHours(v);\n        },\n        ii: function ii(d, v) {\n          return d.setUTCMinutes(v);\n        },\n        i: function i(d, v) {\n          return d.setUTCMinutes(v);\n        },\n        ss: function ss(d, v) {\n          return d.setUTCSeconds(v);\n        },\n        s: function s(d, v) {\n          return d.setUTCSeconds(v);\n        },\n        yyyy: function yyyy(d, v) {\n          return d.setUTCFullYear(v);\n        },\n        yy: function yy(d, v) {\n          return d.setUTCFullYear(2000 + v);\n        },\n        m: function m(d, v) {\n          v -= 1;\n\n          while (v < 0) {\n            v += 12;\n          }\n\n          v %= 12;\n          d.setUTCMonth(v);\n\n          while (d.getUTCMonth() != v) {\n            d.setUTCDate(d.getUTCDate() - 1);\n          }\n\n          return d;\n        },\n        d: function d(_d, v) {\n          return _d.setUTCDate(v);\n        }\n      },\n          val,\n          filtered,\n          part;\n      setters_map.M = setters_map.MM = setters_map.mm = setters_map.m;\n      setters_map.dd = setters_map.d;\n      date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0); // date.getHours(), date.getMinutes(), date.getSeconds());\n\n      if (parts.length == format.parts.length) {\n        for (var i = 0, cnt = format.parts.length; i < cnt; i++) {\n          val = parseInt(parts[i], 10);\n          part = format.parts[i];\n\n          if (isNaN(val)) {\n            switch (part) {\n              case \"MM\":\n                filtered = $(dates[language].months).filter(function () {\n                  var m = this.slice(0, parts[i].length),\n                      p = parts[i].slice(0, m.length);\n                  return m == p;\n                });\n                val = $.inArray(filtered[0], dates[language].months) + 1;\n                break;\n\n              case \"M\":\n                filtered = $(dates[language].monthsShort).filter(function () {\n                  var m = this.slice(0, parts[i].length),\n                      p = parts[i].slice(0, m.length);\n                  return m == p;\n                });\n                val = $.inArray(filtered[0], dates[language].monthsShort) + 1;\n                break;\n            }\n          }\n\n          parsed[part] = val;\n        }\n\n        for (var i = 0, s; i < setters_order.length; i++) {\n          s = setters_order[i];\n\n          if (s in parsed && !isNaN(parsed[s])) {\n            setters_map[s](date, parsed[s]);\n          }\n        }\n      }\n\n      return date;\n    },\n    formatDate: function formatDate(date, format, language) {\n      if (date == null) {\n        return \"\";\n      }\n\n      var val = {\n        h: date.getUTCHours(),\n        i: date.getUTCMinutes(),\n        s: date.getUTCSeconds(),\n        d: date.getUTCDate(),\n        m: date.getUTCMonth() + 1,\n        M: dates[language].monthsShort[date.getUTCMonth()],\n        MM: dates[language].months[date.getUTCMonth()],\n        yy: date.getUTCFullYear().toString().substring(2),\n        yyyy: date.getUTCFullYear()\n      };\n      val.hh = (val.h < 10 ? \"0\" : \"\") + val.h;\n      val.ii = (val.i < 10 ? \"0\" : \"\") + val.i;\n      val.ss = (val.s < 10 ? \"0\" : \"\") + val.s;\n      val.dd = (val.d < 10 ? \"0\" : \"\") + val.d;\n      val.mm = (val.m < 10 ? \"0\" : \"\") + val.m;\n      var date = [],\n          seps = $.extend([], format.separators);\n\n      for (var i = 0, cnt = format.parts.length; i < cnt; i++) {\n        if (seps.length) {\n          date.push(seps.shift());\n        }\n\n        date.push(val[format.parts[i]]);\n      }\n\n      return date.join(\"\");\n    },\n    convertViewMode: function convertViewMode(viewMode) {\n      switch (viewMode) {\n        case 4:\n        case \"decade\":\n          viewMode = 4;\n          break;\n\n        case 3:\n        case \"year\":\n          viewMode = 3;\n          break;\n\n        case 2:\n        case \"month\":\n          viewMode = 2;\n          break;\n\n        case 1:\n        case \"day\":\n          viewMode = 1;\n          break;\n\n        case 0:\n        case \"hour\":\n          viewMode = 0;\n          break;\n      }\n\n      return viewMode;\n    },\n    headTemplate: function headTemplate(leftArrow, rightArrow) {\n      return \"\".concat(\"<thead>\" + \"<tr>\" + '<th class=\"prev\">').concat(leftArrow, \"</th>\") + \"<th colspan=\\\"5\\\" class=\\\"date-switch\\\"></th>\" + \"<th class=\\\"next\\\">\".concat(rightArrow, \"</th>\") + \"</tr>\" + \"</thead>\";\n    },\n    contTemplate: '<tbody><tr><td colspan=\"7\"></td></tr></tbody>',\n    footTemplate: '<tfoot><tr><th colspan=\"7\" class=\"today\"></th></tr></tfoot>'\n  };\n\n  DPGlobal.template = function (leftArrow, rightArrow, closeIcon) {\n    return \"\".concat('<div class=\"datepicker\">' + '<div class=\"datepicker-minutes\">' + '<table class=\" table-condensed\">').concat(DPGlobal.headTemplate(leftArrow, rightArrow)).concat(DPGlobal.contTemplate).concat(DPGlobal.footTemplate, \"</table>\") + \"</div>\" + \"<div class=\\\"datepicker-hours\\\">\" + \"<table class=\\\" table-condensed\\\">\".concat(DPGlobal.headTemplate(leftArrow, rightArrow)).concat(DPGlobal.contTemplate).concat(DPGlobal.footTemplate, \"</table>\") + \"</div>\" + \"<div class=\\\"datepicker-days\\\">\" + \"<table class=\\\" table-condensed\\\">\".concat(DPGlobal.headTemplate(leftArrow, rightArrow), \"<tbody></tbody>\").concat(DPGlobal.footTemplate, \"</table>\") + \"</div>\" + \"<div class=\\\"datepicker-months\\\">\" + \"<table class=\\\"table-condensed\\\">\".concat(DPGlobal.headTemplate(leftArrow, rightArrow)).concat(DPGlobal.contTemplate).concat(DPGlobal.footTemplate, \"</table>\") + \"</div>\" + \"<div class=\\\"datepicker-years\\\">\" + \"<table class=\\\"table-condensed\\\">\".concat(DPGlobal.headTemplate(leftArrow, rightArrow)).concat(DPGlobal.contTemplate).concat(DPGlobal.footTemplate, \"</table>\") + \"</div>\" + \"<a class=\\\"button datepicker-close tiny alert right\\\" style=\\\"width:auto;\\\">\".concat(closeIcon, \"</a>\") + \"</div>\";\n  };\n\n  $.fn.fdatepicker.DPGlobal = DPGlobal;\n}(window.jQuery);","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;AAEA,CAAE,UAASA,CAAT,EAAY;AAEZ,WAASC,OAAT,GAAmB;AACjB,WAAO,IAAIC,IAAJ,CAASA,IAAI,CAACC,GAALD,aAAYE,SAAZF,CAAT,CAAP;AACD;;AAED,WAASG,QAAT,GAAoB;AAClB,QAAIC,KAAK,GAAG,IAAIJ,IAAJ,EAAZ;AACA,WAAOD,OAAO,CAACK,KAAK,CAACC,cAAND,EAAD,EAAyBA,KAAK,CAACE,WAANF,EAAzB,EAA8CA,KAAK,CAACG,UAANH,EAA9C,CAAd;AACD;;AAED,MAAII,UAAU,GAAG,SAAbA,UAAa,CAASC,OAAT,EAAkBC,OAAlB,EAA2B;AAC1C,QAAIC,IAAI,GAAG,IAAX;AAEA,SAAKF,OAAL,GAAeX,CAAC,CAACW,OAAD,CAAhB;AACA,SAAKG,QAAL,GAAiBF,OAAO,CAACE,QAARF,IAAoBG,SAApBH,GAAgC,IAAhCA,GAAuCA,OAAO,CAACE,QAAhE;AACA,SAAKE,QAAL,GAAgBJ,OAAO,CAACI,QAARJ,IAAoB,MAApC;AACA,SAAKK,WAAL,GAAmBL,OAAO,CAACK,WAA3B;AACA,SAAKC,QAAL,GAAgBN,OAAO,CAACM,QAARN,IAAoB,KAAKD,OAAL,CAAaQ,IAAb,CAAkB,eAAlB,CAApBP,IAA0D,IAA1E;AACA,SAAKM,QAAL,GAAgB,KAAKA,QAAL,IAAiBE,KAAjB,GAAyB,KAAKF,QAA9B,GAAyC,KAAKA,QAAL,CAAcG,KAAd,CAAoB,GAApB,EAAyB,CAAzB,CAAzD,CAR0C,CAQ4C;;AACtF,SAAKH,QAAL,GAAgB,KAAKA,QAAL,IAAiBE,KAAjB,GAAyB,KAAKF,QAA9B,GAAyC,IAAzD;AACA,SAAKI,KAAL,GAAaF,KAAK,CAAC,KAAKF,QAAN,CAALE,CAAqBG,GAArBH,IAA4B,KAAzC;AACA,SAAKI,MAAL,GAAcC,QAAQ,CAACC,WAATD,CAAqBb,OAAO,CAACY,MAARZ,IAAkB,KAAKD,OAAL,CAAaQ,IAAb,CAAkB,aAAlB,CAAlBP,IAAsDQ,KAAK,CAAC,KAAKF,QAAN,CAALE,CAAqBI,MAA3EZ,IAAqF,YAA1Ga,CAAd;AACA,SAAKE,UAAL,GAAkBf,OAAO,CAACY,MAARZ,IAAkB,KAAKD,OAAL,CAAaQ,IAAb,CAAkB,aAAlB,CAAlBP,IAAsDQ,KAAK,CAAC,KAAKF,QAAN,CAALE,CAAqBI,MAA3EZ,IAAqF,YAAvG;AACA,SAAKgB,QAAL,GAAgB,KAAhB;AACA,SAAKC,OAAL,GAAe,KAAKlB,OAAL,CAAamB,EAAb,CAAgB,OAAhB,CAAf;AACA,SAAKC,SAAL,GAAiB,KAAKpB,OAAL,CAAamB,EAAb,CAAgB,OAAhB,IAA2B,KAAKnB,OAAL,CAAaqB,IAAb,CAAkB,mBAAlB,CAA3B,GAAoE,KAArF;AACA,SAAKC,QAAL,GAAgB,KAAKF,SAAL,IAAkB,KAAKpB,OAAL,CAAaqB,IAAb,CAAkB,OAAlB,EAA2BE,MAA7D;AACA,SAAKC,wBAAL,GAAgCvB,OAAO,CAACuB,wBAAxC;;AACA,SAAKC,QAAL,GAAgBxB,OAAO,CAACwB,QAARxB,IAAoB,YAAW,CAA/C;;AACA,QAAI,KAAKmB,SAAL,IAAkB,KAAKA,SAAL,CAAeG,MAAf,KAA0B,CAAhD,EAAmD;AACjD,WAAKH,SAAL,GAAiB,KAAjB;AACD;;AACD,SAAKM,SAAL,GAAiBzB,OAAO,CAACyB,SAARzB,IAAqB,KAAKD,OAAL,CAAaQ,IAAb,CAAkB,YAAlB,CAArBP,IAAwD,KAAzE;AACA,SAAK0B,UAAL,GAAkBb,QAAQ,CAACC,WAATD,CAAqBb,OAAO,CAAC0B,UAAR1B,IAAsB,KAAKD,OAAL,CAAaQ,IAAb,CAAkB,aAAlB,CAAtBP,IAA0D,qBAA/Ea,CAAlB;AACA,SAAKc,UAAL,GAAkB3B,OAAO,CAAC2B,UAAR3B,IAAsB,KAAKD,OAAL,CAAaQ,IAAb,CAAkB,aAAlB,CAAtBP,IAA0D,CAA5E;AACA,SAAK4B,cAAL,GAAsB5B,OAAO,CAAC4B,cAAR5B,IAA0B,KAAKD,OAAL,CAAaQ,IAAb,CAAkB,iBAAlB,CAA1BP,IAAkE,cAAxF;AACA,SAAK6B,WAAL,GAAmB7B,OAAO,CAAC6B,WAAR7B,IAAuB,IAA1C;AACA,SAAK8B,WAAL,GAAmB9B,OAAO,CAAC8B,WAAR9B,IAAuB,IAA1C;AACA,SAAK+B,SAAL,GAAiB/B,OAAO,CAAC+B,SAAR/B,yBAAkC,KAAK8B,WAAvC,cAAsD,KAAKA,WAA3D,oCAAjB;AACA,SAAKE,UAAL,GAAkBhC,OAAO,CAACgC,UAARhC,yBAAmC,KAAK8B,WAAxC,cAAuD,KAAKA,WAA5D,sCAAlB;AACA,SAAKG,SAAL,GAAiBjC,OAAO,CAACiC,SAARjC,yBAAkC,KAAK8B,WAAvC,cAAsD,KAAKA,WAA3D,qBAAiF,KAAKA,WAAtF,uBAAjB;AAGA,SAAKI,OAAL,GAAe,CAAf;;AACA,QAAI,aAAalC,OAAjB,EAA0B;AACxB,WAAKkC,OAAL,GAAelC,OAAO,CAACkC,OAAvB;AADF,WAEO,IAAI,aAAa,KAAKnC,OAAL,CAAaQ,IAAb,EAAjB,EAAsC;AAC3C,WAAK2B,OAAL,GAAe,KAAKnC,OAAL,CAAaQ,IAAb,CAAkB,UAAlB,CAAf;AACD;;AACD,SAAK2B,OAAL,GAAerB,QAAQ,CAACsB,eAATtB,CAAyB,KAAKqB,OAA9BrB,CAAf;AAEA,SAAKuB,OAAL,GAAevB,QAAQ,CAACwB,KAATxB,CAAeS,MAAfT,GAAwB,CAAvC;;AACA,QAAI,aAAab,OAAjB,EAA0B;AACxB,WAAKoC,OAAL,GAAepC,OAAO,CAACoC,OAAvB;AADF,WAEO,IAAI,aAAa,KAAKrC,OAAL,CAAaQ,IAAb,EAAjB,EAAsC;AAC3C,WAAK6B,OAAL,GAAe,KAAKrC,OAAL,CAAaQ,IAAb,CAAkB,UAAlB,CAAf;AACD;;AACD,SAAK6B,OAAL,GAAevB,QAAQ,CAACsB,eAATtB,CAAyB,KAAKuB,OAA9BvB,CAAf;AAEA,SAAKyB,aAAL,GAAqB,OAArB;;AACA,QAAI,eAAetC,OAAnB,EAA4B;AAC1B,WAAKsC,aAAL,GAAqBtC,OAAO,CAACuC,SAA7B;AADF,WAEO,IAAI,eAAe,KAAKxC,OAAL,CAAaQ,IAAb,EAAnB,EAAwC;AAC7C,WAAK+B,aAAL,GAAqB,KAAKvC,OAAL,CAAaQ,IAAb,CAAkB,YAAlB,CAArB;AACD;;AACD,SAAK+B,aAAL,GAAqBzB,QAAQ,CAACsB,eAATtB,CAAyB,KAAKyB,aAA9BzB,CAArB;AACA,SAAK2B,QAAL,GAAgB,KAAKF,aAArB;;AAEA,QAAI,EAAE,aAAatC,OAAf,KAA2B,EAAE,aAAaA,OAAf,CAA3B,IAAsD,CAAE,KAAKD,OAAL,CAAaQ,IAAb,CAAkB,UAAlB,CAAxD,IAA0F,CAAE,KAAKR,OAAL,CAAaQ,IAAb,CAAkB,UAAlB,CAAhG,EAAgI;AAC9H,WAAKkC,QAAL,GAAgB,KAAhB;;AACA,UAAI,cAAczC,OAAlB,EAA2B;AACzB,aAAKyC,QAAL,GAAgBzC,OAAO,CAACyC,QAAxB;AACD;;AACD,UAAI,KAAKA,QAAL,IAAiB,IAArB,EAA2B;AACzB,aAAKP,OAAL,GAAe,CAAf;AACA,aAAKE,OAAL,GAAe,CAAf;AAFF,aAGO;AACL,aAAKF,OAAL,GAAe,CAAf;AACA,aAAKE,OAAL,GAAe,CAAf;AACD;AACF;;AAED,SAAKM,UAAL,GAAkB,IAAlB;;AACA,QAAI,gBAAgB1C,OAApB,EAA6B;AAC3B,WAAK0C,UAAL,GAAkB1C,OAAO,CAAC0C,UAA1B;AADF,WAEO,IAAI,oBAAoB,KAAK3C,OAAL,CAAaQ,IAAb,EAAxB,EAA6C;AAClD,WAAKmC,UAAL,GAAkB,KAAK3C,OAAL,CAAaQ,IAAb,CAAkB,kBAAlB,CAAlB;AACD;;AAGD,SAAKoC,MAAL,GAAcvD,CAAC,CAACyB,QAAQ,CAAC+B,QAAT/B,CAAkB,KAAKkB,SAAvBlB,EAAkC,KAAKmB,UAAvCnB,EAAmD,KAAKoB,SAAxDpB,CAAD,CAADzB,CACZgB,QADYhB,CACH,KAAK4B,QAAL,GAAgB,KAAKjB,OAArB,GAA+B,KAAKK,QADjChB,EAEZyD,EAFYzD,CAET;AACD0D,WAAK,EAAE1D,CAAC,CAAC2D,KAAF3D,CAAQ,KAAK0D,KAAb1D,EAAoB,IAApBA,CADN;AAED4D,eAAS,EAAE5D,CAAC,CAAC2D,KAAF3D,CAAQ,KAAK4D,SAAb5D,EAAwB,IAAxBA;AAFV,KAFSA,CAAd;;AAMA,QAAI,KAAKiB,WAAT,EAAsB;AACpB,WAAKsC,MAAL,CAAYvB,IAAZ,CAAiB,oBAAjB,EAAuC6B,IAAvC;AADF,WAEO;AACL,WAAKN,MAAL,CAAYvB,IAAZ,CAAiB,oBAAjB,EAAuC8B,IAAvC;AACD;;AAED,QAAI,KAAKlC,QAAT,EAAmB;AACjB,WAAK2B,MAAL,CAAYQ,QAAZ,CAAqB,mBAArB;AADF,WAEO;AACL,WAAKR,MAAL,CAAYQ,QAAZ,CAAqB,mCAArB;AACD;;AACD,QAAI,KAAKzC,KAAT,EAAgB;AACd,WAAKiC,MAAL,CAAYQ,QAAZ,CAAqB,gBAArB;AAEA,WAAKR,MAAL,CAAYvB,IAAZ,CAAiB,cAAjB,EAAiCgC,IAAjC,CAAsC,YAAW;AAC/ChE,SAAC,CAAC,IAAD,CAADA,CAAQiE,MAARjE,GAAiBkE,OAAjBlE,CAAyBA,CAAC,CAAC,IAAD,CAADA,CAAQmE,QAARnE,CAAiB,OAAjBA,CAAzBA;AACAA,SAAC,CAAC,IAAD,CAADA,CAAQiE,MAARjE,GAAiBoE,MAAjBpE,CAAwBA,CAAC,CAAC,IAAD,CAADA,CAAQmE,QAARnE,CAAiB,OAAjBA,CAAxBA;AAFF;AAIA,WAAKuD,MAAL,CAAYvB,IAAZ,CAAiB,cAAjB,EAAiCqC,WAAjC,CAA6C,WAA7C;AAED;;AACDrE,KAAC,CAACsE,QAAD,CAADtE,CAAYyD,EAAZzD,CAAe,WAAfA,EAA4B,UAASuE,CAAT,EAAY;AACtC,UAAI1D,IAAI,CAACgB,OAALhB,IAAgB0D,CAAC,CAACC,MAAFD,KAAa1D,IAAI,CAACF,OAALE,CAAa,CAAbA,CAAjC,EAAkD;AAChD;AAFoC,QAKtC;;;AACA,UAAIb,CAAC,CAACuE,CAAC,CAACC,MAAH,CAADxE,CAAYyE,OAAZzE,CAAoB,gEAApBA,EAAsFkC,MAAtFlC,KAAiG,CAArG,EAAwG;AACtGa,YAAI,CAACiD,IAALjD;AACD;AARH;AAWA,SAAK6D,SAAL,GAAiB,IAAjB;;AACA,QAAI,eAAe9D,OAAnB,EAA4B;AAC1B,WAAK8D,SAAL,GAAiB9D,OAAO,CAAC8D,SAAzB;AADF,WAEO,IAAI,mBAAmB,KAAK/D,OAAL,CAAaQ,IAAb,EAAvB,EAA4C;AACjD,WAAKuD,SAAL,GAAiB,KAAK/D,OAAL,CAAaQ,IAAb,CAAkB,gBAAlB,CAAjB;AACD;;AAED,SAAKwD,kBAAL,GAA0B,IAA1B;;AACA,QAAI,wBAAwB/D,OAA5B,EAAqC;AACnC,WAAK+D,kBAAL,GAA0B/D,OAAO,CAAC+D,kBAAlC;AADF,WAEO,IAAI,4BAA4B,KAAKhE,OAAL,CAAaQ,IAAb,EAAhC,EAAqD;AAC1D,WAAKwD,kBAAL,GAA0B,KAAKhE,OAAL,CAAaQ,IAAb,CAAkB,0BAAlB,CAA1B;AACD;;AAED,SAAKyD,QAAL,GAAiBhE,OAAO,CAACgE,QAARhE,IAAoB,KAAKD,OAAL,CAAaQ,IAAb,CAAkB,gBAAlB,CAApBP,IAA2D,KAA5E;AACA,SAAKiE,cAAL,GAAuBjE,OAAO,CAACiE,cAARjE,IAA0B,KAAKD,OAAL,CAAaQ,IAAb,CAAkB,sBAAlB,CAA1BP,IAAuE,KAA9F;AAEA,SAAKkE,aAAL,GAAqB,KAArB;;AACA,QAAI,mBAAmBlE,OAAvB,EAAgC;AAC9B,WAAKkE,aAAL,GAAqBlE,OAAO,CAACkE,aAA7B;AADF,WAEO,IAAI,uBAAuB,KAAKnE,OAAL,CAAaQ,IAAb,EAA3B,EAAgD;AACrD,WAAK2D,aAAL,GAAqB,KAAKnE,OAAL,CAAaQ,IAAb,CAAkB,qBAAlB,CAArB;AACD;;AACD,QAAI,KAAK2D,aAAT,EACA;AAAC,WAAKvB,MAAL,CAAYvB,IAAZ,CAAiB,gBAAjB,EACC+C,IADD,CACM,SADN,EACiB,UAASC,CAAT,EAAYC,GAAZ,EAAiB;AAC/B,eAAOC,QAAQ,CAACD,GAAD,CAARC,GAAgB,CAAvB;AAFH;AAGK;;AAEN,SAAKC,SAAL,GAAkB,CAACvE,OAAO,CAACuE,SAARvE,IAAqB,KAAKD,OAAL,CAAaQ,IAAb,CAAkB,gBAAlB,CAArBP,IAA4DQ,KAAK,CAAC,KAAKF,QAAN,CAALE,CAAqB+D,SAAjFvE,IAA8F,CAA/F,IAAoG,CAAtH;AACA,SAAKwE,OAAL,GAAgB,CAAC,KAAKD,SAAL,GAAiB,CAAlB,IAAuB,CAAvC;AACA,SAAKE,SAAL,GAAiB,CAACC,QAAlB;AACA,SAAKC,OAAL,GAAeD,QAAf;AACA,SAAKE,kBAAL,GAA0B,EAA1B;AACA,SAAKC,aAAL,GAAqB,EAArB;AACA,SAAKC,YAAL,CAAkB9E,OAAO,CAACyE,SAARzE,IAAqB,KAAKD,OAAL,CAAaQ,IAAb,CAAkB,gBAAlB,CAAvC;AACA,SAAKwE,UAAL,CAAgB/E,OAAO,CAAC2E,OAAR3E,IAAmB,KAAKD,OAAL,CAAaQ,IAAb,CAAkB,cAAlB,CAAnC;AACA,SAAKyE,qBAAL,CAA2BhF,OAAO,CAAC4E,kBAAR5E,IAA8B,KAAKD,OAAL,CAAaQ,IAAb,CAAkB,4BAAlB,CAAzD;AACA,SAAK0E,gBAAL,CAAsBjF,OAAO,CAAC6E,aAAR7E,IAAyB,KAAKD,OAAL,CAAaQ,IAAb,CAAkB,gBAAlB,CAA/C;;AAEA,QAAI,KAAKsB,WAAL,IAAoB,IAAxB,EAA8B;AAC5B,WAAKqD,IAAL,GAAY,KAAKC,QAAL,GAAgBtE,QAAQ,CAACuE,SAATvE,CAAmB,KAAKgB,WAAxBhB,EAAqC,KAAKD,MAA1CC,EAAkD,KAAKP,QAAvDO,CAA5B;AACA,WAAKwE,QAAL;AACD;;AAED,SAAKC,OAAL;AACA,SAAKC,UAAL;AACA,SAAKC,MAAL;AAEA,SAAKC,QAAL;;AAEA,QAAI,KAAKzE,QAAT,EAAmB;AACjB,WAAKiC,IAAL;AACD;;AAED,SAAKyC,aAAL;AA7KF;;AAgLA5F,YAAU,CAAC6F,SAAX7F,GAAuB;AACrB8F,eAAW,EAAE9F,UADQ;AAGrB+F,WAAO,EAAE,EAHY;AAIrBH,iBAAa,EAAE,yBAAW;AACxB,WAAKI,aAAL;;AACA,UAAI,KAAK7E,OAAT,EAAkB;AAAE;AAClB,YAAI,CAAC,KAAK8C,kBAAV,EAA8B;AAC5B,eAAK8B,OAAL,GAAe,CACb,CAAC,KAAK9F,OAAN,EAAe;AACbgG,iBAAK,EAAG,KAAK7F,QAAL,GAAiBd,CAAC,CAAC2D,KAAF3D,CAAQ,KAAK6D,IAAb7D,EAAmB,IAAnBA,CAAjB,GAA4C,YAAW,CAAE;AADpD,WAAf,CADa,CAAf;AADF,eAMO;AACL,eAAKyG,OAAL,GAAe,CACb,CAAC,KAAK9F,OAAN,EAAe;AACbgG,iBAAK,EAAG,KAAK7F,QAAL,GAAiBd,CAAC,CAAC2D,KAAF3D,CAAQ,KAAK6D,IAAb7D,EAAmB,IAAnBA,CAAjB,GAA4C,YAAW,CADlD;AAEb4G,iBAAK,EAAE5G,CAAC,CAAC2D,KAAF3D,CAAQ,KAAKoG,MAAbpG,EAAqB,IAArBA,CAFM;AAGb6G,mBAAO,EAAE7G,CAAC,CAAC2D,KAAF3D,CAAQ,KAAK6G,OAAb7G,EAAsB,IAAtBA,CAHI;AAIb0D,iBAAK,EAAG,KAAK/C,OAAL,CAAaoE,IAAb,CAAkB,UAAlB,IAAiC/E,CAAC,CAAC2D,KAAF3D,CAAQ,KAAK6D,IAAb7D,EAAmB,IAAnBA,CAAjC,GAA4D,YAAW,CAAE;AAJpE,WAAf,CADa,CAAf;AAQD;AAhBH,aAkBK,IAAI,KAAK+B,SAAL,IAAkB,KAAKE,QAA3B,EAAqC;AAAE;AAC1C,aAAKwE,OAAL,GAAe,CACb;AACA,SAAC,KAAK9F,OAAL,CAAaqB,IAAb,CAAkB,OAAlB,CAAD,EAA6B;AAC3B2E,eAAK,EAAG,KAAK7F,QAAL,GAAiBd,CAAC,CAAC2D,KAAF3D,CAAQ,KAAK6D,IAAb7D,EAAmB,IAAnBA,CAAjB,GAA4C,YAAW,CADpC;AAE3B4G,eAAK,EAAE5G,CAAC,CAAC2D,KAAF3D,CAAQ,KAAKoG,MAAbpG,EAAqB,IAArBA,CAFoB;AAG3B6G,iBAAO,EAAE7G,CAAC,CAAC2D,KAAF3D,CAAQ,KAAK6G,OAAb7G,EAAsB,IAAtBA;AAHkB,SAA7B,CAFa,EAOb,CAAC,KAAK+B,SAAN,EAAiB;AACf2B,eAAK,EAAE1D,CAAC,CAAC2D,KAAF3D,CAAQ,KAAK6D,IAAb7D,EAAmB,IAAnBA;AADQ,SAAjB,CAPa,CAAf;AADG,aAYE,IAAI,KAAKW,OAAL,CAAamB,EAAb,CAAgB,KAAhB,CAAJ,EAA4B;AAAE;AACnC,aAAKF,QAAL,GAAgB,IAAhB;AADK,aAEA;AACL,aAAK6E,OAAL,GAAe,CACb,CAAC,KAAK9F,OAAN,EAAe;AACb+C,eAAK,EAAE1D,CAAC,CAAC2D,KAAF3D,CAAQ,KAAK6D,IAAb7D,EAAmB,IAAnBA;AADM,SAAf,CADa,CAAf;AAKD;;AAED,UAAI,KAAKmC,wBAAT,EAAmC;AACjC,aAAKsE,OAAL,CAAa,KAAKA,OAAL,CAAavE,MAA1B,IAAoC,CAClC,KAAKvB,OAD6B,EACpB;AACZmG,kBAAQ,EAAE,kBAASvC,CAAT,EAAY;AACpBA,aAAC,CAACwC,cAAFxC;AACAA,aAAC,CAACyC,eAAFzC;AACAvE,aAAC,CAAC,IAAD,CAADA,CAAQiH,IAARjH;AACD;AALW,SADoB,CAApC;AASD;;AAED,WAAK,IAAIkH,EAAJ,EAAQC,EAAR,EAAYnC,CAAC,GAAG,CAArB,EAAwBA,CAAC,GAAG,KAAKyB,OAAL,CAAavE,MAAzC,EAAiD8C,CAAC,EAAlD,EAAsD;AACpDkC,UAAE,GAAG,KAAKT,OAAL,CAAazB,CAAb,EAAgB,CAAhB,CAALkC;AACAC,UAAE,GAAG,KAAKV,OAAL,CAAazB,CAAb,EAAgB,CAAhB,CAALmC;AACAD,UAAE,CAACzD,EAAHyD,CAAMC,EAAND;AACD;AA9DkB;AAgErBR,iBAAa,EAAE,yBAAW;AACxB,WAAK,IAAIQ,EAAJ,EAAQC,EAAR,EAAYnC,CAAC,GAAG,CAArB,EAAwBA,CAAC,GAAG,KAAKyB,OAAL,CAAavE,MAAzC,EAAiD8C,CAAC,EAAlD,EAAsD;AACpDkC,UAAE,GAAG,KAAKT,OAAL,CAAazB,CAAb,EAAgB,CAAhB,CAALkC;AACAC,UAAE,GAAG,KAAKV,OAAL,CAAazB,CAAb,EAAgB,CAAhB,CAALmC;AACAD,UAAE,CAACE,GAAHF,CAAOC,EAAPD;AACD;;AACD,WAAKT,OAAL,GAAe,EAAf;AAtEmB;AAyErB5C,QAAI,EAAE,cAASU,CAAT,EAAY;AAChB,WAAKhB,MAAL,CAAYM,IAAZ;AACA,WAAKwD,MAAL,GAAc,KAAKtF,SAAL,GAAiB,KAAKA,SAAL,CAAeuF,WAAf,EAAjB,GAAgD,KAAK3G,OAAL,CAAa2G,WAAb,EAA9D;AACA,WAAKlB,MAAL;AACA,WAAKmB,KAAL;AACAvH,OAAC,CAACwH,MAAD,CAADxH,CAAUyD,EAAVzD,CAAa,QAAbA,EAAuBA,CAAC,CAAC2D,KAAF3D,CAAQ,KAAKuH,KAAbvH,EAAoB,IAApBA,CAAvBA;;AACA,UAAIuE,CAAJ,EAAO;AACLA,SAAC,CAACyC,eAAFzC;AACAA,SAAC,CAACwC,cAAFxC;AACD;;AACD,WAAK5D,OAAL,CAAa8G,OAAb,CAAqB;AACnBC,YAAI,EAAE,MADa;AAEnB5B,YAAI,EAAE,KAAKA;AAFQ,OAArB;AAnFmB;AAyFrBhC,QAAI,EAAE,cAASS,CAAT,EAAY;AAChB,UAAI,KAAK3C,QAAT,EAAmB;AAAC;AAAQ;;AAC5B,UAAI,CAAC,KAAK2B,MAAL,CAAYzB,EAAZ,CAAe,UAAf,CAAL,EAAiC;AAAC;AAAQ;;AAC1C,WAAKyB,MAAL,CAAYO,IAAZ;AACA9D,OAAC,CAACwH,MAAD,CAADxH,CAAUoH,GAAVpH,CAAc,QAAdA,EAAwB,KAAKuH,KAA7BvH;AACA,WAAKoD,QAAL,GAAgB,KAAKF,aAArB;AACA,WAAKmD,QAAL;;AACA,UAAI,CAAC,KAAKxE,OAAV,EAAmB;AACjB7B,SAAC,CAACsE,QAAD,CAADtE,CAAYoH,GAAZpH,CAAgB,WAAhBA,EAA6B,KAAK8D,IAAlC9D;AACD;;AAED,UACE,KAAKsD,UAAL,KAEU,KAAKzB,OAAL,IAAgB,KAAKlB,OAAL,CAAasE,GAAb,EAAhB,IACE,KAAKhD,QAAL,IAAiB,KAAKtB,OAAL,CAAaqB,IAAb,CAAkB,OAAlB,EAA2BiD,GAA3B,EAH7B,CADF,EAOA;AAAC,aAAKgB,QAAL;AAAiB;;AAClB,WAAKtF,OAAL,CAAa8G,OAAb,CAAqB;AACnBC,YAAI,EAAE,MADa;AAEnB5B,YAAI,EAAE,KAAKA;AAFQ,OAArB;AA5GmB;AAkHrB6B,UAAM,EAAE,kBAAW;AACjB,WAAKjB,aAAL;;AACA,WAAKnD,MAAL,CAAYoE,MAAZ;AACA,aAAO,KAAKhH,OAAL,CAAaQ,IAAb,GAAoByG,UAA3B;AArHmB;AAwHrBC,WAAO,EAAE,mBAAW;AAClB,UAAIC,CAAC,GAAG,KAAKrH,UAAL,EAAR;AACA,aAAO,IAAIP,IAAJ,CAAS4H,CAAC,CAACC,OAAFD,KAAeA,CAAC,CAACE,iBAAFF,KAAwB,KAAhD,CAAP;AA1HmB;AA6HrBrH,cAAU,EAAE,sBAAW;AACrB,aAAO,KAAKqF,IAAZ;AA9HmB;AAiIrBmC,WAAO,EAAE,iBAASH,CAAT,EAAY;AACnB,WAAKI,UAAL,CAAgB,IAAIhI,IAAJ,CAAS4H,CAAC,CAACC,OAAFD,KAAeA,CAAC,CAACE,iBAAFF,KAAwB,KAAhD,CAAhB;AAlImB;AAqIrBI,cAAU,EAAE,oBAASJ,CAAT,EAAY;AACtB,WAAKhC,IAAL,GAAYgC,CAAZ;AACA,WAAK7B,QAAL;AAvImB;AA0IrBA,YAAQ,EAAE,oBAAW;AACnB,UAAIkC,SAAS,GAAG,KAAKC,gBAAL,EAAhB;;AACA,UAAI,CAAC,KAAKvG,OAAV,EAAmB;AACjB,YAAI,KAAKE,SAAT,EAAoB;AAClB,eAAKpB,OAAL,CAAaqB,IAAb,CAAkB,OAAlB,EAA2BiD,GAA3B,CAA+BkD,SAA/B;AACD;;AACD,aAAKxH,OAAL,CAAaQ,IAAb,CAAkB,MAAlB,EAA0BgH,SAA1B;AAJF,aAKO;AACL,aAAKxH,OAAL,CAAasE,GAAb,CAAiBkD,SAAjB;AACD;AAnJkB;AAsJrBC,oBAAgB,EAAE,0BAAS5G,MAAT,EAAiB;AACjC,UAAIA,MAAM,KAAKT,SAAf,EACA;AAACS,cAAM,GAAG,KAAKA,MAAdA;AAAsB;;AACvB,aAAOC,QAAQ,CAAC4G,UAAT5G,CAAoB,KAAKqE,IAAzBrE,EAA+BD,MAA/BC,EAAuC,KAAKP,QAA5CO,CAAP;AAzJmB;AA4JrBiE,gBAAY,EAAE,sBAASL,SAAT,EAAoB;AAChC,WAAKA,SAAL,GAAiBA,SAAS,IAAI,CAACC,QAA/B;;AACA,UAAI,KAAKD,SAAL,KAAmB,CAACC,QAAxB,EAAkC;AAChC,aAAKD,SAAL,GAAiB5D,QAAQ,CAACuE,SAATvE,CAAmB,KAAK4D,SAAxB5D,EAAmC,KAAKD,MAAxCC,EAAgD,KAAKP,QAArDO,CAAjB;AACD;;AACD,WAAK2E,MAAL;AACA,WAAKkC,eAAL;AAlKmB;AAqKrB3C,cAAU,EAAE,oBAASJ,OAAT,EAAkB;AAC5B,WAAKA,OAAL,GAAeA,OAAO,IAAID,QAA1B;;AACA,UAAI,KAAKC,OAAL,KAAiBD,QAArB,EAA+B;AAC7B,aAAKC,OAAL,GAAe9D,QAAQ,CAACuE,SAATvE,CAAmB,KAAK8D,OAAxB9D,EAAiC,KAAKD,MAAtCC,EAA8C,KAAKP,QAAnDO,CAAf;AACD;;AACD,WAAK2E,MAAL;AACA,WAAKkC,eAAL;AA3KmB;AA8KrB1C,yBAAqB,EAAE,+BAASJ,kBAAT,EAA6B;AAClD,WAAKA,kBAAL,GAA0BA,kBAAkB,IAAI,EAAhD;;AACA,UAAI,CAACxF,CAAC,CAACuI,OAAFvI,CAAU,KAAKwF,kBAAfxF,CAAL,EAAyC;AACvC,aAAKwF,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBnE,KAAxB,CAA8B,MAA9B,CAA1B;AACD;;AACD,WAAKmE,kBAAL,GAA0BxF,CAAC,CAACwI,GAAFxI,CAAM,KAAKwF,kBAAXxF,EAA+B,UAAS8H,CAAT,EAAY;AACnE,eAAO5C,QAAQ,CAAC4C,CAAD,EAAI,EAAJ,CAAf;AADwB,QAA1B;AAGA,WAAK1B,MAAL;AACA,WAAKkC,eAAL;AAvLmB;AA0LrBzC,oBAAgB,EAAE,0BAASJ,aAAT,EAAwB;AACxC,WAAKA,aAAL,GAAqBA,aAAa,IAAI,EAAtC;;AACA,UAAI,CAACzF,CAAC,CAACuI,OAAFvI,CAAU,KAAKyF,aAAfzF,CAAL,EAAoC;AAClC,aAAKyF,aAAL,GAAqB,KAAKA,aAAL,CAAmBpE,KAAnB,CAAyB,MAAzB,CAArB;AACD;;AACD,WAAKoE,aAAL,GAAqBzF,CAAC,CAACwI,GAAFxI,CAAM,KAAKyF,aAAXzF,EAA0B,UAAS8H,CAAT,EAAY;AACzD,eAAOrG,QAAQ,CAACuE,SAATvE,CAAmBqG,CAAnBrG,EAAsB,KAAKD,MAA3BC,EAAmC,KAAKP,QAAxCO,EAAkDgH,OAAlDhH,EAAP;AADmB,QAArB;AAGA,WAAK2E,MAAL;AACA,WAAKkC,eAAL;AAnMmB;AAsMrBf,SAAK,EAAE,iBAAW;AAChB,UAAI,KAAK3F,QAAT,EAAmB;AAAC;AAAQ;;AAC5B,UAAI8G,QAAQ,GAAG,EAAf;AACA,WAAK/H,OAAL,CAAagI,OAAb,GAAuBH,GAAvB,CAA2B,YAAW;AACpC,YAAIxI,CAAC,CAAC,IAAD,CAADA,CAAQ4I,GAAR5I,CAAY,SAAZA,KAA0B,MAA9B,EAAsC;AACpC0I,kBAAQ,CAACG,IAATH,CAAcxD,QAAQ,CAAClF,CAAC,CAAC,IAAD,CAADA,CAAQ4I,GAAR5I,CAAY,SAAZA,CAAD,CAAtB0I;AACD;AAHH;AAKA,UAAII,MAAM,GAAGJ,QAAQ,CAACK,IAATL,CAAc,UAASM,CAAT,EAAYC,CAAZ,EAAe;AAAE,eAAOD,CAAC,GAAGC,CAAX;AAA/B,SAAgDC,GAAhDR,KAAwD,EAArE;AACA,UAAIS,OAAO,GAAG,KAAKpH,SAAL,GAAiB,KAAKA,SAAtB,GAAkC,KAAKpB,OAArD;AACA,UAAIyI,MAAM,GAAGD,OAAO,CAACC,MAARD,EAAb;AACA,UAAI9B,MAAM,GAAG8B,OAAO,CAAC7B,WAAR6B,KAAwBjE,QAAQ,CAACiE,OAAO,CAACP,GAARO,CAAY,YAAZA,CAAD,CAA7C;AACA,UAAIE,KAAK,GAAGF,OAAO,CAACG,UAARH,KAAuBjE,QAAQ,CAACiE,OAAO,CAACP,GAARO,CAAY,aAAZA,CAAD,CAA3C;AACA,UAAII,aAAa,GAAGH,MAAM,CAACI,GAAPJ,GAAa/B,MAAjC;AACA,UAAIoC,UAAU,GAAGL,MAAM,CAACM,IAAxB;AACA,WAAKnG,MAAL,CAAYoG,WAAZ,CAAwB,kCAAxB,EAfgB,CAgBhB;;AACA,UAAIC,UAAU,GAAI5J,CAAC,CAACwH,MAAD,CAADxH,CAAU6J,SAAV7J,KAAwBoJ,MAAM,CAACI,GAAPJ,GAAa,KAAK7F,MAAL,CAAY+D,WAAZ,EAAvD;AACA,UAAIwC,aAAa,GAAIP,aAAa,GAAG,KAAKhG,MAAL,CAAY+D,WAAZ,EAAhBiC,GAA6CvJ,CAAC,CAACwH,MAAD,CAADxH,CAAU6J,SAAV7J,KAAwBA,CAAC,CAACwH,MAAD,CAADxH,CAAUqH,MAAVrH,EAA1F,CAlBgB,CAmBhB;;AACA,UAAI,CAAC8J,aAAD,IAAkBF,UAAtB,EAAkC;AAChCL,qBAAa,GAAGH,MAAM,CAACI,GAAPJ,GAAa,KAAK7F,MAAL,CAAY+D,WAAZ,EAA7BiC;AACA,aAAKhG,MAAL,CAAYQ,QAAZ,CAAqB,gBAArB;AAFF,aAIK;AACH;AACA,YAAI,CAAC+F,aAAL,EAAoB;AAAC9J,WAAC,CAACwH,MAAD,CAADxH,CAAU6J,SAAV7J,CAAoBoJ,MAAM,CAACI,GAA3BxJ;AAAiC;;AACtD,aAAKuD,MAAL,CAAYQ,QAAZ,CAAqB,mBAArB;AA3Bc,QA8BhB;AACA;;;AACA,UAAIqF,MAAM,CAACM,IAAPN,GAAc,KAAK7F,MAAL,CAAY8F,KAAZ,EAAdD,IAAqCpJ,CAAC,CAACwH,MAAD,CAADxH,CAAUqJ,KAAVrJ,EAAzC,EAA4D;AAC1DyJ,kBAAU,GAAIL,MAAM,CAACM,IAAPN,GAAcC,KAAdD,GAAuB,KAAK7F,MAAL,CAAY8F,KAAZ,EAArCI;AACD;;AACD,WAAKlG,MAAL,CAAYqF,GAAZ,CAAgB;AACdY,WAAG,EAAED,aADS;AAEdG,YAAI,EAAED,UAFQ;AAGdX,cAAM,EAAEA;AAHM,OAAhB;AAzOmB;AAgPrB1C,UAAM,EAAE,kBAAW;AACjB,UAAIN,IAAJ;AAAA,UACIiE,QAAQ,GAAG,KADf;AAEA,UAAIC,UAAU,GAAG,KAAKnI,OAAL,GAAe,KAAKlB,OAAL,CAAasE,GAAb,EAAf,GAAoC,KAAKtE,OAAL,CAAaQ,IAAb,CAAkB,MAAlB,KAA6B,KAAKR,OAAL,CAAaqB,IAAb,CAAkB,OAAlB,EAA2BiD,GAA3B,EAAlF;;AACA,UAAI7E,SAAS,IAAIA,SAAS,CAAC8B,MAAvB9B,KAAkC,OAAOA,SAAS,CAAC,CAAD,CAAhB,KAAwB,QAAxB,IAAoCA,SAAS,CAAC,CAAD,CAATA,YAAwBF,IAA9FE,CAAJ,EAAyG;AACvG0F,YAAI,GAAG1F,SAAS,CAAC,CAAD,CAAhB0F;AACAiE,gBAAQ,GAAG,IAAXA;AAFF,aAIK;AACHjE,YAAI,GAAG,KAAKjE,OAAL,GAAe,KAAKlB,OAAL,CAAasE,GAAb,EAAf,GAAoC,KAAKtE,OAAL,CAAaQ,IAAb,CAAkB,MAAlB,KAA6B,KAAKR,OAAL,CAAaqB,IAAb,CAAkB,OAAlB,EAA2BiD,GAA3B,EAAxEa;AACD;;AAED,WAAKA,IAAL,GAAYrE,QAAQ,CAACuE,SAATvE,CAAmBqE,IAAnBrE,EAAyB,KAAKD,MAA9BC,EAAsC,KAAKP,QAA3CO,CAAZ;;AAEA,UAAIsI,QAAJ,EAAc;AACZ,aAAK9D,QAAL;AADF,aAEO,IAAI+D,UAAU,IAAI,EAAlB,EAAsB;AAC3B,aAAKrJ,OAAL,CAAa8G,OAAb,CAAqB;AACnBC,cAAI,EAAE,YADa;AAEnB5B,cAAI,EAAE;AAFa,SAArB;AAID;;AAED,UAAI,KAAKA,IAAL,GAAY,KAAKT,SAArB,EAAgC;AAC9B,aAAKU,QAAL,GAAgB,IAAI7F,IAAJ,CAAS,KAAKmF,SAAL,CAAeoD,OAAf,EAAT,CAAhB;AADF,aAEO,IAAI,KAAK3C,IAAL,GAAY,KAAKP,OAArB,EAA8B;AACnC,aAAKQ,QAAL,GAAgB,IAAI7F,IAAJ,CAAS,KAAKqF,OAAL,CAAakD,OAAb,EAAT,CAAhB;AADK,aAEA;AACL,aAAK1C,QAAL,GAAgB,IAAI7F,IAAJ,CAAS,KAAK4F,IAAL,CAAU2C,OAAV,EAAT,CAAhB;AACD;;AACD,WAAKwB,IAAL;AA9QmB;AAiRrB/D,WAAO,EAAE,mBAAW;AAClB,UAAIgE,MAAM,GAAG,KAAK/E,SAAlB;AAAA,UACIgF,IAAI,GAAG,MADX;;AAEA,UAAI,KAAKrF,aAAT,EAAwB;AACtB,YAAIsF,IAAI,GAAG,4BAAX;AACAD,YAAI,IAAIC,IAARD;AACA,aAAK5G,MAAL,CAAYvB,IAAZ,CAAiB,uCAAjB,EAA0DkC,OAA1D,CAAkEkG,IAAlE;AACD;;AACD,aAAOF,MAAM,GAAG,KAAK/E,SAAL,GAAiB,CAAjC,EAAoC;AAClCgF,YAAI,gCAAuB/I,KAAK,CAAC,KAAKF,QAAN,CAALE,CAAqBiJ,OAArBjJ,CAA8B8I,MAAM,KAAM,CAA1C9I,CAAvB,UAAJ+I;AACD;;AACDA,UAAI,IAAI,OAARA;AACA,WAAK5G,MAAL,CAAYvB,IAAZ,CAAiB,wBAAjB,EAA2CoC,MAA3C,CAAkD+F,IAAlD;AA7RmB;AAgSrBhE,cAAU,EAAE,sBAAW;AACrB,UAAIgE,IAAI,GAAG,EAAX;AAAA,UACInF,CAAC,GAAG,CADR;;AAEA,aAAOA,CAAC,GAAG,EAAX,EAAe;AACbmF,YAAI,oCAA2B/I,KAAK,CAAC,KAAKF,QAAN,CAALE,CAAqBkJ,WAArBlJ,CAAiC4D,CAAC,EAAlC5D,CAA3B,YAAJ+I;AACD;;AACD,WAAK5G,MAAL,CAAYvB,IAAZ,CAAiB,uBAAjB,EAA0CmI,IAA1C,CAA+CA,IAA/C;AAtSmB;AAySrBF,QAAI,EAAE,gBAAW;AACf,UAAI,KAAKnE,IAAL,IAAa,IAAb,IAAqB,KAAKC,QAAL,IAAiB,IAA1C,EAAgD;AAC9C;AACD;;AAED,UAAI+B,CAAC,GAAG,IAAI5H,IAAJ,CAAS,KAAK6F,QAAL,CAAc0C,OAAd,EAAT,CAAR;AAAA,UACI8B,IAAI,GAAGzC,CAAC,CAACvH,cAAFuH,EADX;AAAA,UAEI0C,KAAK,GAAG1C,CAAC,CAACtH,WAAFsH,EAFZ;AAAA,UAGI2C,QAAQ,GAAG3C,CAAC,CAACrH,UAAFqH,EAHf;AAAA,UAII4C,KAAK,GAAG5C,CAAC,CAAC6C,WAAF7C,EAJZ;AAAA,UAKI8C,OAAO,GAAG9C,CAAC,CAAC+C,aAAF/C,EALd;AAAA,UAMIgD,SAAS,GAAG,KAAKzF,SAAL,KAAmB,CAACC,QAApB,GAA+B,KAAKD,SAAL,CAAe9E,cAAf,EAA/B,GAAiE,CAAC+E,QANlF;AAAA,UAOIyF,UAAU,GAAG,KAAK1F,SAAL,KAAmB,CAACC,QAApB,GAA+B,KAAKD,SAAL,CAAe7E,WAAf,EAA/B,GAA8D,CAAC8E,QAPhF;AAAA,UAQI0F,OAAO,GAAG,KAAKzF,OAAL,KAAiBD,QAAjB,GAA4B,KAAKC,OAAL,CAAahF,cAAb,EAA5B,GAA4D+E,QAR1E;AAAA,UASI2F,QAAQ,GAAG,KAAK1F,OAAL,KAAiBD,QAAjB,GAA4B,KAAKC,OAAL,CAAa/E,WAAb,EAA5B,GAAyD8E,QATxE;AAAA,UAUI4F,WAAW,GAAG,KAAKpF,IAAL,IAAa7F,OAAO,CAAC,KAAK6F,IAAL,CAAUvF,cAAV,EAAD,EAA6B,KAAKuF,IAAL,CAAUtF,WAAV,EAA7B,EAAsD,KAAKsF,IAAL,CAAUrF,UAAV,EAAtD,CAAPR,CAAqFwI,OAArFxI,EAV/B;AAAA,UAWIK,KAAK,GAAG,IAAIJ,IAAJ,EAXZ;AAAA,UAYIiL,WAAW,GAAG/J,KAAK,CAAC,KAAKF,QAAN,CAALE,CAAqB+J,WAArB/J,IAAoCA,KAAK,CAACgK,EAANhK,CAAS+J,WAZ/D,CALe,CAkBf;AACA;;AAEA,WAAK5H,MAAL,CAAYvB,IAAZ,CAAiB,iCAAjB,EACEqJ,IADF,WACUjK,KAAK,CAAC,KAAKF,QAAN,CAALE,CAAqBkK,MAArBlK,CAA4BoJ,KAA5BpJ,CADV,cACgDmJ,IADhD;AAEA,WAAKhH,MAAL,CAAYvB,IAAZ,CAAiB,kCAAjB,EACEqJ,IADF,WACUZ,QADV,cACsBrJ,KAAK,CAAC,KAAKF,QAAN,CAALE,CAAqBkK,MAArBlK,CAA4BoJ,KAA5BpJ,CADtB,cAC4DmJ,IAD5D;AAEA,WAAKhH,MAAL,CAAYvB,IAAZ,CAAiB,oCAAjB,EACEqJ,IADF,WACUZ,QADV,cACsBrJ,KAAK,CAAC,KAAKF,QAAN,CAALE,CAAqBkK,MAArBlK,CAA4BoJ,KAA5BpJ,CADtB,cAC4DmJ,IAD5D;AAIA,WAAKhH,MAAL,CAAYvB,IAAZ,CAAiB,gBAAjB,EACEqJ,IADF,CACOjK,KAAK,CAAC,KAAKF,QAAN,CAALE,CAAqBd,KAD5B,EAEEiL,MAFF,CAES,KAAK3G,QAAL,KAAkB,KAF3B;AAGA,WAAK0D,eAAL;AACA,WAAKnC,UAAL;AACA,UAAIqF,SAAS,GAAGvL,OAAO,CAACsK,IAAD,EAAOC,KAAK,GAAG,CAAf,EAAkB,EAAlB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,CAAvB;AAAA,UACIiB,GAAG,GAAGhK,QAAQ,CAACiK,cAATjK,CAAwB+J,SAAS,CAACjL,cAAViL,EAAxB/J,EAAoD+J,SAAS,CAAChL,WAAVgL,EAApD/J,CADV;AAEA+J,eAAS,CAACtD,UAAVsD,CAAqBC,GAArBD;AACAA,eAAS,CAACtD,UAAVsD,CAAqBC,GAAG,GAAG,CAACD,SAAS,CAACG,SAAVH,KAAwB,KAAKrG,SAA7BqG,GAAyC,CAA1C,IAA+C,CAA1EA;AACA,UAAII,SAAS,GAAG,IAAI1L,IAAJ,CAASsL,SAAS,CAAC/C,OAAV+C,EAAT,CAAhB;AACAI,eAAS,CAAC1D,UAAV0D,CAAqBA,SAAS,CAACnL,UAAVmL,KAAyB,EAA9CA;AACAA,eAAS,GAAGA,SAAS,CAACnD,OAAVmD,EAAZA;AACA,UAAIzB,IAAI,GAAG,EAAX;AACA,UAAI0B,OAAJ;;AACA,aAAOL,SAAS,CAAC/C,OAAV+C,KAAsBI,SAA7B,EAAwC;AACtC,YAAIJ,SAAS,CAACG,SAAVH,MAAyB,KAAKrG,SAAlC,EAA6C;AAC3CgF,cAAI,CAACtB,IAALsB,CAAU,MAAVA;;AACA,cAAI,KAAKrF,aAAT,EAAwB;AACtB;AACA,gBAAIkE,CAAC,GAAG,IAAI9I,IAAJ,CAASsL,SAAS,CAACjL,cAAViL,EAAT,EAAqCA,SAAS,CAAChL,WAAVgL,EAArC,EAA8DA,SAAS,CAAC/K,UAAV+K,KAAyBA,SAAS,CAACM,MAAVN,EAAzBA,GAA8C,EAA9CA,IAAoD,KAAKrG,SAAL,IAAkB,KAAKA,SAAL,GAAiB,CAAjB,GAAqB,CAAvC,IAA4C,CAAhGqG,CAA9D,CAAR;AAAA,gBACIvC,CAAC,GAAG,IAAI/I,IAAJ,CAAS8I,CAAC,CAAC+C,WAAF/C,EAAT,EAA0B,CAA1B,EAA6B,CAA7B,CADR;AAAA,gBAEIgD,OAAO,GAAG,CAAC,EAAE,CAAChD,CAAC,GAAGC,CAAL,IAAU,KAAV,GAAkB,CAAlB,GAAsB,GAAxB,CAFf;AAGAkB,gBAAI,CAACtB,IAALsB,4BAA4B6B,OAA5B;AACD;AACF;;AACDH,eAAO,cAAO,KAAKzJ,QAAL,CAAcoJ,SAAd,CAAP,MAAPK;;AACA,YAAIL,SAAS,CAACjL,cAAViL,KAA6BjB,IAA7BiB,IAAsCA,SAAS,CAACjL,cAAViL,MAA8BjB,IAA9BiB,IAAsCA,SAAS,CAAChL,WAAVgL,KAA0BhB,KAA1G,EAAkH;AAChHqB,iBAAO,IAAI,MAAXA;AADF,eAEO,IAAIL,SAAS,CAACjL,cAAViL,KAA6BjB,IAA7BiB,IAAsCA,SAAS,CAACjL,cAAViL,MAA8BjB,IAA9BiB,IAAsCA,SAAS,CAAChL,WAAVgL,KAA0BhB,KAA1G,EAAkH;AACvHqB,iBAAO,IAAI,MAAXA;AAfoC,UAiBtC;;;AACA,YAAI,KAAKhH,cAAL,IACQ2G,SAAS,CAACjL,cAAViL,MAA8BlL,KAAK,CAACyL,WAANzL,EADtC,IAEQkL,SAAS,CAAChL,WAAVgL,MAA2BlL,KAAK,CAAC2L,QAAN3L,EAFnC,IAGQkL,SAAS,CAAC/K,UAAV+K,MAA0BlL,KAAK,CAACuH,OAANvH,EAHtC,EAGuD;AACrDuL,iBAAO,IAAI,QAAXA;AACD;;AACD,YAAIX,WAAW,IAAIM,SAAS,CAAC/C,OAAV+C,MAAuBN,WAA1C,EAAuD;AACrDW,iBAAO,IAAI,SAAXA;AACD;;AACD,YAAIL,SAAS,CAAC/C,OAAV+C,KAAsB,KAAKnG,SAA3BmG,IAAwCA,SAAS,CAAC/C,OAAV+C,KAAsB,KAAKjG,OAAnEiG,IACQxL,CAAC,CAACkM,OAAFlM,CAAUwL,SAAS,CAACG,SAAVH,EAAVxL,EAAiC,KAAKwF,kBAAtCxF,MAA8D,CAAC,CADvEwL,IAEQxL,CAAC,CAACkM,OAAFlM,CAAUwL,SAAS,CAAC/C,OAAV+C,EAAVxL,EAA+B,KAAKyF,aAApCzF,MAAuD,CAAC,CAFpE,EAEuE;AACrE6L,iBAAO,IAAI,WAAXA;AACD;;AACD1B,YAAI,CAACtB,IAALsB,0BAA2B0B,OAA3B,gBAAuCL,SAAS,CAAC/K,UAAV+K,EAAvC;;AACA,YAAIA,SAAS,CAACG,SAAVH,MAAyB,KAAKpG,OAAlC,EAA2C;AACzC+E,cAAI,CAACtB,IAALsB,CAAU,OAAVA;AACD;;AACDqB,iBAAS,CAACtD,UAAVsD,CAAqBA,SAAS,CAAC/K,UAAV+K,KAAyB,CAA9CA;AACD;;AACD,WAAKjI,MAAL,CAAYvB,IAAZ,CAAiB,wBAAjB,EAA2CmK,KAA3C,GAAmD/H,MAAnD,CAA0D+F,IAAI,CAACiC,IAALjC,CAAU,EAAVA,CAA1D;AAEAA,UAAI,GAAG,EAAPA;;AACA,WAAK,IAAInF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AAC3B,YAAIqH,MAAM,GAAGpM,OAAO,CAACsK,IAAD,EAAOC,KAAP,EAAcC,QAAd,EAAwBzF,CAAxB,CAApB;AACA6G,eAAO,GAAG,EAAVA,CAF2B,CAG3B;;AACA,YAAKQ,MAAM,CAAC5D,OAAP4D,KAAmB,OAAnBA,GAA8B,KAAKhH,SAAnCgH,IAAgDA,MAAM,CAAC5D,OAAP4D,KAAmB,KAAK9G,OAA7E,EAAsF;AACpFsG,iBAAO,IAAI,WAAXA;AADF,eAEO,IAAInB,KAAK,IAAI1F,CAAb,EAAgB;AACrB6G,iBAAO,IAAI,SAAXA;AACD;;AACD1B,YAAI,CAACtB,IAALsB,6BAA8B0B,OAA9B,gBAA0C7G,CAA1C;AACD;;AACD,WAAKzB,MAAL,CAAYvB,IAAZ,CAAiB,sBAAjB,EAAyCmI,IAAzC,CAA8CA,IAAI,CAACiC,IAALjC,CAAU,EAAVA,CAA9C;AAEAA,UAAI,GAAG,EAAPA;;AACA,WAAK,IAAInF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,IAAI,KAAKzC,UAAlC,EAA8C;AAC5C,YAAI8J,MAAM,GAAGpM,OAAO,CAACsK,IAAD,EAAOC,KAAP,EAAcC,QAAd,EAAwBC,KAAxB,EAA+B1F,CAA/B,CAApB;AACA6G,eAAO,GAAG,EAAVA;;AACA,YAAIQ,MAAM,CAAC5D,OAAP4D,KAAmB,KAAKhH,SAAxBgH,IAAqCA,MAAM,CAAC5D,OAAP4D,KAAmB,KAAK9G,OAAjE,EAA0E;AACxEsG,iBAAO,IAAI,WAAXA;AADF,eAEO,IAAIS,IAAI,CAACC,KAALD,CAAW1B,OAAO,GAAG,KAAKrI,UAA1B+J,KAAyCA,IAAI,CAACC,KAALD,CAAWtH,CAAC,GAAG,KAAKzC,UAApB+J,CAA7C,EAA8E;AACnFT,iBAAO,IAAI,SAAXA;AACD;;AACD1B,YAAI,CAACtB,IAALsB,+BAAgC0B,OAAhC,gBAA4CnB,KAA5C,cAAqD1F,CAAC,GAAG,EAAJA,cAAaA,CAAb,IAAmBA,CAAxE;AACD;;AACD,WAAKzB,MAAL,CAAYvB,IAAZ,CAAiB,wBAAjB,EAA2CmI,IAA3C,CAAgDA,IAAI,CAACiC,IAALjC,CAAU,EAAVA,CAAhD;AAGA,UAAIqC,WAAW,GAAG,KAAK1G,IAAL,IAAa,KAAKA,IAAL,CAAUvF,cAAV,EAA/B;AACA,UAAI+K,MAAM,GAAG,KAAK/H,MAAL,CAAYvB,IAAZ,CAAiB,oBAAjB,EACXA,IADW,CACN,UADM,EAEXqJ,IAFW,CAENd,IAFM,EAGXkC,GAHW,GAIXzK,IAJW,CAIN,MAJM,EAIE2H,WAJF,CAIc,QAJd,CAAb;;AAKA,UAAI6C,WAAW,IAAIA,WAAW,IAAIjC,IAAlC,EAAwC;AACtCe,cAAM,CAACoB,EAAPpB,CAAU,KAAKxF,IAAL,CAAUtF,WAAV,EAAV8K,EAAmCvH,QAAnCuH,CAA4C,QAA5CA;AACD;;AACD,UAAIf,IAAI,GAAGO,SAAPP,IAAoBA,IAAI,GAAGS,OAA/B,EAAwC;AACtCM,cAAM,CAACvH,QAAPuH,CAAgB,UAAhBA;AACD;;AACD,UAAIf,IAAI,IAAIO,SAAZ,EAAuB;AACrBQ,cAAM,CAACqB,KAAPrB,CAAa,CAAbA,EAAgBP,UAAhBO,EAA4BvH,QAA5BuH,CAAqC,UAArCA;AACD;;AACD,UAAIf,IAAI,IAAIS,OAAZ,EAAqB;AACnBM,cAAM,CAACqB,KAAPrB,CAAaL,QAAQ,GAAG,CAAxBK,EAA2BvH,QAA3BuH,CAAoC,UAApCA;AACD;;AAEDnB,UAAI,GAAG,EAAPA;AACAI,UAAI,GAAGrF,QAAQ,CAACqF,IAAI,GAAG,EAAR,EAAY,EAAZ,CAARrF,GAA0B,EAAjCqF;AACA,UAAIqC,QAAQ,GAAG,KAAKrJ,MAAL,CAAYvB,IAAZ,CAAiB,mBAAjB,EACbA,IADa,CACR,UADQ,EAEbqJ,IAFa,WAELd,IAFK,cAEGA,IAAI,GAAG,CAFV,GAGbkC,GAHa,GAIbzK,IAJa,CAIR,IAJQ,CAAf;AAKAuI,UAAI,IAAI,CAARA;;AACA,WAAK,IAAIvF,CAAC,GAAG,CAAC,CAAd,EAAiBA,CAAC,GAAG,EAArB,EAAyBA,CAAC,EAA1B,EAA8B;AAC5BmF,YAAI,gCAAwBnF,CAAC,IAAI,CAAC,CAANA,IAAWA,CAAC,IAAI,EAAhBA,GAAqB,MAArBA,GAA8B,EAAtD,SAA2DwH,WAAW,IAAIjC,IAAfiC,GAAsB,SAAtBA,GAAkC,EAA7F,SAAkGjC,IAAI,GAAGO,SAAPP,IAAoBA,IAAI,GAAGS,OAA3BT,GAAqC,WAArCA,GAAmD,EAArJ,gBAA4JA,IAA5J,YAAJJ;AACAI,YAAI,IAAI,CAARA;AACD;;AACDqC,cAAQ,CAACzC,IAATyC,CAAczC,IAAdyC;AAvbmB;AA0brBtE,mBAAe,EAAE,2BAAW;AAC1B,UAAIR,CAAC,GAAG,IAAI5H,IAAJ,CAAS,KAAK6F,QAAd,CAAR;AAAA,UACIwE,IAAI,GAAGzC,CAAC,CAACvH,cAAFuH,EADX;AAAA,UAEI0C,KAAK,GAAG1C,CAAC,CAACtH,WAAFsH,EAFZ;AAAA,UAGI2D,GAAG,GAAG3D,CAAC,CAACrH,UAAFqH,EAHV;AAAA,UAII+E,IAAI,GAAG/E,CAAC,CAAC6C,WAAF7C,EAJX;;AAKA,cAAQ,KAAK1E,QAAb;AACA,aAAK,CAAL;AACE,cAAI,KAAKiC,SAAL,KAAmB,CAACC,QAApB,IAAgCiF,IAAI,IAAI,KAAKlF,SAAL,CAAe9E,cAAf,EAAxC,IAA2EiK,KAAK,IAAI,KAAKnF,SAAL,CAAe7E,WAAf,EAApF,IAAoHiL,GAAG,IAAI,KAAKpG,SAAL,CAAe5E,UAAf,EAA3H,IAA0JoM,IAAI,IAAI,KAAKxH,SAAL,CAAesF,WAAf,EAAtK,EAAoM;AAClM,iBAAKpH,MAAL,CAAYvB,IAAZ,CAAiB,OAAjB,EAA0B4G,GAA1B,CAA8B;AAC5BkE,wBAAU,EAAE;AADgB,aAA9B;AADF,iBAIO;AACL,iBAAKvJ,MAAL,CAAYvB,IAAZ,CAAiB,OAAjB,EAA0B4G,GAA1B,CAA8B;AAC5BkE,wBAAU,EAAE;AADgB,aAA9B;AAGD;;AACD,cAAI,KAAKvH,OAAL,KAAiBD,QAAjB,IAA6BiF,IAAI,IAAI,KAAKhF,OAAL,CAAahF,cAAb,EAArC,IAAsEiK,KAAK,IAAI,KAAKjF,OAAL,CAAa/E,WAAb,EAA/E,IAA6GiL,GAAG,IAAI,KAAKlG,OAAL,CAAa9E,UAAb,EAApH,IAAiJoM,IAAI,IAAI,KAAKtH,OAAL,CAAaoF,WAAb,EAA7J,EAAyL;AACvL,iBAAKpH,MAAL,CAAYvB,IAAZ,CAAiB,OAAjB,EAA0B4G,GAA1B,CAA8B;AAC5BkE,wBAAU,EAAE;AADgB,aAA9B;AADF,iBAIO;AACL,iBAAKvJ,MAAL,CAAYvB,IAAZ,CAAiB,OAAjB,EAA0B4G,GAA1B,CAA8B;AAC5BkE,wBAAU,EAAE;AADgB,aAA9B;AAGD;;AACD;;AACF,aAAK,CAAL;AACE,cAAI,KAAKzH,SAAL,KAAmB,CAACC,QAApB,IAAgCiF,IAAI,IAAI,KAAKlF,SAAL,CAAe9E,cAAf,EAAxC,IAA2EiK,KAAK,IAAI,KAAKnF,SAAL,CAAe7E,WAAf,EAApF,IAAoHiL,GAAG,IAAI,KAAKpG,SAAL,CAAe5E,UAAf,EAA/H,EAA4J;AAC1J,iBAAK8C,MAAL,CAAYvB,IAAZ,CAAiB,OAAjB,EAA0B4G,GAA1B,CAA8B;AAC5BkE,wBAAU,EAAE;AADgB,aAA9B;AADF,iBAIO;AACL,iBAAKvJ,MAAL,CAAYvB,IAAZ,CAAiB,OAAjB,EAA0B4G,GAA1B,CAA8B;AAC5BkE,wBAAU,EAAE;AADgB,aAA9B;AAGD;;AACD,cAAI,KAAKvH,OAAL,KAAiBD,QAAjB,IAA6BiF,IAAI,IAAI,KAAKhF,OAAL,CAAahF,cAAb,EAArC,IAAsEiK,KAAK,IAAI,KAAKjF,OAAL,CAAa/E,WAAb,EAA/E,IAA6GiL,GAAG,IAAI,KAAKlG,OAAL,CAAa9E,UAAb,EAAxH,EAAmJ;AACjJ,iBAAK8C,MAAL,CAAYvB,IAAZ,CAAiB,OAAjB,EAA0B4G,GAA1B,CAA8B;AAC5BkE,wBAAU,EAAE;AADgB,aAA9B;AADF,iBAIO;AACL,iBAAKvJ,MAAL,CAAYvB,IAAZ,CAAiB,OAAjB,EAA0B4G,GAA1B,CAA8B;AAC5BkE,wBAAU,EAAE;AADgB,aAA9B;AAGD;;AACD;;AACF,aAAK,CAAL;AACE,cAAI,KAAKzH,SAAL,KAAmB,CAACC,QAApB,IAAgCiF,IAAI,IAAI,KAAKlF,SAAL,CAAe9E,cAAf,EAAxC,IAA2EiK,KAAK,IAAI,KAAKnF,SAAL,CAAe7E,WAAf,EAAxF,EAAsH;AACpH,iBAAK+C,MAAL,CAAYvB,IAAZ,CAAiB,OAAjB,EAA0B4G,GAA1B,CAA8B;AAC5BkE,wBAAU,EAAE;AADgB,aAA9B;AADF,iBAIO;AACL,iBAAKvJ,MAAL,CAAYvB,IAAZ,CAAiB,OAAjB,EAA0B4G,GAA1B,CAA8B;AAC5BkE,wBAAU,EAAE;AADgB,aAA9B;AAGD;;AACD,cAAI,KAAKvH,OAAL,KAAiBD,QAAjB,IAA6BiF,IAAI,IAAI,KAAKhF,OAAL,CAAahF,cAAb,EAArC,IAAsEiK,KAAK,IAAI,KAAKjF,OAAL,CAAa/E,WAAb,EAAnF,EAA+G;AAC7G,iBAAK+C,MAAL,CAAYvB,IAAZ,CAAiB,OAAjB,EAA0B4G,GAA1B,CAA8B;AAC5BkE,wBAAU,EAAE;AADgB,aAA9B;AADF,iBAIO;AACL,iBAAKvJ,MAAL,CAAYvB,IAAZ,CAAiB,OAAjB,EAA0B4G,GAA1B,CAA8B;AAC5BkE,wBAAU,EAAE;AADgB,aAA9B;AAGD;;AACD;;AACF,aAAK,CAAL;AACA,aAAK,CAAL;AACE,cAAI,KAAKzH,SAAL,KAAmB,CAACC,QAApB,IAAgCiF,IAAI,IAAI,KAAKlF,SAAL,CAAe9E,cAAf,EAA5C,EAA6E;AAC3E,iBAAKgD,MAAL,CAAYvB,IAAZ,CAAiB,OAAjB,EAA0B4G,GAA1B,CAA8B;AAC5BkE,wBAAU,EAAE;AADgB,aAA9B;AADF,iBAIO;AACL,iBAAKvJ,MAAL,CAAYvB,IAAZ,CAAiB,OAAjB,EAA0B4G,GAA1B,CAA8B;AAC5BkE,wBAAU,EAAE;AADgB,aAA9B;AAGD;;AACD,cAAI,KAAKvH,OAAL,KAAiBD,QAAjB,IAA6BiF,IAAI,IAAI,KAAKhF,OAAL,CAAahF,cAAb,EAAzC,EAAwE;AACtE,iBAAKgD,MAAL,CAAYvB,IAAZ,CAAiB,OAAjB,EAA0B4G,GAA1B,CAA8B;AAC5BkE,wBAAU,EAAE;AADgB,aAA9B;AADF,iBAIO;AACL,iBAAKvJ,MAAL,CAAYvB,IAAZ,CAAiB,OAAjB,EAA0B4G,GAA1B,CAA8B;AAC5BkE,wBAAU,EAAE;AADgB,aAA9B;AAGD;;AACD;AAjFF;AAhcmB;AAqhBrBpJ,SAAK,EAAE,eAASa,CAAT,EAAY;AACjBA,OAAC,CAACyC,eAAFzC;AACAA,OAAC,CAACwC,cAAFxC;;AAEA,UAAIvE,CAAC,CAACuE,CAAC,CAACC,MAAH,CAADxE,CAAY+M,QAAZ/M,CAAqB,kBAArBA,KAA4CA,CAAC,CAACuE,CAAC,CAACC,MAAH,CAADxE,CAAYiE,MAAZjE,GAAqB+M,QAArB/M,CAA8B,kBAA9BA,CAAhD,EAAmG;AACjG,aAAK8D,IAAL;AACD;;AAED,UAAIU,MAAM,GAAGxE,CAAC,CAACuE,CAAC,CAACC,MAAH,CAADxE,CAAYyE,OAAZzE,CAAoB,cAApBA,CAAb;;AACA,UAAIwE,MAAM,CAACtC,MAAPsC,IAAiB,CAArB,EAAwB;AACtB,YAAIA,MAAM,CAAC1C,EAAP0C,CAAU,WAAVA,CAAJ,EAA4B;AAC1B,eAAK7D,OAAL,CAAa8G,OAAb,CAAqB;AACnBC,gBAAI,EAAE,YADa;AAEnB5B,gBAAI,EAAE,KAAKC,QAFQ;AAGnBV,qBAAS,EAAE,KAAKA,SAHG;AAInBE,mBAAO,EAAE,KAAKA;AAJK,WAArB;AAMA;AACD;;AAED,gBAAQf,MAAM,CAAC,CAAD,CAANA,CAAUwI,QAAVxI,CAAmByI,WAAnBzI,EAAR;AACA,eAAK,IAAL;AACE,oBAAQA,MAAM,CAAC,CAAD,CAANA,CAAU0I,SAAlB;AACA,mBAAK,aAAL;AACE,qBAAK7G,QAAL,CAAc,CAAd;AACA;;AACF,mBAAK,MAAL;AACA,mBAAK,MAAL;AACE,oBAAI8G,GAAG,GAAG1L,QAAQ,CAACwB,KAATxB,CAAe,KAAK2B,QAApB3B,EAA8B2L,OAA9B3L,IAAyC+C,MAAM,CAAC,CAAD,CAANA,CAAU0I,SAAV1I,IAAuB,MAAvBA,GAAgC,CAAC,CAAjCA,GAAqC,CAA9E/C,CAAV;;AACA,wBAAQ,KAAK2B,QAAb;AACA,uBAAK,CAAL;AACE,yBAAK2C,QAAL,GAAgB,KAAKsH,QAAL,CAAc,KAAKtH,QAAnB,EAA6BoH,GAA7B,CAAhB;AACA;;AACF,uBAAK,CAAL;AACE,yBAAKpH,QAAL,GAAgB,KAAKuH,QAAL,CAAc,KAAKvH,QAAnB,EAA6BoH,GAA7B,CAAhB;AACA;;AACF,uBAAK,CAAL;AACE,yBAAKpH,QAAL,GAAgB,KAAKwH,SAAL,CAAe,KAAKxH,QAApB,EAA8BoH,GAA9B,CAAhB;AACA;;AACF,uBAAK,CAAL;AACA,uBAAK,CAAL;AACE,yBAAKpH,QAAL,GAAgB,KAAKyH,QAAL,CAAc,KAAKzH,QAAnB,EAA6BoH,GAA7B,CAAhB;AACA;AAbF;;AAeA,qBAAKlD,IAAL;AACA;;AACF,mBAAK,OAAL;AACE,oBAAInE,IAAI,GAAG,IAAI5F,IAAJ,EAAX;AACA4F,oBAAI,GAAG7F,OAAO,CAAC6F,IAAI,CAACiG,WAALjG,EAAD,EAAqBA,IAAI,CAACmG,QAALnG,EAArB,EAAsCA,IAAI,CAAC+B,OAAL/B,EAAtC,EAAsDA,IAAI,CAAC2H,QAAL3H,EAAtD,EAAuEA,IAAI,CAAC4H,UAAL5H,EAAvE,EAA0FA,IAAI,CAAC6H,UAAL7H,EAA1F,CAAdA;AAEA,qBAAK1C,QAAL,GAAgB,KAAKF,aAArB;AACA,qBAAKmD,QAAL,CAAc,CAAd;;AACA,qBAAKuH,QAAL,CAAc9H,IAAd;;AACA;AA/BF;;AAiCA;;AACF,eAAK,MAAL;AACE,gBAAI,CAACtB,MAAM,CAAC1C,EAAP0C,CAAU,WAAVA,CAAL,EAA6B;AAC3B,kBAAIA,MAAM,CAAC1C,EAAP0C,CAAU,QAAVA,CAAJ,EAAyB;AACvB,oBAAI,KAAK1B,OAAL,KAAiB,CAArB,EAAwB;AACtB,sBAAI0H,KAAK,GAAGhG,MAAM,CAACP,MAAPO,GAAgBxC,IAAhBwC,CAAqB,MAArBA,EAA6BqJ,KAA7BrJ,CAAmCA,MAAnCA,KAA8C,CAA1D;AACA,sBAAI+F,IAAI,GAAG,KAAKxE,QAAL,CAAcxF,cAAd,EAAX;AAAA,sBACIkL,GAAG,GAAG,CADV;AAAA,sBAEIf,KAAK,GAAG,KAAK3E,QAAL,CAAc4E,WAAd,EAFZ;AAAA,sBAGIC,OAAO,GAAG,KAAK7E,QAAL,CAAc8E,aAAd,EAHd;AAAA,sBAIIiD,OAAO,GAAG,KAAK/H,QAAL,CAAcgI,aAAd,EAJd;;AAKA,uBAAKH,QAAL,CAAc3N,OAAO,CAACsK,IAAD,EAAOC,KAAP,EAAciB,GAAd,EAAmBf,KAAnB,EAA0BE,OAA1B,EAAmCkD,OAAnC,EAA4C,CAA5C,CAArB;AAPF,uBAQO;AACL,uBAAK/H,QAAL,CAAcmC,UAAd,CAAyB,CAAzB;AACA,sBAAIsC,KAAK,GAAGhG,MAAM,CAACP,MAAPO,GAAgBxC,IAAhBwC,CAAqB,MAArBA,EAA6BqJ,KAA7BrJ,CAAmCA,MAAnCA,CAAZ;AACA,uBAAKuB,QAAL,CAAciI,WAAd,CAA0BxD,KAA1B;AACA,uBAAK7J,OAAL,CAAa8G,OAAb,CAAqB;AACnBC,wBAAI,EAAE,aADa;AAEnB5B,wBAAI,EAAE,KAAKC;AAFQ,mBAArB;AAID;AAjBH,qBAkBO,IAAIvB,MAAM,CAAC1C,EAAP0C,CAAU,OAAVA,CAAJ,EAAwB;AAC7B,oBAAI,KAAK1B,OAAL,KAAiB,CAArB,EAAwB;AACtB,sBAAIyH,IAAI,GAAGrF,QAAQ,CAACV,MAAM,CAAC6G,IAAP7G,EAAD,EAAgB,EAAhB,CAARU,IAA+B,CAA1C;AACA,sBAAIsF,KAAK,GAAG,CAAZ;AAAA,sBACIiB,GAAG,GAAG,CADV;AAAA,sBAEIf,KAAK,GAAG,KAAK3E,QAAL,CAAc4E,WAAd,EAFZ;AAAA,sBAGIC,OAAO,GAAG,KAAK7E,QAAL,CAAc8E,aAAd,EAHd;AAAA,sBAIIiD,OAAO,GAAG,KAAK/H,QAAL,CAAcgI,aAAd,EAJd;;AAKA,uBAAKH,QAAL,CAAc3N,OAAO,CAACsK,IAAD,EAAOC,KAAP,EAAciB,GAAd,EAAmBf,KAAnB,EAA0BE,OAA1B,EAAmCkD,OAAnC,EAA4C,CAA5C,CAArB;AAPF,uBAQO;AACL,uBAAK/H,QAAL,CAAcmC,UAAd,CAAyB,CAAzB;AACA,sBAAIqC,IAAI,GAAGrF,QAAQ,CAACV,MAAM,CAAC6G,IAAP7G,EAAD,EAAgB,EAAhB,CAARU,IAA+B,CAA1C;AACA,uBAAKa,QAAL,CAAckI,cAAd,CAA6B1D,IAA7B;AACA,uBAAK5J,OAAL,CAAa8G,OAAb,CAAqB;AACnBC,wBAAI,EAAE,YADa;AAEnB5B,wBAAI,EAAE,KAAKC;AAFQ,mBAArB;AAID;AAjBI,qBAkBA,IAAIvB,MAAM,CAAC1C,EAAP0C,CAAU,OAAVA,CAAJ,EAAwB;AAC7B,oBAAIkG,KAAK,GAAGxF,QAAQ,CAACV,MAAM,CAAC6G,IAAP7G,EAAD,EAAgB,EAAhB,CAARU,IAA+B,CAA3C;AACA,oBAAIqF,IAAI,GAAG,KAAKxE,QAAL,CAAcxF,cAAd,EAAX;AAAA,oBACIiK,KAAK,GAAG,KAAKzE,QAAL,CAAcvF,WAAd,EADZ;AAAA,oBAEIiL,GAAG,GAAG,KAAK1F,QAAL,CAActF,UAAd,EAFV;AAAA,oBAGImK,OAAO,GAAG,KAAK7E,QAAL,CAAc8E,aAAd,EAHd;AAAA,oBAIIiD,OAAO,GAAG,KAAK/H,QAAL,CAAcgI,aAAd,EAJd;;AAKA,qBAAKH,QAAL,CAAc3N,OAAO,CAACsK,IAAD,EAAOC,KAAP,EAAciB,GAAd,EAAmBf,KAAnB,EAA0BE,OAA1B,EAAmCkD,OAAnC,EAA4C,CAA5C,CAArB;AAPK,qBAQA,IAAItJ,MAAM,CAAC1C,EAAP0C,CAAU,SAAVA,CAAJ,EAA0B;AAC/B,oBAAIoG,OAAO,GAAG1F,QAAQ,CAACV,MAAM,CAAC6G,IAAP7G,GAAc0J,MAAd1J,CAAqBA,MAAM,CAAC6G,IAAP7G,GAAc2J,OAAd3J,CAAsB,GAAtBA,IAA6B,CAAlDA,CAAD,EAAuD,EAAvD,CAARU,IAAsE,CAApF;AACA,oBAAIqF,IAAI,GAAG,KAAKxE,QAAL,CAAcxF,cAAd,EAAX;AAAA,oBACIiK,KAAK,GAAG,KAAKzE,QAAL,CAAcvF,WAAd,EADZ;AAAA,oBAEIiL,GAAG,GAAG,KAAK1F,QAAL,CAActF,UAAd,EAFV;AAAA,oBAGIiK,KAAK,GAAG,KAAK3E,QAAL,CAAc4E,WAAd,EAHZ;AAAA,oBAIImD,OAAO,GAAG,KAAK/H,QAAL,CAAcgI,aAAd,EAJd;;AAKA,qBAAKH,QAAL,CAAc3N,OAAO,CAACsK,IAAD,EAAOC,KAAP,EAAciB,GAAd,EAAmBf,KAAnB,EAA0BE,OAA1B,EAAmCkD,OAAnC,EAA4C,CAA5C,CAArB;AACD;;AAGD,kBAAI,KAAK1K,QAAL,IAAiB,CAArB,EAAwB;AAGtB,oBAAIgL,WAAW,GAAG,KAAKhL,QAAvB;AACA,qBAAKiD,QAAL,CAAc,CAAC,CAAf;AACA,qBAAK4D,IAAL;;AACA,oBAAImE,WAAW,IAAI,KAAKhL,QAApBgL,IAAgC,KAAK1J,SAAzC,EAAoD;AAClD,uBAAKZ,IAAL;AACD;AARH,qBASO;AACL,qBAAKmG,IAAL;;AACA,oBAAI,KAAKvF,SAAT,EAAoB;AAClB,uBAAKZ,IAAL;AACD;AACF;AACF;;AACD;;AACF,eAAK,IAAL;AAGE,gBAAIU,MAAM,CAAC1C,EAAP0C,CAAU,MAAVA,KAAqB,CAACA,MAAM,CAAC1C,EAAP0C,CAAU,WAAVA,CAA1B,EAAkD;AAChD,kBAAIiH,GAAG,GAAGvG,QAAQ,CAACV,MAAM,CAAC6G,IAAP7G,EAAD,EAAgB,EAAhB,CAARU,IAA+B,CAAzC;AACA,kBAAIqF,IAAI,GAAG,KAAKxE,QAAL,CAAcxF,cAAd,EAAX;AAAA,kBACIiK,KAAK,GAAG,KAAKzE,QAAL,CAAcvF,WAAd,EADZ;AAAA,kBAEIkK,KAAK,GAAG,KAAK3E,QAAL,CAAc4E,WAAd,EAFZ;AAAA,kBAGIC,OAAO,GAAG,KAAK7E,QAAL,CAAc8E,aAAd,EAHd;AAAA,kBAIIiD,OAAO,GAAG,KAAK/H,QAAL,CAAcgI,aAAd,EAJd;;AAKA,kBAAIvJ,MAAM,CAAC1C,EAAP0C,CAAU,MAAVA,CAAJ,EAAuB;AACrB,oBAAIgG,KAAK,KAAK,CAAd,EAAiB;AACfA,uBAAK,GAAG,EAARA;AACAD,sBAAI,IAAI,CAARA;AAFF,uBAGO;AACLC,uBAAK,IAAI,CAATA;AACD;AANH,qBAOO,IAAIhG,MAAM,CAAC1C,EAAP0C,CAAU,MAAVA,CAAJ,EAAuB;AAC5B,oBAAIgG,KAAK,IAAI,EAAb,EAAiB;AACfA,uBAAK,GAAG,CAARA;AACAD,sBAAI,IAAI,CAARA;AAFF,uBAGO;AACLC,uBAAK,IAAI,CAATA;AACD;AACF;;AACD,mBAAKoD,QAAL,CAAc3N,OAAO,CAACsK,IAAD,EAAOC,KAAP,EAAciB,GAAd,EAAmBf,KAAnB,EAA0BE,OAA1B,EAAmCkD,OAAnC,EAA4C,CAA5C,CAArB;AACD;;AAGD,gBAAIM,WAAW,GAAG,KAAKhL,QAAvB;AAGA,iBAAKiD,QAAL,CAAc,CAAC,CAAf;AAGA,iBAAK4D,IAAL;;AACA,gBAAImE,WAAW,IAAI,KAAKhL,QAApBgL,IAAgC,KAAK1J,SAAzC,EAAoD;AAClD,mBAAKZ,IAAL;AACD;;AACD;AArJF;AAuJD;AAhsBkB;AAmsBrB8J,YAAQ,EAAE,kBAAS9H,IAAT,EAAeuI,KAAf,EAAsB;AAE9B,UAAI,CAACA,KAAD,IAAUA,KAAK,IAAI,MAAvB,EACA;AAAC,aAAKvI,IAAL,GAAYA,IAAZ;AAAkB;;AACnB,UAAI,CAACuI,KAAD,IAAUA,KAAK,IAAI,MAAvB,EACA;AAAC,aAAKtI,QAAL,GAAgBD,IAAhB;AAAsB;;AACvB,WAAKmE,IAAL;AACA,WAAKhE,QAAL;AACA,WAAKtF,OAAL,CAAa8G,OAAb,CAAqB;AACnBC,YAAI,EAAE,YADa;AAEnB5B,YAAI,EAAE,KAAKA;AAFQ,OAArB;AAIA,UAAInF,OAAJ;;AACA,UAAI,KAAKkB,OAAT,EAAkB;AAChBlB,eAAO,GAAG,KAAKA,OAAfA;AADF,aAEO,IAAI,KAAKoB,SAAT,EAAoB;AACzBpB,eAAO,GAAG,KAAKA,OAAL,CAAaqB,IAAb,CAAkB,OAAlB,CAAVrB;AACD;;AACD,UAAIA,OAAJ,EAAa;AACXA,eAAO,CAAC2N,MAAR3N;;AACA,YAAI,KAAK+D,SAAL,KAAmB,CAAC2J,KAAD,IAAUA,KAAK,IAAI,MAAtC,CAAJ,EAAmD,CACjD;AACD;AACF;AA1tBkB;AA6tBrBhB,YAAQ,EAAE,kBAASvH,IAAT,EAAeqH,GAAf,EAAoB;AAC5B,UAAI,CAACA,GAAL,EAAU;AAAC,eAAOrH,IAAP;AAAa;;AACxB,UAAIyI,QAAQ,GAAG,IAAIrO,IAAJ,CAAS4F,IAAI,CAAC2C,OAAL3C,EAAT,CAAf;AACAqH,SAAG,GAAGA,GAAG,GAAG,CAANA,GAAU,CAAVA,GAAc,CAAC,CAArBA;AACAoB,cAAQ,CAACC,WAATD,CAAqBA,QAAQ,CAAC5D,WAAT4D,KAAyBpB,GAA9CoB;AACA,aAAOA,QAAP;AAluBmB;AAquBrBjB,YAAQ,EAAE,kBAASxH,IAAT,EAAeqH,GAAf,EAAoB;AAC5B,UAAI,CAACA,GAAL,EAAU;AAAC,eAAOrH,IAAP;AAAa;;AACxB,UAAIyI,QAAQ,GAAG,IAAIrO,IAAJ,CAAS4F,IAAI,CAAC2C,OAAL3C,EAAT,CAAf;AACAqH,SAAG,GAAGA,GAAG,GAAG,CAANA,GAAU,CAAVA,GAAc,CAAC,CAArBA;AACAoB,cAAQ,CAACrG,UAATqG,CAAoBA,QAAQ,CAAC9N,UAAT8N,KAAwBpB,GAA5CoB;AACA,aAAOA,QAAP;AA1uBmB;AA6uBrBhB,aAAS,EAAE,mBAASzH,IAAT,EAAeqH,GAAf,EAAoB;AAC7B,UAAI,CAACA,GAAL,EAAU;AAAC,eAAOrH,IAAP;AAAa;;AACxB,UAAIyI,QAAQ,GAAG,IAAIrO,IAAJ,CAAS4F,IAAI,CAAC2C,OAAL3C,EAAT,CAAf;AAAA,UACI2F,GAAG,GAAG8C,QAAQ,CAAC9N,UAAT8N,EADV;AAAA,UAEI/D,KAAK,GAAG+D,QAAQ,CAAC/N,WAAT+N,EAFZ;AAAA,UAGIE,GAAG,GAAGnC,IAAI,CAACoC,GAALpC,CAASa,GAATb,CAHV;AAAA,UAIIqC,SAJJ;AAAA,UAIeC,IAJf;AAKAzB,SAAG,GAAGA,GAAG,GAAG,CAANA,GAAU,CAAVA,GAAc,CAAC,CAArBA;;AACA,UAAIsB,GAAG,IAAI,CAAX,EAAc;AACZG,YAAI,GAAGzB,GAAG,IAAI,CAAC,CAARA,CACP;AACA;AAFOA,UAGH,YAAW;AACX,iBAAOoB,QAAQ,CAAC/N,WAAT+N,MAA0B/D,KAAjC;AAJG,UAMP;AACA;AAPO2C,UAQH,YAAW;AACX,iBAAOoB,QAAQ,CAAC/N,WAAT+N,MAA0BI,SAAjC;AATJ;AAWAA,iBAAS,GAAGnE,KAAK,GAAG2C,GAApBwB;AACAJ,gBAAQ,CAACP,WAATO,CAAqBI,SAArBJ,EAbY,CAcZ;;AACA,YAAII,SAAS,GAAG,CAAZA,IAAiBA,SAAS,GAAG,EAAjC,EACA;AAACA,mBAAS,GAAG,CAACA,SAAS,GAAG,EAAb,IAAmB,EAA/BA;AAAmC;AAhBtC,aAiBO;AACL;AACA,aAAK,IAAI3J,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyJ,GAApB,EAAyBzJ,CAAC,EAA1B,EACA;AACA;AAACuJ,kBAAQ,GAAG,KAAKhB,SAAL,CAAegB,QAAf,EAAyBpB,GAAzB,CAAXoB;AAJI,UAKL;;;AACAI,iBAAS,GAAGJ,QAAQ,CAAC/N,WAAT+N,EAAZI;AACAJ,gBAAQ,CAACrG,UAATqG,CAAoB9C,GAApB8C;;AACAK,YAAI,GAAG,gBAAW;AAChB,iBAAOD,SAAS,IAAIJ,QAAQ,CAAC/N,WAAT+N,EAApB;AADF;AAjC2B,QAqC7B;AACA;;;AACA,aAAOK,IAAI,EAAX,EAAe;AACbL,gBAAQ,CAACrG,UAATqG,CAAoB,EAAE9C,GAAtB8C;AACAA,gBAAQ,CAACP,WAATO,CAAqBI,SAArBJ;AACD;;AACD,aAAOA,QAAP;AAxxBmB;AA2xBrBf,YAAQ,EAAE,kBAAS1H,IAAT,EAAeqH,GAAf,EAAoB;AAC5B,aAAO,KAAKI,SAAL,CAAezH,IAAf,EAAqBqH,GAAG,GAAG,EAA3B,CAAP;AA5xBmB;AA+xBrB0B,mBAAe,EAAE,yBAAS/I,IAAT,EAAe;AAC9B,aAAOA,IAAI,IAAI,KAAKT,SAAbS,IAA0BA,IAAI,IAAI,KAAKP,OAA9C;AAhyBmB;AAmyBrBsB,WAAO,EAAE,iBAAStC,CAAT,EAAY;AACnB,UAAI,CAAC,KAAKI,kBAAV,EAA8B;AAC5B,eAAO,IAAP;AACD;;AACD,UAAI,KAAKpB,MAAL,CAAYzB,EAAZ,CAAe,gBAAf,CAAJ,EAAsC;AACpC,YAAIyC,CAAC,CAACuK,OAAFvK,IAAa,EAAjB,EAAqB;AACrB;AAAC,iBAAKV,IAAL;AAAa;;AACd;AACD;;AACD,UAAIkL,WAAW,GAAG,KAAlB;AAAA,UACItD,GADJ;AAAA,UACS0B,GADT;AAAA,UACc3C,KADd;AAAA,UAEIwE,OAFJ;AAAA,UAEaC,WAFb;;AAGA,cAAQ1K,CAAC,CAACuK,OAAV;AACA,aAAK,EAAL;AAAS;AACP,eAAKhL,IAAL;AACAS,WAAC,CAACwC,cAAFxC;AACA;;AACF,aAAK,EAAL,CALA,CAKS;;AACT,aAAK,EAAL;AAAS;AACP,cAAI,CAAC,KAAKI,kBAAV,EAA8B;AAAC;AAAO;;AACtCwI,aAAG,GAAG5I,CAAC,CAACuK,OAAFvK,IAAa,EAAbA,GAAkB,CAAC,CAAnBA,GAAuB,CAA7B4I;;AACA,cAAI5I,CAAC,CAAC2K,OAAN,EAAe;AACbF,mBAAO,GAAG,KAAKxB,QAAL,CAAc,KAAK1H,IAAnB,EAAyBqH,GAAzB,CAAV6B;AACAC,uBAAW,GAAG,KAAKzB,QAAL,CAAc,KAAKzH,QAAnB,EAA6BoH,GAA7B,CAAd8B;AAFF,iBAGO,IAAI1K,CAAC,CAAC4K,QAAN,EAAgB;AACrBH,mBAAO,GAAG,KAAKzB,SAAL,CAAe,KAAKzH,IAApB,EAA0BqH,GAA1B,CAAV6B;AACAC,uBAAW,GAAG,KAAK1B,SAAL,CAAe,KAAKxH,QAApB,EAA8BoH,GAA9B,CAAd8B;AAFK,iBAGA;AACLD,mBAAO,GAAG,IAAI9O,IAAJ,CAAS,KAAK4F,IAAL,CAAU2C,OAAV,EAAT,CAAVuG;AACAA,mBAAO,CAAC9G,UAAR8G,CAAmB,KAAKlJ,IAAL,CAAUrF,UAAV,KAAyB0M,GAA5C6B;AACAC,uBAAW,GAAG,IAAI/O,IAAJ,CAAS,KAAK6F,QAAL,CAAc0C,OAAd,EAAT,CAAdwG;AACAA,uBAAW,CAAC/G,UAAZ+G,CAAuB,KAAKlJ,QAAL,CAActF,UAAd,KAA6B0M,GAApD8B;AACD;;AACD,cAAI,KAAKJ,eAAL,CAAqBG,OAArB,CAAJ,EAAmC;AACjC,iBAAKlJ,IAAL,GAAYkJ,OAAZ;AACA,iBAAKjJ,QAAL,GAAgBkJ,WAAhB;AACA,iBAAKhJ,QAAL;AACA,iBAAKG,MAAL;AACA7B,aAAC,CAACwC,cAAFxC;AACAwK,uBAAW,GAAG,IAAdA;AACD;;AACD;;AACF,aAAK,EAAL,CA9BA,CA8BS;;AACT,aAAK,EAAL;AAAS;AACP,cAAI,CAAC,KAAKpK,kBAAV,EAA8B;AAAC;AAAO;;AACtCwI,aAAG,GAAG5I,CAAC,CAACuK,OAAFvK,IAAa,EAAbA,GAAkB,CAAC,CAAnBA,GAAuB,CAA7B4I;;AACA,cAAI5I,CAAC,CAAC2K,OAAN,EAAe;AACbF,mBAAO,GAAG,KAAKxB,QAAL,CAAc,KAAK1H,IAAnB,EAAyBqH,GAAzB,CAAV6B;AACAC,uBAAW,GAAG,KAAKzB,QAAL,CAAc,KAAKzH,QAAnB,EAA6BoH,GAA7B,CAAd8B;AAFF,iBAGO,IAAI1K,CAAC,CAAC4K,QAAN,EAAgB;AACrBH,mBAAO,GAAG,KAAKzB,SAAL,CAAe,KAAKzH,IAApB,EAA0BqH,GAA1B,CAAV6B;AACAC,uBAAW,GAAG,KAAK1B,SAAL,CAAe,KAAKxH,QAApB,EAA8BoH,GAA9B,CAAd8B;AAFK,iBAGA;AACLD,mBAAO,GAAG,IAAI9O,IAAJ,CAAS,KAAK4F,IAAL,CAAU2C,OAAV,EAAT,CAAVuG;AACAA,mBAAO,CAAC9G,UAAR8G,CAAmB,KAAKlJ,IAAL,CAAUrF,UAAV,KAAyB0M,GAAG,GAAG,CAAlD6B;AACAC,uBAAW,GAAG,IAAI/O,IAAJ,CAAS,KAAK6F,QAAL,CAAc0C,OAAd,EAAT,CAAdwG;AACAA,uBAAW,CAAC/G,UAAZ+G,CAAuB,KAAKlJ,QAAL,CAActF,UAAd,KAA6B0M,GAAG,GAAG,CAA1D8B;AACD;;AACD,cAAI,KAAKJ,eAAL,CAAqBG,OAArB,CAAJ,EAAmC;AACjC,iBAAKlJ,IAAL,GAAYkJ,OAAZ;AACA,iBAAKjJ,QAAL,GAAgBkJ,WAAhB;AACA,iBAAKhJ,QAAL;AACA,iBAAKG,MAAL;AACA7B,aAAC,CAACwC,cAAFxC;AACAwK,uBAAW,GAAG,IAAdA;AACD;;AACD;;AACF,aAAK,EAAL;AAAS;AACP,eAAKjL,IAAL;AACAS,WAAC,CAACwC,cAAFxC;AACA;;AACF,aAAK,CAAL;AAAQ;AACN,eAAKT,IAAL;AACA;AA7DF;;AA+DA,UAAIiL,WAAJ,EAAiB;AACf,aAAKpO,OAAL,CAAa8G,OAAb,CAAqB;AACnBC,cAAI,EAAE,YADa;AAEnB5B,cAAI,EAAE,KAAKA;AAFQ,SAArB;AAIA,YAAInF,OAAJ;;AACA,YAAI,KAAKkB,OAAT,EAAkB;AAChBlB,iBAAO,GAAG,KAAKA,OAAfA;AADF,eAEO,IAAI,KAAKoB,SAAT,EAAoB;AACzBpB,iBAAO,GAAG,KAAKA,OAAL,CAAaqB,IAAb,CAAkB,OAAlB,CAAVrB;AACD;;AACD,YAAIA,OAAJ,EAAa;AACXA,iBAAO,CAAC2N,MAAR3N;AACD;AACF;AA53BkB;AA+3BrB0F,YAAQ,EAAE,kBAAS8G,GAAT,EAAc;AAEtB,UAAIA,GAAJ,EAAS;AACP,YAAIiC,WAAW,GAAG9C,IAAI,CAAC+C,GAAL/C,CAAS,CAATA,EAAYA,IAAI,CAACgD,GAALhD,CAAS7K,QAAQ,CAACwB,KAATxB,CAAeS,MAAfT,GAAwB,CAAjC6K,EAAoC,KAAKlJ,QAAL,GAAgB+J,GAApDb,CAAZA,CAAlB;;AACA,YAAI8C,WAAW,IAAI,KAAKtM,OAApBsM,IAA+BA,WAAW,IAAI,KAAKpM,OAAvD,EAAgE;AAC9D,eAAKI,QAAL,GAAgBgM,WAAhB;AACD;AACF;AAED;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AAEM;;;AACA,WAAK7L,MAAL,CAAYvB,IAAZ,CAAiB,MAAjB,EAAyB8B,IAAzB,GAAgCyL,MAAhC,uBAAsD9N,QAAQ,CAACwB,KAATxB,CAAe,KAAK2B,QAApB3B,EAA8BoK,OAApF,GAA+FjD,GAA/F,CAAmG,SAAnG,EAA8G,OAA9G;AACA,WAAKN,eAAL;AAn5BmB;AAs5BrBkH,kBAAc,EAAE,wBAAS1J,IAAT,EAAe;AAC7B,WAAKA,IAAL,GAAYA,IAAZ;AACA,WAAKC,QAAL,GAAgBD,IAAhB;AACA,WAAKmE,IAAL;AAz5BmB;AA45BrBwF,SAAK,EAAE,eAASlL,CAAT,EAAY;AACjB,WAAKqJ,QAAL,CAAc,IAAd,EAAoB,MAApB;AACD;AA95BoB,GAAvBlN;;AAi6BAV,GAAC,CAAC0P,EAAF1P,CAAK2P,WAAL3P,GAAmB,UAAS4P,MAAT,EAAiB;AAClC,QAAIC,IAAI,GAAGC,KAAK,MAALA,SAAS1P,SAAT0P,CAAX;AACAD,QAAI,CAACE,KAALF;AACA,WAAO,KAAK7L,IAAL,CAAU,YAAW;AAC1B,UAAIgM,KAAK,GAAGhQ,CAAC,CAAC,IAAD,CAAb;AAAA,UACImB,IAAI,GAAG6O,KAAK,CAAC7O,IAAN6O,CAAW,YAAXA,CADX;AAAA,UAEIpP,OAAO,GAAGqP,QAAOL,MAAP,MAAkB,QAAlB,IAA8BA,MAF5C;;AAGA,UAAI,CAACzO,IAAL,EAAW;AACT6O,aAAK,CAAC7O,IAAN6O,CAAW,YAAXA,EAA0B7O,IAAI,GAAG,IAAIT,UAAJ,CAAe,IAAf,EAAqBV,CAAC,CAACkQ,MAAFlQ,CAAS,EAATA,EAAaA,CAAC,CAAC0P,EAAF1P,CAAK2P,WAAL3P,CAAiBmQ,QAA9BnQ,EAAwCY,OAAxCZ,CAArB,CAAjCgQ;AACD;;AACD,UAAI,OAAOJ,MAAP,KAAkB,QAAlB,IAA8B,OAAOzO,IAAI,CAACyO,MAAD,CAAX,KAAwB,UAA1D,EAAsE;AAAA;;AACpE,uBAAKA,MAAL,kCAAgBC,IAAhB;AACD;AATI,MAAP;AAHF;;AAgBA7P,GAAC,CAAC0P,EAAF1P,CAAK2P,WAAL3P,CAAiBmQ,QAAjBnQ,GAA4B;AAC1BoC,YAAQ,EAAE,kBAAS0D,IAAT,EAAe;AACvB,aAAO,EAAP;AACD;AAHyB,GAA5B9F;AAKAA,GAAC,CAAC0P,EAAF1P,CAAK2P,WAAL3P,CAAiBoQ,WAAjBpQ,GAA+BU,UAA/BV;AACA,MAAIoB,KAAK,GAAGpB,CAAC,CAAC0P,EAAF1P,CAAK2P,WAAL3P,CAAiBoB,KAAjBpB,GAAyB;AACnC,UAAM;AACJqQ,UAAI,EAAE,CAAC,QAAD,EAAW,QAAX,EAAqB,SAArB,EAAgC,WAAhC,EAA6C,UAA7C,EAAyD,QAAzD,EAAmE,UAAnE,EAA+E,QAA/E,CADF;AAEJC,eAAS,EAAE,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkD,KAAlD,CAFP;AAGJjG,aAAO,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,EAA2C,IAA3C,CAHL;AAIJiB,YAAM,EAAE,CAAC,SAAD,EAAY,UAAZ,EAAwB,OAAxB,EAAiC,OAAjC,EAA0C,KAA1C,EAAiD,MAAjD,EAAyD,MAAzD,EAAiE,QAAjE,EAA2E,WAA3E,EAAwF,SAAxF,EAAmG,UAAnG,EAA+G,UAA/G,CAJJ;AAKJhB,iBAAW,EAAE,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkD,KAAlD,EAAyD,KAAzD,EAAgE,KAAhE,EAAuE,KAAvE,EAA8E,KAA9E,CALT;AAMJhK,WAAK,EAAE,OANH;AAOJ6K,iBAAW,EAAE;AAPT;AAD6B,GAArC;AAYA,MAAI1J,QAAQ,GAAG;AACbwB,SAAK,EAAE,CAAC;AACN4I,aAAO,EAAE,SADH;AAEN0E,YAAM,EAAE,OAFF;AAGNnD,aAAO,EAAE;AAHH,KAAD,EAIJ;AACDvB,aAAO,EAAE,OADR;AAED0E,YAAM,EAAE,MAFP;AAGDnD,aAAO,EAAE;AAHR,KAJI,EAQJ;AACDvB,aAAO,EAAE,MADR;AAED0E,YAAM,EAAE,OAFP;AAGDnD,aAAO,EAAE;AAHR,KARI,EAYJ;AACDvB,aAAO,EAAE,QADR;AAED0E,YAAM,EAAE,UAFP;AAGDnD,aAAO,EAAE;AAHR,KAZI,EAgBJ;AACDvB,aAAO,EAAE,OADR;AAED0E,YAAM,EAAE,UAFP;AAGDnD,aAAO,EAAE;AAHR,KAhBI,CADM;AAsBboD,cAAU,EAAE,oBAASjG,IAAT,EAAe;AACzB,aAAUA,IAAI,GAAG,CAAPA,KAAa,CAAbA,IAAoBA,IAAI,GAAG,GAAPA,KAAe,CAAnCA,IAA2CA,IAAI,GAAG,GAAPA,KAAe,CAApE;AAvBW;AAyBbmB,kBAAc,EAAE,wBAASnB,IAAT,EAAeC,KAAf,EAAsB;AACpC,aAAO,CAAC,EAAD,EAAM/I,QAAQ,CAAC+O,UAAT/O,CAAoB8I,IAApB9I,IAA4B,EAA5BA,GAAiC,EAAvC,EAA4C,EAA5C,EAAgD,EAAhD,EAAoD,EAApD,EAAwD,EAAxD,EAA4D,EAA5D,EAAgE,EAAhE,EAAoE,EAApE,EAAwE,EAAxE,EAA4E,EAA5E,EAAgF,EAAhF,EAAoF+I,KAApF,CAAP;AA1BW;AA4BbiG,cAAU,EAAE,oCA5BC;AA6BbC,kBAAc,EAAE,wCA7BH;AA8BbhP,eAAW,EAAE,qBAASF,MAAT,EAAiB;AAC5B;AACA;AACA,UAAImP,UAAU,GAAGnP,MAAM,CAACoP,OAAPpP,CAAe,KAAKiP,UAApBjP,EAAgC,IAAhCA,EAAsCH,KAAtCG,CAA4C,IAA5CA,CAAjB;AAAA,UACIqP,KAAK,GAAGrP,MAAM,CAACsP,KAAPtP,CAAa,KAAKiP,UAAlBjP,CADZ;;AAEA,UAAI,CAACmP,UAAD,IAAe,CAACA,UAAU,CAACzO,MAA3B,IAAqC,CAAC2O,KAAtC,IAA+CA,KAAK,CAAC3O,MAAN2O,KAAiB,CAApE,EAAuE;AACrE,cAAM,IAAIE,KAAJ,CAAU,sBAAV,CAAN;AACD;;AACD,WAAKpP,UAAL,GAAkBH,MAAlB;AACA,aAAO;AACLmP,kBAAU,EAAEA,UADP;AAELE,aAAK,EAAEA;AAFF,OAAP;AAvCW;AA4Cb7K,aAAS,EAAE,mBAASF,IAAT,EAAetE,MAAf,EAAuBN,QAAvB,EAAiC;AAC1C,UAAI4E,IAAI,YAAY5F,IAApB,EAA0B;AAAC,eAAO,IAAIA,IAAJ,CAAS4F,IAAI,CAAC2C,OAAL3C,KAAiBA,IAAI,CAACkC,iBAALlC,KAA2B,KAArD,CAAP;AAAoE;;AAC/F,UAAI,4BAA4B8I,IAA5B,CAAiC9I,IAAjC,CAAJ,EAA4C;AAC1CtE,cAAM,GAAG,KAAKE,WAAL,CAAiB,YAAjB,CAATF;AACD;;AACD,UAAI,gDAAgDoN,IAAhD,CAAqD9I,IAArD,CAAJ,EAAgE;AAC9DtE,cAAM,GAAG,KAAKE,WAAL,CAAiB,kBAAjB,CAATF;AACD;;AACD,UAAI,iEAAiEoN,IAAjE,CAAsE9I,IAAtE,CAAJ,EAAiF;AAC/EtE,cAAM,GAAG,KAAKE,WAAL,CAAiB,qBAAjB,CAATF;AACD;;AACD,UAAI,wCAAwCoN,IAAxC,CAA6C9I,IAA7C,CAAJ,EAAwD;AACtD,YAAIkL,OAAO,GAAG,mBAAd;AAAA,YACIH,KAAK,GAAG/K,IAAI,CAACgL,KAALhL,CAAW,oBAAXA,CADZ;AAAA,YAEImL,IAFJ;AAAA,YAEU9D,GAFV;AAGArH,YAAI,GAAG,IAAI5F,IAAJ,EAAP4F;;AACA,aAAK,IAAId,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6L,KAAK,CAAC3O,MAA1B,EAAkC8C,CAAC,EAAnC,EAAuC;AACrCiM,cAAI,GAAGD,OAAO,CAACE,IAARF,CAAaH,KAAK,CAAC7L,CAAD,CAAlBgM,CAAPC;AACA9D,aAAG,GAAGjI,QAAQ,CAAC+L,IAAI,CAAC,CAAD,CAAL,CAAd9D;;AACA,kBAAQ8D,IAAI,CAAC,CAAD,CAAZ;AACA,iBAAK,GAAL;AACEnL,kBAAI,CAACoC,UAALpC,CAAgBA,IAAI,CAACrF,UAALqF,KAAoBqH,GAApCrH;AACA;;AACF,iBAAK,GAAL;AACEA,kBAAI,GAAGqL,cAAc,CAAC5K,SAAf4K,CAAyB5D,SAAzB4D,CAAmCC,IAAnCD,CAAwCA,cAAc,CAAC5K,SAAvD4K,EAAkErL,IAAlEqL,EAAwEhE,GAAxEgE,CAAPrL;AACA;;AACF,iBAAK,GAAL;AACEA,kBAAI,CAACoC,UAALpC,CAAgBA,IAAI,CAACrF,UAALqF,KAAoBqH,GAAG,GAAG,CAA1CrH;AACA;;AACF,iBAAK,GAAL;AACEA,kBAAI,GAAGqL,cAAc,CAAC5K,SAAf4K,CAAyB3D,QAAzB2D,CAAkCC,IAAlCD,CAAuCA,cAAc,CAAC5K,SAAtD4K,EAAiErL,IAAjEqL,EAAuEhE,GAAvEgE,CAAPrL;AACA;AAZF;AAcD;;AACD,eAAO7F,OAAO,CAAC6F,IAAI,CAACvF,cAALuF,EAAD,EAAwBA,IAAI,CAACtF,WAALsF,EAAxB,EAA4CA,IAAI,CAACrF,UAALqF,EAA5C,EAA+DA,IAAI,CAAC6E,WAAL7E,EAA/D,EAAmFA,IAAI,CAAC+E,aAAL/E,EAAnF,EAAyGA,IAAI,CAACiI,aAALjI,EAAzG,CAAd;AACD;;AACD,UAAI+K,KAAK,GAAG/K,IAAI,IAAIA,IAAI,CAACgL,KAALhL,CAAW,KAAK4K,cAAhB5K,CAARA,IAA2C,EAAvD;AAAA,UACIA,IAAI,GAAG,IAAI5F,IAAJ,EADX;AAAA,UAEImR,MAAM,GAAG,EAFb;AAAA,UAGIC,aAAa,GAAG,CAAC,IAAD,EAAO,GAAP,EAAY,IAAZ,EAAkB,GAAlB,EAAuB,IAAvB,EAA6B,GAA7B,EAAkC,MAAlC,EAA0C,IAA1C,EAAgD,GAAhD,EAAqD,IAArD,EAA2D,GAA3D,EAAgE,IAAhE,EAAsE,GAAtE,EAA2E,IAA3E,CAHpB;AAAA,UAIIC,WAAW,GAAG;AACZC,UAAE,EAAE,YAAS1J,CAAT,EAAY2J,CAAZ,EAAe;AACjB,iBAAO3J,CAAC,CAAC0G,WAAF1G,CAAc2J,CAAd3J,CAAP;AAFU;AAIZ4J,SAAC,EAAE,WAAS5J,CAAT,EAAY2J,CAAZ,EAAe;AAChB,iBAAO3J,CAAC,CAAC0G,WAAF1G,CAAc2J,CAAd3J,CAAP;AALU;AAOZ6J,UAAE,EAAE,YAAS7J,CAAT,EAAY2J,CAAZ,EAAe;AACjB,iBAAO3J,CAAC,CAAC8J,aAAF9J,CAAgB2J,CAAhB3J,CAAP;AARU;AAUZ9C,SAAC,EAAE,WAAS8C,CAAT,EAAY2J,CAAZ,EAAe;AAChB,iBAAO3J,CAAC,CAAC8J,aAAF9J,CAAgB2J,CAAhB3J,CAAP;AAXU;AAaZ+J,UAAE,EAAE,YAAS/J,CAAT,EAAY2J,CAAZ,EAAe;AACjB,iBAAO3J,CAAC,CAACgK,aAAFhK,CAAgB2J,CAAhB3J,CAAP;AAdU;AAgBZiK,SAAC,EAAE,WAASjK,CAAT,EAAY2J,CAAZ,EAAe;AAChB,iBAAO3J,CAAC,CAACgK,aAAFhK,CAAgB2J,CAAhB3J,CAAP;AAjBU;AAmBZkK,YAAI,EAAE,cAASlK,CAAT,EAAY2J,CAAZ,EAAe;AACnB,iBAAO3J,CAAC,CAACmG,cAAFnG,CAAiB2J,CAAjB3J,CAAP;AApBU;AAsBZmK,UAAE,EAAE,YAASnK,CAAT,EAAY2J,CAAZ,EAAe;AACjB,iBAAO3J,CAAC,CAACmG,cAAFnG,CAAiB,OAAO2J,CAAxB3J,CAAP;AAvBU;AAyBZoK,SAAC,EAAE,WAASpK,CAAT,EAAY2J,CAAZ,EAAe;AAChBA,WAAC,IAAI,CAALA;;AACA,iBAAOA,CAAC,GAAG,CAAX,EAAc;AAACA,aAAC,IAAI,EAALA;AAAS;;AACxBA,WAAC,IAAI,EAALA;AACA3J,WAAC,CAACkG,WAAFlG,CAAc2J,CAAd3J;;AACA,iBAAOA,CAAC,CAACtH,WAAFsH,MAAmB2J,CAA1B,EACA;AAAC3J,aAAC,CAACI,UAAFJ,CAAaA,CAAC,CAACrH,UAAFqH,KAAiB,CAA9BA;AAAkC;;AACnC,iBAAOA,CAAP;AAhCU;AAkCZA,SAAC,EAAE,WAASA,EAAT,EAAY2J,CAAZ,EAAe;AAChB,iBAAO3J,EAAC,CAACI,UAAFJ,CAAa2J,CAAb3J,CAAP;AACD;AApCW,OAJlB;AAAA,UA0CI7C,GA1CJ;AAAA,UA0CSkN,QA1CT;AAAA,UA0CmBlB,IA1CnB;AA2CAM,iBAAW,CAACa,CAAZb,GAAgBA,WAAW,CAACc,EAAZd,GAAiBA,WAAW,CAACe,EAAZf,GAAiBA,WAAW,CAACW,CAA9DX;AACAA,iBAAW,CAACgB,EAAZhB,GAAiBA,WAAW,CAACzJ,CAA7ByJ;AACAzL,UAAI,GAAG7F,OAAO,CAAC6F,IAAI,CAACiG,WAALjG,EAAD,EAAqBA,IAAI,CAACmG,QAALnG,EAArB,EAAsCA,IAAI,CAAC+B,OAAL/B,EAAtC,EAAsD,CAAtD,EAAyD,CAAzD,EAA4D,CAA5D,CAAdA,CAjF0C,CAiFoC;;AAC9E,UAAI+K,KAAK,CAAC3O,MAAN2O,IAAgBrP,MAAM,CAACqP,KAAPrP,CAAaU,MAAjC,EAAyC;AACvC,aAAK,IAAI8C,CAAC,GAAG,CAAR,EAAWwN,GAAG,GAAGhR,MAAM,CAACqP,KAAPrP,CAAaU,MAAnC,EAA2C8C,CAAC,GAAGwN,GAA/C,EAAoDxN,CAAC,EAArD,EAAyD;AACvDC,aAAG,GAAGC,QAAQ,CAAC2L,KAAK,CAAC7L,CAAD,CAAN,EAAW,EAAX,CAAdC;AACAgM,cAAI,GAAGzP,MAAM,CAACqP,KAAPrP,CAAawD,CAAbxD,CAAPyP;;AACA,cAAIwB,KAAK,CAACxN,GAAD,CAAT,EAAgB;AACd,oBAAQgM,IAAR;AACA,mBAAK,IAAL;AACEkB,wBAAQ,GAAGnS,CAAC,CAACoB,KAAK,CAACF,QAAD,CAALE,CAAgBkK,MAAjB,CAADtL,CAA0BuP,MAA1BvP,CAAiC,YAAW;AACrD,sBAAIkS,CAAC,GAAG,KAAKvF,KAAL,CAAW,CAAX,EAAckE,KAAK,CAAC7L,CAAD,CAAL6L,CAAS3O,MAAvB,CAAR;AAAA,sBACIwQ,CAAC,GAAG7B,KAAK,CAAC7L,CAAD,CAAL6L,CAASlE,KAATkE,CAAe,CAAfA,EAAkBqB,CAAC,CAAChQ,MAApB2O,CADR;AAEA,yBAAOqB,CAAC,IAAIQ,CAAZ;AAHS,kBAAXP;AAKAlN,mBAAG,GAAGjF,CAAC,CAACkM,OAAFlM,CAAUmS,QAAQ,CAAC,CAAD,CAAlBnS,EAAuBoB,KAAK,CAACF,QAAD,CAALE,CAAgBkK,MAAvCtL,IAAiD,CAAvDiF;AACA;;AACF,mBAAK,GAAL;AACEkN,wBAAQ,GAAGnS,CAAC,CAACoB,KAAK,CAACF,QAAD,CAALE,CAAgBkJ,WAAjB,CAADtK,CAA+BuP,MAA/BvP,CAAsC,YAAW;AAC1D,sBAAIkS,CAAC,GAAG,KAAKvF,KAAL,CAAW,CAAX,EAAckE,KAAK,CAAC7L,CAAD,CAAL6L,CAAS3O,MAAvB,CAAR;AAAA,sBACIwQ,CAAC,GAAG7B,KAAK,CAAC7L,CAAD,CAAL6L,CAASlE,KAATkE,CAAe,CAAfA,EAAkBqB,CAAC,CAAChQ,MAApB2O,CADR;AAEA,yBAAOqB,CAAC,IAAIQ,CAAZ;AAHS,kBAAXP;AAKAlN,mBAAG,GAAGjF,CAAC,CAACkM,OAAFlM,CAAUmS,QAAQ,CAAC,CAAD,CAAlBnS,EAAuBoB,KAAK,CAACF,QAAD,CAALE,CAAgBkJ,WAAvCtK,IAAsD,CAA5DiF;AACA;AAhBF;AAkBD;;AACDoM,gBAAM,CAACJ,IAAD,CAANI,GAAepM,GAAfoM;AACD;;AACD,aAAK,IAAIrM,CAAC,GAAG,CAAR,EAAW+M,CAAhB,EAAmB/M,CAAC,GAAGsM,aAAa,CAACpP,MAArC,EAA6C8C,CAAC,EAA9C,EAAkD;AAChD+M,WAAC,GAAGT,aAAa,CAACtM,CAAD,CAAjB+M;;AACA,cAAIA,CAAC,IAAIV,MAALU,IAAe,CAACU,KAAK,CAACpB,MAAM,CAACU,CAAD,CAAP,CAAzB,EACA;AAACR,uBAAW,CAACQ,CAAD,CAAXR,CAAezL,IAAfyL,EAAqBF,MAAM,CAACU,CAAD,CAA3BR;AAAgC;AAClC;AACF;;AACD,aAAOzL,IAAP;AA9JW;AAgKbuC,cAAU,EAAE,oBAASvC,IAAT,EAAetE,MAAf,EAAuBN,QAAvB,EAAiC;AAC3C,UAAI4E,IAAI,IAAI,IAAZ,EAAkB;AAChB,eAAO,EAAP;AACD;;AACD,UAAIb,GAAG,GAAG;AACRyM,SAAC,EAAE5L,IAAI,CAAC6E,WAAL7E,EADK;AAERd,SAAC,EAAEc,IAAI,CAAC+E,aAAL/E,EAFK;AAGRiM,SAAC,EAAEjM,IAAI,CAACiI,aAALjI,EAHK;AAIRgC,SAAC,EAAEhC,IAAI,CAACrF,UAALqF,EAJK;AAKRoM,SAAC,EAAEpM,IAAI,CAACtF,WAALsF,KAAqB,CALhB;AAMRsM,SAAC,EAAEhR,KAAK,CAACF,QAAD,CAALE,CAAgBkJ,WAAhBlJ,CAA4B0E,IAAI,CAACtF,WAALsF,EAA5B1E,CANK;AAORiR,UAAE,EAAEjR,KAAK,CAACF,QAAD,CAALE,CAAgBkK,MAAhBlK,CAAuB0E,IAAI,CAACtF,WAALsF,EAAvB1E,CAPI;AAQR6Q,UAAE,EAAEnM,IAAI,CAACvF,cAALuF,GAAsB6M,QAAtB7M,GAAiC8M,SAAjC9M,CAA2C,CAA3CA,CARI;AASRkM,YAAI,EAAElM,IAAI,CAACvF,cAALuF;AATE,OAAV;AAWAb,SAAG,CAACuM,EAAJvM,GAAS,CAACA,GAAG,CAACyM,CAAJzM,GAAQ,EAARA,GAAa,GAAbA,GAAmB,EAApB,IAA0BA,GAAG,CAACyM,CAAvCzM;AACAA,SAAG,CAAC0M,EAAJ1M,GAAS,CAACA,GAAG,CAACD,CAAJC,GAAQ,EAARA,GAAa,GAAbA,GAAmB,EAApB,IAA0BA,GAAG,CAACD,CAAvCC;AACAA,SAAG,CAAC4M,EAAJ5M,GAAS,CAACA,GAAG,CAAC8M,CAAJ9M,GAAQ,EAARA,GAAa,GAAbA,GAAmB,EAApB,IAA0BA,GAAG,CAAC8M,CAAvC9M;AACAA,SAAG,CAACsN,EAAJtN,GAAS,CAACA,GAAG,CAAC6C,CAAJ7C,GAAQ,EAARA,GAAa,GAAbA,GAAmB,EAApB,IAA0BA,GAAG,CAAC6C,CAAvC7C;AACAA,SAAG,CAACqN,EAAJrN,GAAS,CAACA,GAAG,CAACiN,CAAJjN,GAAQ,EAARA,GAAa,GAAbA,GAAmB,EAApB,IAA0BA,GAAG,CAACiN,CAAvCjN;AACA,UAAIa,IAAI,GAAG,EAAX;AAAA,UACI+M,IAAI,GAAG7S,CAAC,CAACkQ,MAAFlQ,CAAS,EAATA,EAAawB,MAAM,CAACmP,UAApB3Q,CADX;;AAEA,WAAK,IAAIgF,CAAC,GAAG,CAAR,EAAWwN,GAAG,GAAGhR,MAAM,CAACqP,KAAPrP,CAAaU,MAAnC,EAA2C8C,CAAC,GAAGwN,GAA/C,EAAoDxN,CAAC,EAArD,EAAyD;AACvD,YAAI6N,IAAI,CAAC3Q,MAAT,EACA;AAAC4D,cAAI,CAAC+C,IAAL/C,CAAU+M,IAAI,CAAC9C,KAAL8C,EAAV/M;AAAwB;;AACzBA,YAAI,CAAC+C,IAAL/C,CAAUb,GAAG,CAACzD,MAAM,CAACqP,KAAPrP,CAAawD,CAAbxD,CAAD,CAAbsE;AACD;;AACD,aAAOA,IAAI,CAACsG,IAALtG,CAAU,EAAVA,CAAP;AA3LW;AA6Lb/C,mBAAe,EAAE,yBAASK,QAAT,EAAmB;AAClC,cAAQA,QAAR;AACA,aAAK,CAAL;AACA,aAAK,QAAL;AACEA,kBAAQ,GAAG,CAAXA;AACA;;AACF,aAAK,CAAL;AACA,aAAK,MAAL;AACEA,kBAAQ,GAAG,CAAXA;AACA;;AACF,aAAK,CAAL;AACA,aAAK,OAAL;AACEA,kBAAQ,GAAG,CAAXA;AACA;;AACF,aAAK,CAAL;AACA,aAAK,KAAL;AACEA,kBAAQ,GAAG,CAAXA;AACA;;AACF,aAAK,CAAL;AACA,aAAK,MAAL;AACEA,kBAAQ,GAAG,CAAXA;AACA;AApBF;;AAuBA,aAAOA,QAAP;AArNW;AAuNb0P,gBAAY,EAAE,sBAASnQ,SAAT,EAAoBC,UAApB,EAAgC;AAAC,aAAQ,UAAG,YAClD,MADkD,GAElD,mBAF+C,SAEzBD,SAFyB,aAG/C,+CAH+C,gCAI3BC,UAJ2B,aAK/C,OAL+C,GAM/C,UANuC;AAvNlC;AA8NbmQ,gBAAY,EAAE,+CA9ND;AA+NbC,gBAAY,EAAE;AA/ND,GAAf;;AAiOAvR,UAAQ,CAAC+B,QAAT/B,GAAoB,UAASkB,SAAT,EAAoBC,UAApB,EAAgCC,SAAhC,EAA2C;AAAC,WAAQ,UAAG,6BACrE,kCADqE,GAErE,kCAFkE,SAGtEpB,QAAQ,CAACqR,YAATrR,CAAsBkB,SAAtBlB,EAAiCmB,UAAjCnB,CAHsE,SAIrEA,QAAQ,CAACsR,YAJ4D,SAKrEtR,QAAQ,CAACuR,YAL4D,gBAOlE,QAPkE,GAQlE,kCARkE,+CAUhEvR,QAAQ,CAACqR,YAATrR,CAAsBkB,SAAtBlB,EAAiCmB,UAAjCnB,CAVgE,SAW/DA,QAAQ,CAACsR,YAXsD,SAY/DtR,QAAQ,CAACuR,YAZsD,gBAclE,QAdkE,GAelE,iCAfkE,+CAiBhEvR,QAAQ,CAACqR,YAATrR,CAAsBkB,SAAtBlB,EAAiCmB,UAAjCnB,CAjBgE,4BAmBhEA,QAAQ,CAACuR,YAnBuD,gBAqBlE,QArBkE,GAsBlE,mCAtBkE,8CAwBhEvR,QAAQ,CAACqR,YAATrR,CAAsBkB,SAAtBlB,EAAiCmB,UAAjCnB,CAxBgE,SAyB/DA,QAAQ,CAACsR,YAzBsD,SA0B/DtR,QAAQ,CAACuR,YA1BsD,gBA4BlE,QA5BkE,GA6BlE,kCA7BkE,8CA+BhEvR,QAAQ,CAACqR,YAATrR,CAAsBkB,SAAtBlB,EAAiCmB,UAAjCnB,CA/BgE,SAgC/DA,QAAQ,CAACsR,YAhCsD,SAiC/DtR,QAAQ,CAACuR,YAjCsD,gBAmClE,QAnCkE,yFAoCSnQ,SApCT,YAqClE,QArC0D;AAAhE;;AAuCA7C,GAAC,CAAC0P,EAAF1P,CAAK2P,WAAL3P,CAAiByB,QAAjBzB,GAA4ByB,QAA5BzB;AAt4CA,EAw4CAwH,MAAM,CAACyL,MAx4CP,CAAF","names":["$","UTCDate","Date","UTC","arguments","UTCToday","today","getUTCFullYear","getUTCMonth","getUTCDate","Datepicker","element","options","that","autoShow","undefined","appendTo","closeButton","language","data","dates","split","isRTL","rtl","format","DPGlobal","parseFormat","formatText","isInline","isInput","is","component","find","hasInput","length","disableDblClickSelection","onRender","linkField","linkFormat","minuteStep","pickerPosition","initialDate","faCSSprefix","leftArrow","rightArrow","closeIcon","minView","convertViewMode","maxView","modes","startViewMode","startView","viewMode","pickTime","forceParse","picker","template","on","click","proxy","mousedown","show","hide","addClass","each","parent","prepend","siblings","append","toggleClass","document","e","target","closest","autoclose","keyboardNavigation","todayBtn","todayHighlight","calendarWeeks","attr","i","val","parseInt","weekStart","weekEnd","startDate","Infinity","endDate","daysOfWeekDisabled","datesDisabled","setStartDate","setEndDate","setDaysOfWeekDisabled","setDatesDisabled","date","viewDate","parseDate","setValue","fillDow","fillMonths","update","showMode","_attachEvents","prototype","constructor","_events","_detachEvents","focus","keyup","keydown","dblclick","preventDefault","stopPropagation","blur","el","ev","off","height","outerHeight","place","window","trigger","type","remove","datepicker","getDate","d","getTime","getTimezoneOffset","setDate","setUTCDate","formatted","getFormattedDate","formatDate","updateNavArrows","isArray","map","valueOf","zIndexes","parents","css","push","zIndex","sort","a","b","pop","textbox","offset","width","outerWidth","fullOffsetTop","top","offsetLeft","left","removeClass","canShowTop","scrollTop","canShowBottom","fromArgs","currentVal","fill","dowCnt","html","cell","daysMin","monthsShort","year","month","dayMonth","hours","getUTCHours","minutes","getUTCMinutes","startYear","startMonth","endYear","endMonth","currentDate","titleFormat","en","text","months","toggle","prevMonth","day","getDaysInMonth","getUTCDay","nextMonth","clsName","getDay","getFullYear","calWeek","getMonth","inArray","empty","join","actual","Math","floor","currentYear","end","eq","slice","yearCont","hour","visibility","hasClass","nodeName","toLowerCase","className","dir","navStep","moveHour","moveDate","moveMonth","moveYear","getHours","getMinutes","getSeconds","_setDate","index","seconds","getUTCSeconds","setUTCMonth","setUTCFullYear","substr","indexOf","oldViewMode","which","change","new_date","setUTCHours","mag","abs","new_month","test","dateWithinRange","keyCode","dateChanged","newDate","newViewDate","ctrlKey","shiftKey","newViewMode","max","min","filter","changeViewDate","reset","fn","fdatepicker","option","args","Array","shift","$this","_typeof","extend","defaults","Constructor","days","daysShort","navFnc","isLeapYear","validParts","nonpunctuation","separators","replace","parts","match","Error","part_re","part","exec","Datetimepicker","call","parsed","setters_order","setters_map","hh","v","h","ii","setUTCMinutes","ss","setUTCSeconds","s","yyyy","yy","m","filtered","M","MM","mm","dd","cnt","isNaN","p","toString","substring","seps","headTemplate","contTemplate","footTemplate","jQuery"],"sources":["/var/lib/gems/2.7.0/gems/decidim-core-0.26.0/app/packs/src/decidim/vendor/foundation-datepicker.js"],"sourcesContent":["/* eslint-disable */\n\n/* =========================================================\n * foundation-datepicker.js\n * Copyright 2015 Peter Beno, najlepsiwebdesigner@gmail.com, @benopeter\n * project website http://foundation-datepicker.peterbeno.com\n * ========================================================= */\n\n// This file is a modified version of the original file\n// See\n//  - https://github.com/decidim/decidim/pull/1207\n//  - https://github.com/decidim/decidim/pull/2512\n//  - https://github.com/decidim/decidim/pull/3515\n\n!(function($) {\n\n  function UTCDate() {\n    return new Date(Date.UTC(...arguments));\n  }\n\n  function UTCToday() {\n    let today = new Date();\n    return UTCDate(today.getUTCFullYear(), today.getUTCMonth(), today.getUTCDate());\n  }\n\n  let Datepicker = function(element, options) {\n    let that = this;\n\n    this.element = $(element);\n    this.autoShow = (options.autoShow == undefined ? true : options.autoShow);\n    this.appendTo = options.appendTo || \"body\";\n    this.closeButton = options.closeButton;\n    this.language = options.language || this.element.data(\"date-language\") || \"en\";\n    this.language = this.language in dates ? this.language : this.language.split(\"-\")[0]; // Check if \"de-DE\" style date is available, if not language should fallback to 2 letter code eg \"de\"\n    this.language = this.language in dates ? this.language : \"en\";\n    this.isRTL = dates[this.language].rtl || false;\n    this.format = DPGlobal.parseFormat(options.format || this.element.data(\"date-format\") || dates[this.language].format || \"mm/dd/yyyy\");\n    this.formatText = options.format || this.element.data(\"date-format\") || dates[this.language].format || \"mm/dd/yyyy\";\n    this.isInline = false;\n    this.isInput = this.element.is(\"input\");\n    this.component = this.element.is(\".date\") ? this.element.find(\".prefix, .postfix\") : false;\n    this.hasInput = this.component && this.element.find(\"input\").length;\n    this.disableDblClickSelection = options.disableDblClickSelection;\n    this.onRender = options.onRender || function() {};\n    if (this.component && this.component.length === 0) {\n      this.component = false;\n    }\n    this.linkField = options.linkField || this.element.data(\"link-field\") || false;\n    this.linkFormat = DPGlobal.parseFormat(options.linkFormat || this.element.data(\"link-format\") || \"yyyy-mm-dd hh:ii:ss\");\n    this.minuteStep = options.minuteStep || this.element.data(\"minute-step\") || 5;\n    this.pickerPosition = options.pickerPosition || this.element.data(\"picker-position\") || \"bottom-right\";\n    this.initialDate = options.initialDate || null;\n    this.faCSSprefix = options.faCSSprefix || \"fa\";\n    this.leftArrow = options.leftArrow || `<i class=\"${this.faCSSprefix} ${this.faCSSprefix}-chevron-left fi-arrow-left\"/>`;\n    this.rightArrow = options.rightArrow || `<i class=\"${this.faCSSprefix} ${this.faCSSprefix}-chevron-right fi-arrow-right\"/>`;\n    this.closeIcon = options.closeIcon || `<i class=\"${this.faCSSprefix} ${this.faCSSprefix}-remove ${this.faCSSprefix}-times fi-x\"></i>`;\n\n\n    this.minView = 0;\n    if (\"minView\" in options) {\n      this.minView = options.minView;\n    } else if (\"minView\" in this.element.data()) {\n      this.minView = this.element.data(\"min-view\");\n    }\n    this.minView = DPGlobal.convertViewMode(this.minView);\n\n    this.maxView = DPGlobal.modes.length - 1;\n    if (\"maxView\" in options) {\n      this.maxView = options.maxView;\n    } else if (\"maxView\" in this.element.data()) {\n      this.maxView = this.element.data(\"max-view\");\n    }\n    this.maxView = DPGlobal.convertViewMode(this.maxView);\n\n    this.startViewMode = \"month\";\n    if (\"startView\" in options) {\n      this.startViewMode = options.startView;\n    } else if (\"startView\" in this.element.data()) {\n      this.startViewMode = this.element.data(\"start-view\");\n    }\n    this.startViewMode = DPGlobal.convertViewMode(this.startViewMode);\n    this.viewMode = this.startViewMode;\n\n    if (!(\"minView\" in options) && !(\"maxView\" in options) && !(this.element.data(\"min-view\")) && !(this.element.data(\"max-view\"))) {\n      this.pickTime = false;\n      if (\"pickTime\" in options) {\n        this.pickTime = options.pickTime;\n      }\n      if (this.pickTime == true) {\n        this.minView = 0;\n        this.maxView = 4;\n      } else {\n        this.minView = 2;\n        this.maxView = 4;\n      }\n    }\n\n    this.forceParse = true;\n    if (\"forceParse\" in options) {\n      this.forceParse = options.forceParse;\n    } else if (\"dateForceParse\" in this.element.data()) {\n      this.forceParse = this.element.data(\"date-force-parse\");\n    }\n\n\n    this.picker = $(DPGlobal.template(this.leftArrow, this.rightArrow, this.closeIcon)).\n      appendTo(this.isInline ? this.element : this.appendTo).\n      on({\n        click: $.proxy(this.click, this),\n        mousedown: $.proxy(this.mousedown, this)\n      });\n    if (this.closeButton) {\n      this.picker.find(\"a.datepicker-close\").show();\n    } else {\n      this.picker.find(\"a.datepicker-close\").hide();\n    }\n\n    if (this.isInline) {\n      this.picker.addClass(\"datepicker-inline\");\n    } else {\n      this.picker.addClass(\"datepicker-dropdown dropdown-menu\");\n    }\n    if (this.isRTL) {\n      this.picker.addClass(\"datepicker-rtl\");\n\n      this.picker.find(\".date-switch\").each(function() {\n        $(this).parent().prepend($(this).siblings(\".next\"));\n        $(this).parent().append($(this).siblings(\".prev\"));\n      })\n      this.picker.find(\".prev, .next\").toggleClass(\"prev next\");\n\n    }\n    $(document).on(\"mousedown\", function(e) {\n      if (that.isInput && e.target === that.element[0]) {\n        return;\n      }\n\n      // Clicked outside the datepicker, hide it\n      if ($(e.target).closest(\".datepicker.datepicker-inline, .datepicker.datepicker-dropdown\").length === 0) {\n        that.hide();\n      }\n    });\n\n    this.autoclose = true;\n    if (\"autoclose\" in options) {\n      this.autoclose = options.autoclose;\n    } else if (\"dateAutoclose\" in this.element.data()) {\n      this.autoclose = this.element.data(\"date-autoclose\");\n    }\n\n    this.keyboardNavigation = true;\n    if (\"keyboardNavigation\" in options) {\n      this.keyboardNavigation = options.keyboardNavigation;\n    } else if (\"dateKeyboardNavigation\" in this.element.data()) {\n      this.keyboardNavigation = this.element.data(\"date-keyboard-navigation\");\n    }\n\n    this.todayBtn = (options.todayBtn || this.element.data(\"date-today-btn\") || false);\n    this.todayHighlight = (options.todayHighlight || this.element.data(\"date-today-highlight\") || false);\n\n    this.calendarWeeks = false;\n    if (\"calendarWeeks\" in options) {\n      this.calendarWeeks = options.calendarWeeks;\n    } else if (\"dateCalendarWeeks\" in this.element.data()) {\n      this.calendarWeeks = this.element.data(\"date-calendar-weeks\");\n    }\n    if (this.calendarWeeks)\n    {this.picker.find(\"tfoot th.today\").\n      attr(\"colspan\", function(i, val) {\n        return parseInt(val) + 1;\n      });}\n\n    this.weekStart = ((options.weekStart || this.element.data(\"date-weekstart\") || dates[this.language].weekStart || 0) % 7);\n    this.weekEnd = ((this.weekStart + 6) % 7);\n    this.startDate = -Infinity;\n    this.endDate = Infinity;\n    this.daysOfWeekDisabled = [];\n    this.datesDisabled = [];\n    this.setStartDate(options.startDate || this.element.data(\"date-startdate\"));\n    this.setEndDate(options.endDate || this.element.data(\"date-enddate\"));\n    this.setDaysOfWeekDisabled(options.daysOfWeekDisabled || this.element.data(\"date-days-of-week-disabled\"));\n    this.setDatesDisabled(options.datesDisabled || this.element.data(\"dates-disabled\"));\n\n    if (this.initialDate != null) {\n      this.date = this.viewDate = DPGlobal.parseDate(this.initialDate, this.format, this.language);\n      this.setValue();\n    }\n\n    this.fillDow();\n    this.fillMonths();\n    this.update();\n\n    this.showMode();\n\n    if (this.isInline) {\n      this.show();\n    }\n\n    this._attachEvents();\n  };\n\n  Datepicker.prototype = {\n    constructor: Datepicker,\n\n    _events: [],\n    _attachEvents: function() {\n      this._detachEvents();\n      if (this.isInput) { // single input\n        if (!this.keyboardNavigation) {\n          this._events = [\n            [this.element, {\n              focus: (this.autoShow) ? $.proxy(this.show, this) : function() {}\n            }]\n          ];\n        } else {\n          this._events = [\n            [this.element, {\n              focus: (this.autoShow) ? $.proxy(this.show, this) : function() {},\n              keyup: $.proxy(this.update, this),\n              keydown: $.proxy(this.keydown, this),\n              click: (this.element.attr(\"readonly\")) ? $.proxy(this.show, this) : function() {}\n            }]\n          ];\n        }\n      }\n      else if (this.component && this.hasInput) { // component: input + button\n        this._events = [\n          // For components that are not readonly, allow keyboard nav\n          [this.element.find(\"input\"), {\n            focus: (this.autoShow) ? $.proxy(this.show, this) : function() {},\n            keyup: $.proxy(this.update, this),\n            keydown: $.proxy(this.keydown, this)\n          }],\n          [this.component, {\n            click: $.proxy(this.show, this)\n          }]\n        ];\n      } else if (this.element.is(\"div\")) { // inline datepicker\n        this.isInline = true;\n      } else {\n        this._events = [\n          [this.element, {\n            click: $.proxy(this.show, this)\n          }]\n        ];\n      }\n\n      if (this.disableDblClickSelection) {\n        this._events[this._events.length] = [\n          this.element, {\n            dblclick: function(e) {\n              e.preventDefault();\n              e.stopPropagation();\n              $(this).blur()\n            }\n          }\n        ];\n      }\n\n      for (var el, ev, i = 0; i < this._events.length; i++) {\n        el = this._events[i][0];\n        ev = this._events[i][1];\n        el.on(ev);\n      }\n    },\n    _detachEvents: function() {\n      for (var el, ev, i = 0; i < this._events.length; i++) {\n        el = this._events[i][0];\n        ev = this._events[i][1];\n        el.off(ev);\n      }\n      this._events = [];\n    },\n\n    show: function(e) {\n      this.picker.show();\n      this.height = this.component ? this.component.outerHeight() : this.element.outerHeight();\n      this.update();\n      this.place();\n      $(window).on(\"resize\", $.proxy(this.place, this));\n      if (e) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n      this.element.trigger({\n        type: \"show\",\n        date: this.date\n      });\n    },\n\n    hide: function(e) {\n      if (this.isInline) {return;}\n      if (!this.picker.is(\":visible\")) {return;}\n      this.picker.hide();\n      $(window).off(\"resize\", this.place);\n      this.viewMode = this.startViewMode;\n      this.showMode();\n      if (!this.isInput) {\n        $(document).off(\"mousedown\", this.hide);\n      }\n\n      if (\n        this.forceParse &&\n                (\n                  this.isInput && this.element.val() ||\n                    this.hasInput && this.element.find(\"input\").val()\n                )\n      )\n      {this.setValue();}\n      this.element.trigger({\n        type: \"hide\",\n        date: this.date\n      });\n    },\n\n    remove: function() {\n      this._detachEvents();\n      this.picker.remove();\n      delete this.element.data().datepicker;\n    },\n\n    getDate: function() {\n      let d = this.getUTCDate();\n      return new Date(d.getTime() + (d.getTimezoneOffset() * 60000));\n    },\n\n    getUTCDate: function() {\n      return this.date;\n    },\n\n    setDate: function(d) {\n      this.setUTCDate(new Date(d.getTime() - (d.getTimezoneOffset() * 60000)));\n    },\n\n    setUTCDate: function(d) {\n      this.date = d;\n      this.setValue();\n    },\n\n    setValue: function() {\n      let formatted = this.getFormattedDate();\n      if (!this.isInput) {\n        if (this.component) {\n          this.element.find(\"input\").val(formatted);\n        }\n        this.element.data(\"date\", formatted);\n      } else {\n        this.element.val(formatted);\n      }\n    },\n\n    getFormattedDate: function(format) {\n      if (format === undefined)\n      {format = this.format;}\n      return DPGlobal.formatDate(this.date, format, this.language);\n    },\n\n    setStartDate: function(startDate) {\n      this.startDate = startDate || -Infinity;\n      if (this.startDate !== -Infinity) {\n        this.startDate = DPGlobal.parseDate(this.startDate, this.format, this.language);\n      }\n      this.update();\n      this.updateNavArrows();\n    },\n\n    setEndDate: function(endDate) {\n      this.endDate = endDate || Infinity;\n      if (this.endDate !== Infinity) {\n        this.endDate = DPGlobal.parseDate(this.endDate, this.format, this.language);\n      }\n      this.update();\n      this.updateNavArrows();\n    },\n\n    setDaysOfWeekDisabled: function(daysOfWeekDisabled) {\n      this.daysOfWeekDisabled = daysOfWeekDisabled || [];\n      if (!$.isArray(this.daysOfWeekDisabled)) {\n        this.daysOfWeekDisabled = this.daysOfWeekDisabled.split(/,\\s*/);\n      }\n      this.daysOfWeekDisabled = $.map(this.daysOfWeekDisabled, function(d) {\n        return parseInt(d, 10);\n      });\n      this.update();\n      this.updateNavArrows();\n    },\n\n    setDatesDisabled: function(datesDisabled) {\n      this.datesDisabled = datesDisabled || [];\n      if (!$.isArray(this.datesDisabled)) {\n        this.datesDisabled = this.datesDisabled.split(/,\\s*/);\n      }\n      this.datesDisabled = $.map(this.datesDisabled, function(d) {\n        return DPGlobal.parseDate(d, this.format, this.language).valueOf();\n      });\n      this.update();\n      this.updateNavArrows();\n    },\n\n    place: function() {\n      if (this.isInline) {return;}\n      let zIndexes = [];\n      this.element.parents().map(function() {\n        if ($(this).css(\"z-index\") != \"auto\") {\n          zIndexes.push(parseInt($(this).css(\"z-index\")));\n        }\n      });\n      let zIndex = zIndexes.sort(function(a, b) { return a - b; }).pop() + 10;\n      let textbox = this.component ? this.component : this.element;\n      let offset = textbox.offset();\n      let height = textbox.outerHeight() + parseInt(textbox.css(\"margin-top\"));\n      let width = textbox.outerWidth() + parseInt(textbox.css(\"margin-left\"));\n      let fullOffsetTop = offset.top + height;\n      let offsetLeft = offset.left;\n      this.picker.removeClass(\"datepicker-top datepicker-bottom\");\n      // can we show it on top?\n      let canShowTop = ($(window).scrollTop() < offset.top - this.picker.outerHeight());\n      let canShowBottom = (fullOffsetTop + this.picker.outerHeight()) < $(window).scrollTop() + $(window).height();\n      // If the datepicker is going to be below the window, show it on top of the input if it fits\n      if (!canShowBottom && canShowTop) {\n        fullOffsetTop = offset.top - this.picker.outerHeight();\n        this.picker.addClass(\"datepicker-top\");\n      }\n      else {\n        // Scroll up if we cannot show it on bottom or top (for mobile devices)\n        if (!canShowBottom) {$(window).scrollTop(offset.top);}\n        this.picker.addClass(\"datepicker-bottom\");\n      }\n\n      // if the datepicker is going to go past the right side of the window, we want\n      // to set the right position so the datepicker lines up with the textbox\n      if (offset.left + this.picker.width() >= $(window).width()) {\n        offsetLeft = (offset.left + width) - this.picker.width();\n      }\n      this.picker.css({\n        top: fullOffsetTop,\n        left: offsetLeft,\n        zIndex: zIndex\n      });\n    },\n\n    update: function() {\n      let date,\n          fromArgs = false;\n      let currentVal = this.isInput ? this.element.val() : this.element.data(\"date\") || this.element.find(\"input\").val();\n      if (arguments && arguments.length && (typeof arguments[0] === \"string\" || arguments[0] instanceof Date)) {\n        date = arguments[0];\n        fromArgs = true;\n      }\n      else {\n        date = this.isInput ? this.element.val() : this.element.data(\"date\") || this.element.find(\"input\").val();\n      }\n\n      this.date = DPGlobal.parseDate(date, this.format, this.language);\n\n      if (fromArgs) {\n        this.setValue();\n      } else if (currentVal == \"\") {\n        this.element.trigger({\n          type: \"changeDate\",\n          date: null\n        });\n      }\n\n      if (this.date < this.startDate) {\n        this.viewDate = new Date(this.startDate.valueOf());\n      } else if (this.date > this.endDate) {\n        this.viewDate = new Date(this.endDate.valueOf());\n      } else {\n        this.viewDate = new Date(this.date.valueOf());\n      }\n      this.fill();\n    },\n\n    fillDow: function() {\n      let dowCnt = this.weekStart,\n          html = \"<tr>\";\n      if (this.calendarWeeks) {\n        let cell = '<th class=\"cw\">&nbsp;</th>';\n        html += cell;\n        this.picker.find(\".datepicker-days thead tr:first-child\").prepend(cell);\n      }\n      while (dowCnt < this.weekStart + 7) {\n        html += `<th class=\"dow\">${dates[this.language].daysMin[(dowCnt++) % 7]}</th>`;\n      }\n      html += \"</tr>\";\n      this.picker.find(\".datepicker-days thead\").append(html);\n    },\n\n    fillMonths: function() {\n      let html = \"\",\n          i = 0;\n      while (i < 12) {\n        html += `<span class=\"month\">${dates[this.language].monthsShort[i++]}</span>`;\n      }\n      this.picker.find(\".datepicker-months td\").html(html);\n    },\n\n    fill: function() {\n      if (this.date == null || this.viewDate == null) {\n        return;\n      }\n\n      let d = new Date(this.viewDate.valueOf()),\n          year = d.getUTCFullYear(),\n          month = d.getUTCMonth(),\n          dayMonth = d.getUTCDate(),\n          hours = d.getUTCHours(),\n          minutes = d.getUTCMinutes(),\n          startYear = this.startDate !== -Infinity ? this.startDate.getUTCFullYear() : -Infinity,\n          startMonth = this.startDate !== -Infinity ? this.startDate.getUTCMonth() : -Infinity,\n          endYear = this.endDate !== Infinity ? this.endDate.getUTCFullYear() : Infinity,\n          endMonth = this.endDate !== Infinity ? this.endDate.getUTCMonth() : Infinity,\n          currentDate = this.date && UTCDate(this.date.getUTCFullYear(), this.date.getUTCMonth(), this.date.getUTCDate()).valueOf(),\n          today = new Date(),\n          titleFormat = dates[this.language].titleFormat || dates.en.titleFormat;\n      // this.picker.find('.datepicker-days thead th.date-switch')\n      //          .text(DPGlobal.formatDate(new UTCDate(year, month), titleFormat, this.language));\n\n      this.picker.find(\".datepicker-days thead th:eq(1)\").\n        text(`${dates[this.language].months[month]} ${year}`);\n      this.picker.find(\".datepicker-hours thead th:eq(1)\").\n        text(`${dayMonth} ${dates[this.language].months[month]} ${year}`);\n      this.picker.find(\".datepicker-minutes thead th:eq(1)\").\n        text(`${dayMonth} ${dates[this.language].months[month]} ${year}`);\n\n\n      this.picker.find(\"tfoot th.today\").\n        text(dates[this.language].today).\n        toggle(this.todayBtn !== false);\n      this.updateNavArrows();\n      this.fillMonths();\n      let prevMonth = UTCDate(year, month - 1, 28, 0, 0, 0, 0),\n          day = DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth());\n      prevMonth.setUTCDate(day);\n      prevMonth.setUTCDate(day - (prevMonth.getUTCDay() - this.weekStart + 7) % 7);\n      let nextMonth = new Date(prevMonth.valueOf());\n      nextMonth.setUTCDate(nextMonth.getUTCDate() + 42);\n      nextMonth = nextMonth.valueOf();\n      let html = [];\n      let clsName;\n      while (prevMonth.valueOf() < nextMonth) {\n        if (prevMonth.getUTCDay() == this.weekStart) {\n          html.push(\"<tr>\");\n          if (this.calendarWeeks) {\n            // adapted from https://github.com/timrwood/moment/blob/master/moment.js#L128\n            let a = new Date(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth(), prevMonth.getUTCDate() - prevMonth.getDay() + 10 - (this.weekStart && this.weekStart % 7 < 5 && 7)),\n                b = new Date(a.getFullYear(), 0, 4),\n                calWeek = ~~((a - b) / 864e5 / 7 + 1.5);\n            html.push(`<td class=\"cw\">${calWeek}</td>`);\n          }\n        }\n        clsName = ` ${this.onRender(prevMonth)} `;\n        if (prevMonth.getUTCFullYear() < year || (prevMonth.getUTCFullYear() == year && prevMonth.getUTCMonth() < month)) {\n          clsName += \" old\";\n        } else if (prevMonth.getUTCFullYear() > year || (prevMonth.getUTCFullYear() == year && prevMonth.getUTCMonth() > month)) {\n          clsName += \" new\";\n        }\n        // Compare internal UTC date with local today, not UTC today\n        if (this.todayHighlight &&\n                    prevMonth.getUTCFullYear() == today.getFullYear() &&\n                    prevMonth.getUTCMonth() == today.getMonth() &&\n                    prevMonth.getUTCDate() == today.getDate()) {\n          clsName += \" today\";\n        }\n        if (currentDate && prevMonth.valueOf() == currentDate) {\n          clsName += \" active\";\n        }\n        if (prevMonth.valueOf() < this.startDate || prevMonth.valueOf() > this.endDate ||\n                    $.inArray(prevMonth.getUTCDay(), this.daysOfWeekDisabled) !== -1 ||\n                    $.inArray(prevMonth.valueOf(), this.datesDisabled) !== -1) {\n          clsName += \" disabled\";\n        }\n        html.push(`<td class=\"day${clsName}\">${prevMonth.getUTCDate()}</td>`);\n        if (prevMonth.getUTCDay() == this.weekEnd) {\n          html.push(\"</tr>\");\n        }\n        prevMonth.setUTCDate(prevMonth.getUTCDate() + 1);\n      }\n      this.picker.find(\".datepicker-days tbody\").empty().append(html.join(\"\"));\n\n      html = [];\n      for (var i = 0; i < 24; i++) {\n        var actual = UTCDate(year, month, dayMonth, i);\n        clsName = \"\";\n        // We want the previous hour for the startDate\n        if ((actual.valueOf() + 3600000) < this.startDate || actual.valueOf() > this.endDate) {\n          clsName += \" disabled\";\n        } else if (hours == i) {\n          clsName += \" active\";\n        }\n        html.push(`<span class=\"hour${clsName}\">${i}:00</span>`);\n      }\n      this.picker.find(\".datepicker-hours td\").html(html.join(\"\"));\n\n      html = [];\n      for (var i = 0; i < 60; i += this.minuteStep) {\n        var actual = UTCDate(year, month, dayMonth, hours, i);\n        clsName = \"\";\n        if (actual.valueOf() < this.startDate || actual.valueOf() > this.endDate) {\n          clsName += \" disabled\";\n        } else if (Math.floor(minutes / this.minuteStep) == Math.floor(i / this.minuteStep)) {\n          clsName += \" active\";\n        }\n        html.push(`<span class=\"minute${clsName}\">${hours}:${i < 10 ? `0${i}` : i}</span>`);\n      }\n      this.picker.find(\".datepicker-minutes td\").html(html.join(\"\"));\n\n\n      let currentYear = this.date && this.date.getUTCFullYear();\n      let months = this.picker.find(\".datepicker-months\").\n        find(\"th:eq(1)\").\n        text(year).\n        end().\n        find(\"span\").removeClass(\"active\");\n      if (currentYear && currentYear == year) {\n        months.eq(this.date.getUTCMonth()).addClass(\"active\");\n      }\n      if (year < startYear || year > endYear) {\n        months.addClass(\"disabled\");\n      }\n      if (year == startYear) {\n        months.slice(0, startMonth).addClass(\"disabled\");\n      }\n      if (year == endYear) {\n        months.slice(endMonth + 1).addClass(\"disabled\");\n      }\n\n      html = \"\";\n      year = parseInt(year / 10, 10) * 10;\n      let yearCont = this.picker.find(\".datepicker-years\").\n        find(\"th:eq(1)\").\n        text(`${year}-${year + 9}`).\n        end().\n        find(\"td\");\n      year -= 1;\n      for (var i = -1; i < 11; i++) {\n        html += `<span class=\"year${i == -1 || i == 10 ? \" old\" : \"\"}${currentYear == year ? \" active\" : \"\"}${year < startYear || year > endYear ? \" disabled\" : \"\"}\">${year}</span>`;\n        year += 1;\n      }\n      yearCont.html(html);\n    },\n\n    updateNavArrows: function() {\n      let d = new Date(this.viewDate),\n          year = d.getUTCFullYear(),\n          month = d.getUTCMonth(),\n          day = d.getUTCDate(),\n          hour = d.getUTCHours();\n      switch (this.viewMode) {\n      case 0:\n        if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear() && month <= this.startDate.getUTCMonth() && day <= this.startDate.getUTCDate() && hour <= this.startDate.getUTCHours()) {\n          this.picker.find(\".prev\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".prev\").css({\n            visibility: \"visible\"\n          });\n        }\n        if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear() && month >= this.endDate.getUTCMonth() && day >= this.endDate.getUTCDate() && hour >= this.endDate.getUTCHours()) {\n          this.picker.find(\".next\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".next\").css({\n            visibility: \"visible\"\n          });\n        }\n        break;\n      case 1:\n        if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear() && month <= this.startDate.getUTCMonth() && day <= this.startDate.getUTCDate()) {\n          this.picker.find(\".prev\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".prev\").css({\n            visibility: \"visible\"\n          });\n        }\n        if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear() && month >= this.endDate.getUTCMonth() && day >= this.endDate.getUTCDate()) {\n          this.picker.find(\".next\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".next\").css({\n            visibility: \"visible\"\n          });\n        }\n        break;\n      case 2:\n        if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear() && month <= this.startDate.getUTCMonth()) {\n          this.picker.find(\".prev\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".prev\").css({\n            visibility: \"visible\"\n          });\n        }\n        if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear() && month >= this.endDate.getUTCMonth()) {\n          this.picker.find(\".next\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".next\").css({\n            visibility: \"visible\"\n          });\n        }\n        break;\n      case 3:\n      case 4:\n        if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear()) {\n          this.picker.find(\".prev\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".prev\").css({\n            visibility: \"visible\"\n          });\n        }\n        if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear()) {\n          this.picker.find(\".next\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".next\").css({\n            visibility: \"visible\"\n          });\n        }\n        break;\n      }\n    },\n\n    click: function(e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      if ($(e.target).hasClass(\"datepicker-close\") || $(e.target).parent().hasClass(\"datepicker-close\")) {\n        this.hide();\n      }\n\n      let target = $(e.target).closest(\"span, td, th\");\n      if (target.length == 1) {\n        if (target.is(\".disabled\")) {\n          this.element.trigger({\n            type: \"outOfRange\",\n            date: this.viewDate,\n            startDate: this.startDate,\n            endDate: this.endDate\n          });\n          return;\n        }\n\n        switch (target[0].nodeName.toLowerCase()) {\n        case \"th\":\n          switch (target[0].className) {\n          case \"date-switch\":\n            this.showMode(1);\n            break;\n          case \"prev\":\n          case \"next\":\n            var dir = DPGlobal.modes[this.viewMode].navStep * (target[0].className == \"prev\" ? -1 : 1);\n            switch (this.viewMode) {\n            case 0:\n              this.viewDate = this.moveHour(this.viewDate, dir);\n              break;\n            case 1:\n              this.viewDate = this.moveDate(this.viewDate, dir);\n              break;\n            case 2:\n              this.viewDate = this.moveMonth(this.viewDate, dir);\n              break;\n            case 3:\n            case 4:\n              this.viewDate = this.moveYear(this.viewDate, dir);\n              break;\n            }\n            this.fill();\n            break;\n          case \"today\":\n            var date = new Date();\n            date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds());\n\n            this.viewMode = this.startViewMode;\n            this.showMode(0);\n            this._setDate(date);\n            break;\n          }\n          break;\n        case \"span\":\n          if (!target.is(\".disabled\")) {\n            if (target.is(\".month\")) {\n              if (this.minView === 3) {\n                var month = target.parent().find(\"span\").index(target) || 0;\n                var year = this.viewDate.getUTCFullYear(),\n                    day = 1,\n                    hours = this.viewDate.getUTCHours(),\n                    minutes = this.viewDate.getUTCMinutes(),\n                    seconds = this.viewDate.getUTCSeconds();\n                this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n              } else {\n                this.viewDate.setUTCDate(1);\n                var month = target.parent().find(\"span\").index(target);\n                this.viewDate.setUTCMonth(month);\n                this.element.trigger({\n                  type: \"changeMonth\",\n                  date: this.viewDate\n                });\n              }\n            } else if (target.is(\".year\")) {\n              if (this.minView === 4) {\n                var year = parseInt(target.text(), 10) || 0;\n                var month = 0,\n                    day = 1,\n                    hours = this.viewDate.getUTCHours(),\n                    minutes = this.viewDate.getUTCMinutes(),\n                    seconds = this.viewDate.getUTCSeconds();\n                this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n              } else {\n                this.viewDate.setUTCDate(1);\n                var year = parseInt(target.text(), 10) || 0;\n                this.viewDate.setUTCFullYear(year);\n                this.element.trigger({\n                  type: \"changeYear\",\n                  date: this.viewDate\n                });\n              }\n            } else if (target.is(\".hour\")) {\n              var hours = parseInt(target.text(), 10) || 0;\n              var year = this.viewDate.getUTCFullYear(),\n                  month = this.viewDate.getUTCMonth(),\n                  day = this.viewDate.getUTCDate(),\n                  minutes = this.viewDate.getUTCMinutes(),\n                  seconds = this.viewDate.getUTCSeconds();\n              this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n            } else if (target.is(\".minute\")) {\n              var minutes = parseInt(target.text().substr(target.text().indexOf(\":\") + 1), 10) || 0;\n              var year = this.viewDate.getUTCFullYear(),\n                  month = this.viewDate.getUTCMonth(),\n                  day = this.viewDate.getUTCDate(),\n                  hours = this.viewDate.getUTCHours(),\n                  seconds = this.viewDate.getUTCSeconds();\n              this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n            }\n\n\n            if (this.viewMode != 0) {\n\n\n              var oldViewMode = this.viewMode;\n              this.showMode(-1);\n              this.fill();\n              if (oldViewMode == this.viewMode && this.autoclose) {\n                this.hide();\n              }\n            } else {\n              this.fill();\n              if (this.autoclose) {\n                this.hide();\n              }\n            }\n          }\n          break;\n        case \"td\":\n\n\n          if (target.is(\".day\") && !target.is(\".disabled\")) {\n            var day = parseInt(target.text(), 10) || 1;\n            var year = this.viewDate.getUTCFullYear(),\n                month = this.viewDate.getUTCMonth(),\n                hours = this.viewDate.getUTCHours(),\n                minutes = this.viewDate.getUTCMinutes(),\n                seconds = this.viewDate.getUTCSeconds();\n            if (target.is(\".old\")) {\n              if (month === 0) {\n                month = 11;\n                year -= 1;\n              } else {\n                month -= 1;\n              }\n            } else if (target.is(\".new\")) {\n              if (month == 11) {\n                month = 0;\n                year += 1;\n              } else {\n                month += 1;\n              }\n            }\n            this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n          }\n\n\n          var oldViewMode = this.viewMode;\n\n\n          this.showMode(-1);\n\n\n          this.fill();\n          if (oldViewMode == this.viewMode && this.autoclose) {\n            this.hide();\n          }\n          break;\n        }\n      }\n    },\n\n    _setDate: function(date, which) {\n\n      if (!which || which == \"date\")\n      {this.date = date;}\n      if (!which || which == \"view\")\n      {this.viewDate = date;}\n      this.fill();\n      this.setValue();\n      this.element.trigger({\n        type: \"changeDate\",\n        date: this.date\n      });\n      let element;\n      if (this.isInput) {\n        element = this.element;\n      } else if (this.component) {\n        element = this.element.find(\"input\");\n      }\n      if (element) {\n        element.change();\n        if (this.autoclose && (!which || which == \"date\")) {\n          // this.hide();\n        }\n      }\n    },\n\n    moveHour: function(date, dir) {\n      if (!dir) {return date;}\n      let new_date = new Date(date.valueOf());\n      dir = dir > 0 ? 1 : -1;\n      new_date.setUTCHours(new_date.getUTCHours() + dir);\n      return new_date;\n    },\n\n    moveDate: function(date, dir) {\n      if (!dir) {return date;}\n      let new_date = new Date(date.valueOf());\n      dir = dir > 0 ? 1 : -1;\n      new_date.setUTCDate(new_date.getUTCDate() + dir);\n      return new_date;\n    },\n\n    moveMonth: function(date, dir) {\n      if (!dir) {return date;}\n      let new_date = new Date(date.valueOf()),\n          day = new_date.getUTCDate(),\n          month = new_date.getUTCMonth(),\n          mag = Math.abs(dir),\n          new_month, test;\n      dir = dir > 0 ? 1 : -1;\n      if (mag == 1) {\n        test = dir == -1\n        // If going back one month, make sure month is not current month\n        // (eg, Mar 31 -> Feb 31 == Feb 28, not Mar 02)\n          ? function() {\n            return new_date.getUTCMonth() == month;\n          }\n        // If going forward one month, make sure month is as expected\n        // (eg, Jan 31 -> Feb 31 == Feb 28, not Mar 02)\n          : function() {\n            return new_date.getUTCMonth() != new_month;\n          };\n        new_month = month + dir;\n        new_date.setUTCMonth(new_month);\n        // Dec -> Jan (12) or Jan -> Dec (-1) -- limit expected date to 0-11\n        if (new_month < 0 || new_month > 11)\n        {new_month = (new_month + 12) % 12;}\n      } else {\n        // For magnitudes >1, move one month at a time...\n        for (let i = 0; i < mag; i++)\n        // ...which might decrease the day (eg, Jan 31 to Feb 28, etc)...\n        {new_date = this.moveMonth(new_date, dir);}\n        // ...then reset the day, keeping it in the new month\n        new_month = new_date.getUTCMonth();\n        new_date.setUTCDate(day);\n        test = function() {\n          return new_month != new_date.getUTCMonth();\n        };\n      }\n      // Common date-resetting loop -- if date is beyond end of month, make it\n      // end of month\n      while (test()) {\n        new_date.setUTCDate(--day);\n        new_date.setUTCMonth(new_month);\n      }\n      return new_date;\n    },\n\n    moveYear: function(date, dir) {\n      return this.moveMonth(date, dir * 12);\n    },\n\n    dateWithinRange: function(date) {\n      return date >= this.startDate && date <= this.endDate;\n    },\n\n    keydown: function(e) {\n      if (!this.keyboardNavigation) {\n        return true;\n      }\n      if (this.picker.is(\":not(:visible)\")) {\n        if (e.keyCode == 27) // allow escape to hide and re-show picker\n        {this.show();}\n        return;\n      }\n      let dateChanged = false,\n          day, dir, month,\n          newDate, newViewDate;\n      switch (e.keyCode) {\n      case 27: // escape\n        this.hide();\n        e.preventDefault();\n        break;\n      case 37: // left\n      case 39: // right\n        if (!this.keyboardNavigation) {break;}\n        dir = e.keyCode == 37 ? -1 : 1;\n        if (e.ctrlKey) {\n          newDate = this.moveYear(this.date, dir);\n          newViewDate = this.moveYear(this.viewDate, dir);\n        } else if (e.shiftKey) {\n          newDate = this.moveMonth(this.date, dir);\n          newViewDate = this.moveMonth(this.viewDate, dir);\n        } else {\n          newDate = new Date(this.date.valueOf());\n          newDate.setUTCDate(this.date.getUTCDate() + dir);\n          newViewDate = new Date(this.viewDate.valueOf());\n          newViewDate.setUTCDate(this.viewDate.getUTCDate() + dir);\n        }\n        if (this.dateWithinRange(newDate)) {\n          this.date = newDate;\n          this.viewDate = newViewDate;\n          this.setValue();\n          this.update();\n          e.preventDefault();\n          dateChanged = true;\n        }\n        break;\n      case 38: // up\n      case 40: // down\n        if (!this.keyboardNavigation) {break;}\n        dir = e.keyCode == 38 ? -1 : 1;\n        if (e.ctrlKey) {\n          newDate = this.moveYear(this.date, dir);\n          newViewDate = this.moveYear(this.viewDate, dir);\n        } else if (e.shiftKey) {\n          newDate = this.moveMonth(this.date, dir);\n          newViewDate = this.moveMonth(this.viewDate, dir);\n        } else {\n          newDate = new Date(this.date.valueOf());\n          newDate.setUTCDate(this.date.getUTCDate() + dir * 7);\n          newViewDate = new Date(this.viewDate.valueOf());\n          newViewDate.setUTCDate(this.viewDate.getUTCDate() + dir * 7);\n        }\n        if (this.dateWithinRange(newDate)) {\n          this.date = newDate;\n          this.viewDate = newViewDate;\n          this.setValue();\n          this.update();\n          e.preventDefault();\n          dateChanged = true;\n        }\n        break;\n      case 13: // enter\n        this.hide();\n        e.preventDefault();\n        break;\n      case 9: // tab\n        this.hide();\n        break;\n      }\n      if (dateChanged) {\n        this.element.trigger({\n          type: \"changeDate\",\n          date: this.date\n        });\n        let element;\n        if (this.isInput) {\n          element = this.element;\n        } else if (this.component) {\n          element = this.element.find(\"input\");\n        }\n        if (element) {\n          element.change();\n        }\n      }\n    },\n\n    showMode: function(dir) {\n\n      if (dir) {\n        let newViewMode = Math.max(0, Math.min(DPGlobal.modes.length - 1, this.viewMode + dir));\n        if (newViewMode >= this.minView && newViewMode <= this.maxView) {\n          this.viewMode = newViewMode;\n        }\n      }\n\n      /*\n                vitalets: fixing bug of very special conditions:\n                jquery 1.7.1 + webkit + show inline datepicker in bootstrap popover.\n                Method show() does not set display css correctly and datepicker is not shown.\n                Changed to .css('display', 'block') solve the problem.\n                See https://github.com/vitalets/x-editable/issues/37\n\n                In jquery 1.7.2+ everything works fine.\n            */\n      // this.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).show();\n      this.picker.find(\">div\").hide().filter(`.datepicker-${DPGlobal.modes[this.viewMode].clsName}`).css(\"display\", \"block\");\n      this.updateNavArrows();\n    },\n\n    changeViewDate: function(date) {\n      this.date = date;\n      this.viewDate = date;\n      this.fill();\n    },\n\n    reset: function(e) {\n      this._setDate(null, \"date\");\n    }\n  };\n\n  $.fn.fdatepicker = function(option) {\n    let args = Array(...arguments);\n    args.shift();\n    return this.each(function() {\n      let $this = $(this),\n          data = $this.data(\"datepicker\"),\n          options = typeof option === \"object\" && option;\n      if (!data) {\n        $this.data(\"datepicker\", (data = new Datepicker(this, $.extend({}, $.fn.fdatepicker.defaults, options))));\n      }\n      if (typeof option === \"string\" && typeof data[option] === \"function\") {\n        data[option](...args);\n      }\n    });\n  };\n\n  $.fn.fdatepicker.defaults = {\n    onRender: function(date) {\n      return \"\";\n    }\n  };\n  $.fn.fdatepicker.Constructor = Datepicker;\n  var dates = $.fn.fdatepicker.dates = {\n    \"en\": {\n      days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\n      daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\n      daysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\n      months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n      monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n      today: \"Today\",\n      titleFormat: \"MM yyyy\"\n    }\n  };\n\n  var DPGlobal = {\n    modes: [{\n      clsName: \"minutes\",\n      navFnc: \"Hours\",\n      navStep: 1\n    }, {\n      clsName: \"hours\",\n      navFnc: \"Date\",\n      navStep: 1\n    }, {\n      clsName: \"days\",\n      navFnc: \"Month\",\n      navStep: 1\n    }, {\n      clsName: \"months\",\n      navFnc: \"FullYear\",\n      navStep: 1\n    }, {\n      clsName: \"years\",\n      navFnc: \"FullYear\",\n      navStep: 10\n    }],\n    isLeapYear: function(year) {\n      return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0));\n    },\n    getDaysInMonth: function(year, month) {\n      return [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n    },\n    validParts: /hh?|ii?|ss?|dd?|mm?|MM?|yy(?:yy)?/g,\n    nonpunctuation: /[^ -\\/:-@\\[\\u3400-\\u9fff-`{-~\\t\\n\\r]+/g,\n    parseFormat: function(format) {\n      // IE treats \\0 as a string end in inputs (truncating the value),\n      // so it's a bad format delimiter, anyway\n      let separators = format.replace(this.validParts, \"\\0\").split(\"\\0\"),\n          parts = format.match(this.validParts);\n      if (!separators || !separators.length || !parts || parts.length === 0) {\n        throw new Error(\"Invalid date format.\");\n      }\n      this.formatText = format;\n      return {\n        separators: separators,\n        parts: parts\n      };\n    },\n    parseDate: function(date, format, language) {\n      if (date instanceof Date) {return new Date(date.valueOf() - date.getTimezoneOffset() * 60000);}\n      if (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}$/.test(date)) {\n        format = this.parseFormat(\"yyyy-mm-dd\");\n      }\n      if (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}[T ]\\d{1,2}\\:\\d{1,2}$/.test(date)) {\n        format = this.parseFormat(\"yyyy-mm-dd hh:ii\");\n      }\n      if (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}[T ]\\d{1,2}\\:\\d{1,2}\\:\\d{1,2}[Z]{0,1}$/.test(date)) {\n        format = this.parseFormat(\"yyyy-mm-dd hh:ii:ss\");\n      }\n      if (/^[-+]\\d+[dmwy]([\\s,]+[-+]\\d+[dmwy])*$/.test(date)) {\n        var part_re = /([-+]\\d+)([dmwy])/,\n            parts = date.match(/([-+]\\d+)([dmwy])/g),\n            part, dir;\n        date = new Date();\n        for (var i = 0; i < parts.length; i++) {\n          part = part_re.exec(parts[i]);\n          dir = parseInt(part[1]);\n          switch (part[2]) {\n          case \"d\":\n            date.setUTCDate(date.getUTCDate() + dir);\n            break;\n          case \"m\":\n            date = Datetimepicker.prototype.moveMonth.call(Datetimepicker.prototype, date, dir);\n            break;\n          case \"w\":\n            date.setUTCDate(date.getUTCDate() + dir * 7);\n            break;\n          case \"y\":\n            date = Datetimepicker.prototype.moveYear.call(Datetimepicker.prototype, date, dir);\n            break;\n          }\n        }\n        return UTCDate(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\n      }\n      var parts = date && date.match(this.nonpunctuation) || [],\n          date = new Date(),\n          parsed = {},\n          setters_order = [\"hh\", \"h\", \"ii\", \"i\", \"ss\", \"s\", \"yyyy\", \"yy\", \"M\", \"MM\", \"m\", \"mm\", \"d\", \"dd\"],\n          setters_map = {\n            hh: function(d, v) {\n              return d.setUTCHours(v);\n            },\n            h: function(d, v) {\n              return d.setUTCHours(v);\n            },\n            ii: function(d, v) {\n              return d.setUTCMinutes(v);\n            },\n            i: function(d, v) {\n              return d.setUTCMinutes(v);\n            },\n            ss: function(d, v) {\n              return d.setUTCSeconds(v);\n            },\n            s: function(d, v) {\n              return d.setUTCSeconds(v);\n            },\n            yyyy: function(d, v) {\n              return d.setUTCFullYear(v);\n            },\n            yy: function(d, v) {\n              return d.setUTCFullYear(2000 + v);\n            },\n            m: function(d, v) {\n              v -= 1;\n              while (v < 0) {v += 12;}\n              v %= 12;\n              d.setUTCMonth(v);\n              while (d.getUTCMonth() != v)\n              {d.setUTCDate(d.getUTCDate() - 1);}\n              return d;\n            },\n            d: function(d, v) {\n              return d.setUTCDate(v);\n            }\n          },\n          val, filtered, part;\n      setters_map.M = setters_map.MM = setters_map.mm = setters_map.m;\n      setters_map.dd = setters_map.d;\n      date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0); // date.getHours(), date.getMinutes(), date.getSeconds());\n      if (parts.length == format.parts.length) {\n        for (var i = 0, cnt = format.parts.length; i < cnt; i++) {\n          val = parseInt(parts[i], 10);\n          part = format.parts[i];\n          if (isNaN(val)) {\n            switch (part) {\n            case \"MM\":\n              filtered = $(dates[language].months).filter(function() {\n                let m = this.slice(0, parts[i].length),\n                    p = parts[i].slice(0, m.length);\n                return m == p;\n              });\n              val = $.inArray(filtered[0], dates[language].months) + 1;\n              break;\n            case \"M\":\n              filtered = $(dates[language].monthsShort).filter(function() {\n                let m = this.slice(0, parts[i].length),\n                    p = parts[i].slice(0, m.length);\n                return m == p;\n              });\n              val = $.inArray(filtered[0], dates[language].monthsShort) + 1;\n              break;\n            }\n          }\n          parsed[part] = val;\n        }\n        for (var i = 0, s; i < setters_order.length; i++) {\n          s = setters_order[i];\n          if (s in parsed && !isNaN(parsed[s]))\n          {setters_map[s](date, parsed[s])}\n        }\n      }\n      return date;\n    },\n    formatDate: function(date, format, language) {\n      if (date == null) {\n        return \"\";\n      }\n      let val = {\n        h: date.getUTCHours(),\n        i: date.getUTCMinutes(),\n        s: date.getUTCSeconds(),\n        d: date.getUTCDate(),\n        m: date.getUTCMonth() + 1,\n        M: dates[language].monthsShort[date.getUTCMonth()],\n        MM: dates[language].months[date.getUTCMonth()],\n        yy: date.getUTCFullYear().toString().substring(2),\n        yyyy: date.getUTCFullYear()\n      };\n      val.hh = (val.h < 10 ? \"0\" : \"\") + val.h;\n      val.ii = (val.i < 10 ? \"0\" : \"\") + val.i;\n      val.ss = (val.s < 10 ? \"0\" : \"\") + val.s;\n      val.dd = (val.d < 10 ? \"0\" : \"\") + val.d;\n      val.mm = (val.m < 10 ? \"0\" : \"\") + val.m;\n      var date = [],\n          seps = $.extend([], format.separators);\n      for (let i = 0, cnt = format.parts.length; i < cnt; i++) {\n        if (seps.length)\n        {date.push(seps.shift())}\n        date.push(val[format.parts[i]]);\n      }\n      return date.join(\"\");\n    },\n    convertViewMode: function(viewMode) {\n      switch (viewMode) {\n      case 4:\n      case \"decade\":\n        viewMode = 4;\n        break;\n      case 3:\n      case \"year\":\n        viewMode = 3;\n        break;\n      case 2:\n      case \"month\":\n        viewMode = 2;\n        break;\n      case 1:\n      case \"day\":\n        viewMode = 1;\n        break;\n      case 0:\n      case \"hour\":\n        viewMode = 0;\n        break;\n      }\n\n      return viewMode;\n    },\n    headTemplate: function(leftArrow, rightArrow) {return (`${\"<thead>\" +\n            \"<tr>\" +\n            '<th class=\"prev\">'}${leftArrow}</th>` +\n            \"<th colspan=\\\"5\\\" class=\\\"date-switch\\\"></th>\" +\n            `<th class=\"next\">${rightArrow}</th>` +\n            \"</tr>\" +\n            \"</thead>\")},\n    contTemplate: '<tbody><tr><td colspan=\"7\"></td></tr></tbody>',\n    footTemplate: '<tfoot><tr><th colspan=\"7\" class=\"today\"></th></tr></tfoot>'\n  };\n  DPGlobal.template = function(leftArrow, rightArrow, closeIcon) {return (`${'<div class=\"datepicker\">' +\n        '<div class=\"datepicker-minutes\">' +\n        '<table class=\" table-condensed\">'}${\n    DPGlobal.headTemplate(leftArrow, rightArrow)\n  }${DPGlobal.contTemplate\n  }${DPGlobal.footTemplate\n  }</table>` +\n        \"</div>\" +\n        \"<div class=\\\"datepicker-hours\\\">\" +\n        `<table class=\" table-condensed\">${\n          DPGlobal.headTemplate(leftArrow, rightArrow)\n        }${DPGlobal.contTemplate\n        }${DPGlobal.footTemplate\n        }</table>` +\n        \"</div>\" +\n        \"<div class=\\\"datepicker-days\\\">\" +\n        `<table class=\" table-condensed\">${\n          DPGlobal.headTemplate(leftArrow, rightArrow)\n        }<tbody></tbody>${\n          DPGlobal.footTemplate\n        }</table>` +\n        \"</div>\" +\n        \"<div class=\\\"datepicker-months\\\">\" +\n        `<table class=\"table-condensed\">${\n          DPGlobal.headTemplate(leftArrow, rightArrow)\n        }${DPGlobal.contTemplate\n        }${DPGlobal.footTemplate\n        }</table>` +\n        \"</div>\" +\n        \"<div class=\\\"datepicker-years\\\">\" +\n        `<table class=\"table-condensed\">${\n          DPGlobal.headTemplate(leftArrow, rightArrow)\n        }${DPGlobal.contTemplate\n        }${DPGlobal.footTemplate\n        }</table>` +\n        \"</div>\" +\n        `<a class=\"button datepicker-close tiny alert right\" style=\"width:auto;\">${closeIcon}</a>` +\n        \"</div>\")};\n\n  $.fn.fdatepicker.DPGlobal = DPGlobal;\n\n}(window.jQuery));\n"]},"metadata":{},"sourceType":"module"}