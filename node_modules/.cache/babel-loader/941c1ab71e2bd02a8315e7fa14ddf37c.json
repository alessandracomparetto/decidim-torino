{"ast":null,"code":"/**\n * Makes the #select-identity-button to open a popup for the user to\n * select with which identity he wants to perform an action.\n *\n */\n$(function () {\n  var button = $(\"#select-identity-button\"),\n      identitiesUrl = null,\n      userIdentitiesDialog = $(\"#user-identities\");\n\n  if (userIdentitiesDialog.length) {\n    identitiesUrl = userIdentitiesDialog.data(\"reveal-identities-url\");\n    button.click(function () {\n      $.ajax(identitiesUrl).done(function (response) {\n        userIdentitiesDialog.html(response).foundation(\"open\");\n        button.trigger(\"ajax:success\");\n      });\n    });\n  }\n});\n/**\n * Manage the identity selector for endorsements.\n *\n */\n\n$(function () {\n  $(\"#select-identity-button\").on(\"ajax:success\", function () {\n    // once reveal popup has been rendered register event callbacks\n    $(\"#user-identities ul.reveal__list li\").each(function (index, elem) {\n      var liTag = $(elem);\n      liTag.on(\"click\", function () {\n        var method = liTag.data(\"method\"),\n            urlDataAttr = null;\n\n        if (method === \"POST\") {\n          urlDataAttr = \"create_url\";\n        } else {\n          urlDataAttr = \"destroy_url\";\n        }\n\n        $.ajax({\n          url: liTag.data(urlDataAttr),\n          method: method,\n          dataType: \"script\",\n          success: function success() {\n            if (liTag.hasClass(\"selected\")) {\n              liTag.removeClass(\"selected\");\n              liTag.find(\".icon--circle-check\").addClass(\"invisible\");\n              liTag.data(\"method\", \"POST\");\n            } else {\n              liTag.addClass(\"selected\");\n              liTag.find(\".icon--circle-check\").removeClass(\"invisible\");\n              liTag.data(\"method\", \"DELETE\");\n            }\n          }\n        });\n      });\n    });\n  });\n});","map":{"version":3,"mappings":"AAAA;AACA;AACA;AACA;AACA;AACAA,CAAC,CAAC,YAAM;AACN,MAAIC,MAAM,GAAGD,CAAC,CAAC,yBAAD,CAAd;AAAA,MACIE,aAAa,GAAG,IADpB;AAAA,MAEIC,oBAAoB,GAAGH,CAAC,CAAC,kBAAD,CAF5B;;AAIA,MAAIG,oBAAoB,CAACC,MAAzB,EAAiC;AAC/BF,iBAAa,GAAGC,oBAAoB,CAACE,IAArBF,CAA0B,uBAA1BA,CAAhBD;AAEAD,UAAM,CAACK,KAAPL,CAAa,YAAY;AACvBD,OAAC,CAACO,IAAFP,CAAOE,aAAPF,EAAsBQ,IAAtBR,CAA2B,UAASS,QAAT,EAAmB;AAC5CN,4BAAoB,CAACO,IAArBP,CAA0BM,QAA1BN,EAAoCQ,UAApCR,CAA+C,MAA/CA;AACAF,cAAM,CAACW,OAAPX,CAAe,cAAfA;AAFF;AADF;AAMD;AAdF,EAADD;AAkBA;AACA;AACA;AACA;;AACAA,CAAC,CAAC,YAAM;AACNA,GAAC,CAAC,yBAAD,CAADA,CAA6Ba,EAA7Bb,CAAgC,cAAhCA,EAAgD,YAAW;AACzD;AACAA,KAAC,CAAC,qCAAD,CAADA,CAAyCc,IAAzCd,CAA8C,UAASe,KAAT,EAAgBC,IAAhB,EAAsB;AAClE,UAAIC,KAAK,GAAGjB,CAAC,CAACgB,IAAD,CAAb;AACAC,WAAK,CAACJ,EAANI,CAAS,OAATA,EAAkB,YAAW;AAC3B,YAAIC,MAAM,GAAGD,KAAK,CAACZ,IAANY,CAAW,QAAXA,CAAb;AAAA,YACIE,WAAW,GAAG,IADlB;;AAEA,YAAID,MAAM,KAAK,MAAf,EAAuB;AACrBC,qBAAW,GAAG,YAAdA;AADF,eAEO;AACLA,qBAAW,GAAG,aAAdA;AACD;;AACDnB,SAAC,CAACO,IAAFP,CAAO;AACLoB,aAAG,EAAEH,KAAK,CAACZ,IAANY,CAAWE,WAAXF,CADA;AAELC,gBAAM,EAAEA,MAFH;AAGLG,kBAAQ,EAAE,QAHL;AAILC,iBAAO,EAAE,mBAAW;AAClB,gBAAIL,KAAK,CAACM,QAANN,CAAe,UAAfA,CAAJ,EAAgC;AAC9BA,mBAAK,CAACO,WAANP,CAAkB,UAAlBA;AACAA,mBAAK,CAACQ,IAANR,CAAW,qBAAXA,EAAkCS,QAAlCT,CAA2C,WAA3CA;AACAA,mBAAK,CAACZ,IAANY,CAAW,QAAXA,EAAqB,MAArBA;AAHF,mBAIO;AACLA,mBAAK,CAACS,QAANT,CAAe,UAAfA;AACAA,mBAAK,CAACQ,IAANR,CAAW,qBAAXA,EAAkCO,WAAlCP,CAA8C,WAA9CA;AACAA,mBAAK,CAACZ,IAANY,CAAW,QAAXA,EAAqB,QAArBA;AACD;AACF;AAdI,SAAPjB;AARF;AAFF;AAFF;AADD,EAADA","names":["$","button","identitiesUrl","userIdentitiesDialog","length","data","click","ajax","done","response","html","foundation","trigger","on","each","index","elem","liTag","method","urlDataAttr","url","dataType","success","hasClass","removeClass","find","addClass"],"sources":["/var/lib/gems/2.7.0/gems/decidim-core-0.26.0/app/packs/src/decidim/identity_selector_dialog.js"],"sourcesContent":["/**\n * Makes the #select-identity-button to open a popup for the user to\n * select with which identity he wants to perform an action.\n *\n */\n$(() => {\n  let button = $(\"#select-identity-button\"),\n      identitiesUrl = null,\n      userIdentitiesDialog = $(\"#user-identities\");\n\n  if (userIdentitiesDialog.length) {\n    identitiesUrl = userIdentitiesDialog.data(\"reveal-identities-url\");\n\n    button.click(function () {\n      $.ajax(identitiesUrl).done(function(response) {\n        userIdentitiesDialog.html(response).foundation(\"open\");\n        button.trigger(\"ajax:success\")\n      });\n    });\n  }\n});\n\n\n/**\n * Manage the identity selector for endorsements.\n *\n */\n$(() => {\n  $(\"#select-identity-button\").on(\"ajax:success\", function() {\n    // once reveal popup has been rendered register event callbacks\n    $(\"#user-identities ul.reveal__list li\").each(function(index, elem) {\n      let liTag = $(elem)\n      liTag.on(\"click\", function() {\n        let method = liTag.data(\"method\"),\n            urlDataAttr = null;\n        if (method === \"POST\") {\n          urlDataAttr = \"create_url\";\n        } else {\n          urlDataAttr = \"destroy_url\";\n        }\n        $.ajax({\n          url: liTag.data(urlDataAttr),\n          method: method,\n          dataType: \"script\",\n          success: function() {\n            if (liTag.hasClass(\"selected\")) {\n              liTag.removeClass(\"selected\")\n              liTag.find(\".icon--circle-check\").addClass(\"invisible\")\n              liTag.data(\"method\", \"POST\")\n            } else {\n              liTag.addClass(\"selected\")\n              liTag.find(\".icon--circle-check\").removeClass(\"invisible\")\n              liTag.data(\"method\", \"DELETE\")\n            }\n          }\n        })\n      })\n    });\n  });\n})\n"]},"metadata":{},"sourceType":"module"}