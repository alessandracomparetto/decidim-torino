{"ast":null,"code":"/* eslint-disable require-jsdoc */\nimport createOptionAttachedInputs from \"src/decidim/forms/option_attached_inputs.component\";\nimport createAutosortableCheckboxes from \"src/decidim/forms/autosortable_checkboxes.component\";\nimport createDisplayConditions from \"src/decidim/forms/display_conditions.component\";\nimport createMaxChoicesAlertComponent from \"src/decidim/forms/max_choices_alert.component\";\n$(function () {\n  $(\".radio-button-collection, .check-box-collection\").each(function (idx, el) {\n    createOptionAttachedInputs({\n      wrapperField: $(el),\n      controllerFieldSelector: \"input[type=radio], input[type=checkbox]\",\n      dependentInputSelector: \"input[type=text], input[type=hidden]\"\n    });\n  });\n  $.unique($(\".check-box-collection\").parents(\".answer\")).each(function (idx, el) {\n    var maxChoices = $(el).data(\"max-choices\");\n\n    if (maxChoices) {\n      createMaxChoicesAlertComponent({\n        wrapperField: $(el),\n        controllerFieldSelector: \"input[type=checkbox]\",\n        controllerCollectionSelector: \".check-box-collection\",\n        alertElement: $(el).find(\".max-choices-alert\"),\n        maxChoices: maxChoices\n      });\n    }\n  });\n  $(\".sortable-check-box-collection\").each(function (idx, el) {\n    createAutosortableCheckboxes({\n      wrapperField: $(el)\n    });\n  });\n  $(\".answer-questionnaire .question[data-conditioned='true']\").each(function (idx, el) {\n    createDisplayConditions({\n      wrapperField: $(el)\n    });\n  });\n  var $form = $(\"form.answer-questionnaire\");\n\n  if ($form.length > 0) {\n    $form.find(\"input, textarea, select\").on(\"change\", function () {\n      $form.data(\"changed\", true);\n    });\n    var safePath = $form.data(\"safe-path\").split(\"?\")[0];\n    $(document).on(\"click\", \"a\", function (event) {\n      window.exitUrl = event.currentTarget.href;\n    });\n    $(document).on(\"submit\", \"form\", function (event) {\n      window.exitUrl = event.currentTarget.action;\n    });\n    window.addEventListener(\"beforeunload\", function (event) {\n      var exitUrl = window.exitUrl;\n      var hasChanged = $form.data(\"changed\");\n      window.exitUrl = null;\n\n      if (!hasChanged || exitUrl && exitUrl.includes(safePath)) {\n        return;\n      }\n\n      event.returnValue = true;\n    });\n  }\n});","map":{"version":3,"mappings":"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","names":["createOptionAttachedInputs","createAutosortableCheckboxes","createDisplayConditions","createMaxChoicesAlertComponent","$","each","idx","el","wrapperField","controllerFieldSelector","dependentInputSelector","unique","parents","maxChoices","data","controllerCollectionSelector","alertElement","find","$form","length","on","safePath","split","document","event","window","exitUrl","currentTarget","href","action","addEventListener","hasChanged","includes","returnValue"],"sources":["/var/lib/gems/2.7.0/gems/decidim-forms-0.26.0/app/packs/src/decidim/forms/forms.js"],"sourcesContent":["/* eslint-disable require-jsdoc */\n\nimport createOptionAttachedInputs from \"src/decidim/forms/option_attached_inputs.component\"\nimport createAutosortableCheckboxes from \"src/decidim/forms/autosortable_checkboxes.component\"\nimport createDisplayConditions from \"src/decidim/forms/display_conditions.component\"\nimport createMaxChoicesAlertComponent from \"src/decidim/forms/max_choices_alert.component\"\n\n$(() => {\n  $(\".radio-button-collection, .check-box-collection\").each((idx, el) => {\n    createOptionAttachedInputs({\n      wrapperField: $(el),\n      controllerFieldSelector: \"input[type=radio], input[type=checkbox]\",\n      dependentInputSelector: \"input[type=text], input[type=hidden]\"\n    });\n  });\n\n  $.unique($(\".check-box-collection\").parents(\".answer\")).each((idx, el) => {\n    const maxChoices = $(el).data(\"max-choices\");\n    if (maxChoices) {\n      createMaxChoicesAlertComponent({\n        wrapperField: $(el),\n        controllerFieldSelector: \"input[type=checkbox]\",\n        controllerCollectionSelector: \".check-box-collection\",\n        alertElement: $(el).find(\".max-choices-alert\"),\n        maxChoices: maxChoices\n      });\n    }\n  });\n\n  $(\".sortable-check-box-collection\").each((idx, el) => {\n    createAutosortableCheckboxes({\n      wrapperField: $(el)\n    })\n  });\n\n  $(\".answer-questionnaire .question[data-conditioned='true']\").each((idx, el) => {\n    createDisplayConditions({\n      wrapperField: $(el)\n    });\n  });\n\n  const $form = $(\"form.answer-questionnaire\");\n  if ($form.length > 0) {\n    $form.find(\"input, textarea, select\").on(\"change\", () => {\n      $form.data(\"changed\", true);\n    });\n\n    const safePath = $form.data(\"safe-path\").split(\"?\")[0];\n    $(document).on(\"click\", \"a\", (event) => {\n      window.exitUrl = event.currentTarget.href;\n    });\n    $(document).on(\"submit\", \"form\", (event) => {\n      window.exitUrl = event.currentTarget.action;\n    });\n\n    window.addEventListener(\"beforeunload\", (event) => {\n      const exitUrl = window.exitUrl;\n      const hasChanged = $form.data(\"changed\");\n      window.exitUrl = null;\n\n      if (!hasChanged || (exitUrl && exitUrl.includes(safePath))) {\n        return;\n      }\n\n      event.returnValue = true;\n    });\n  }\n})\n"]},"metadata":{},"sourceType":"module"}