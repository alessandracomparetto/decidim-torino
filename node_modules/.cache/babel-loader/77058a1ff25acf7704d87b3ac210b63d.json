{"ast":null,"code":"function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nimport icon from \"src/decidim/icon\";\nvar EXCLUDE_CLASSES = [\"card--list__data__icon\", \"footer-social__icon\", \"logo-cityhall\"];\nvar EXCLUDE_REL = [\"license\", \"decidim\"];\nvar DEFAULT_MESSAGES = {\n  externalLink: \"External link\"\n};\nvar MESSAGES = DEFAULT_MESSAGES;\n\nvar ExternalLink = /*#__PURE__*/function () {\n  function ExternalLink(link) {\n    _classCallCheck(this, ExternalLink);\n\n    this.$link = link;\n    this.setup();\n  }\n\n  _createClass(ExternalLink, [{\n    key: \"setup\",\n    value: function setup() {\n      var _this = this;\n\n      if (EXCLUDE_CLASSES.some(function (cls) {\n        return _this.$link.hasClass(cls);\n      })) {\n        return;\n      }\n\n      if (EXCLUDE_REL.some(function (rel) {\n        var linkRels = \"\".concat(_this.$link.attr(\"rel\")).split(\" \");\n        return linkRels.indexOf(rel) > -1;\n      })) {\n        return;\n      }\n\n      this.$link.addClass(\"external-link-container\");\n      var spacer = \"&nbsp;\";\n\n      if (this.$link.text().trim().length < 1) {\n        // Fixes image links extra space\n        spacer = \"\";\n      }\n\n      this.$link.append(\"\".concat(spacer).concat(this.generateElement()));\n    }\n  }, {\n    key: \"generateElement\",\n    value: function generateElement() {\n      var content = \"\".concat(this.generateIcon()).concat(this.generateScreenReaderLabel());\n      return \"<span class=\\\"external-link-indicator\\\">\".concat(content, \"</span>\");\n    }\n  }, {\n    key: \"generateIcon\",\n    value: function generateIcon() {\n      return icon(\"external-link\");\n    }\n  }, {\n    key: \"generateScreenReaderLabel\",\n    value: function generateScreenReaderLabel() {\n      return \"<span class=\\\"show-for-sr\\\">(\".concat(MESSAGES.externalLink, \")</span>\");\n    }\n  }], [{\n    key: \"configureMessages\",\n    value: function configureMessages(messages) {\n      MESSAGES = $.extend(DEFAULT_MESSAGES, messages);\n    }\n  }]);\n\n  return ExternalLink;\n}();\n\nexport { ExternalLink as default };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,IAAP,MAAiB,kBAAjB;AAEA,IAAMC,eAAe,GAAG,CACtB,wBADsB,EAEtB,qBAFsB,EAGtB,eAHsB,CAAxB;AAKA,IAAMC,WAAW,GAAG,CAAC,SAAD,EAAY,SAAZ,CAApB;AAEA,IAAMC,gBAAgB,GAAG;AACvBC,cAAY,EAAE;AADS,CAAzB;AAGA,IAAIC,QAAQ,GAAGF,gBAAf;;IAEqBG,Y;AAKnB,wBAAYC,IAAZ,EAAkB;AAAAC;;AAChB,SAAKC,KAAL,GAAaF,IAAb;AAEA,SAAKG,KAAL;AACD;;;;WAED,iBAAQ;AAAA;;AACN,UAAIT,eAAe,CAACU,IAAhBV,CAAqB,UAACW,GAAD;AAAA,eAASC,KAAI,CAACJ,KAAL,CAAWK,QAAX,CAAoBF,GAApB,CAAT;AAArB,QAAJ,EAA6D;AAC3D;AACD;;AACD,UACEV,WAAW,CAACS,IAAZT,CAAiB,UAACa,GAAD,EAAS;AACxB,YAAMC,QAAQ,GAAG,UAAGH,KAAI,CAACJ,KAAL,CAAWQ,IAAX,CAAgB,KAAhB,CAAH,EAA4BC,KAA5B,CAAkC,GAAlC,CAAjB;AACA,eAAOF,QAAQ,CAACG,OAATH,CAAiBD,GAAjBC,IAAwB,CAAC,CAAhC;AAFF,QADF,EAKE;AACA;AACD;;AAED,WAAKP,KAAL,CAAWW,QAAX,CAAoB,yBAApB;AACA,UAAIC,MAAM,GAAG,QAAb;;AACA,UAAI,KAAKZ,KAAL,CAAWa,IAAX,GAAkBC,IAAlB,GAAyBC,MAAzB,GAAkC,CAAtC,EAAyC;AACvC;AACAH,cAAM,GAAG,EAATA;AACD;;AACD,WAAKZ,KAAL,CAAWgB,MAAX,WAAqBJ,MAArB,SAA8B,KAAKK,eAAL,EAA9B;AACD;;;WAED,2BAAkB;AAChB,UAAIC,OAAO,aAAM,KAAKC,YAAL,EAAN,SAA4B,KAAKC,yBAAL,EAA5B,CAAX;AAEA,+DAAgDF,OAAhD;AACD;;;WAED,wBAAe;AACb,aAAO3B,IAAI,CAAC,eAAD,CAAX;AACD;;;WAED,qCAA4B;AAC1B,oDAAqCK,QAAQ,CAACD,YAA9C;AACD;;;WA5CD,2BAAyB0B,QAAzB,EAAmC;AACjCzB,cAAQ,GAAG0B,CAAC,CAACC,MAAFD,CAAS5B,gBAAT4B,EAA2BD,QAA3BC,CAAX1B;AACD;;;;;;SAHkBC,Y","names":["icon","EXCLUDE_CLASSES","EXCLUDE_REL","DEFAULT_MESSAGES","externalLink","MESSAGES","ExternalLink","link","_classCallCheck","$link","setup","some","cls","_this","hasClass","rel","linkRels","attr","split","indexOf","addClass","spacer","text","trim","length","append","generateElement","content","generateIcon","generateScreenReaderLabel","messages","$","extend"],"sources":["/var/lib/gems/2.7.0/gems/decidim-core-0.26.0/app/packs/src/decidim/external_link.js"],"sourcesContent":["import icon from \"src/decidim/icon\"\n\nconst EXCLUDE_CLASSES = [\n  \"card--list__data__icon\",\n  \"footer-social__icon\",\n  \"logo-cityhall\"\n];\nconst EXCLUDE_REL = [\"license\", \"decidim\"];\n\nconst DEFAULT_MESSAGES = {\n  externalLink: \"External link\"\n};\nlet MESSAGES = DEFAULT_MESSAGES;\n\nexport default class ExternalLink {\n  static configureMessages(messages) {\n    MESSAGES = $.extend(DEFAULT_MESSAGES, messages);\n  }\n\n  constructor(link) {\n    this.$link = link;\n\n    this.setup();\n  }\n\n  setup() {\n    if (EXCLUDE_CLASSES.some((cls) => this.$link.hasClass(cls))) {\n      return;\n    }\n    if (\n      EXCLUDE_REL.some((rel) => {\n        const linkRels = `${this.$link.attr(\"rel\")}`.split(\" \");\n        return linkRels.indexOf(rel) > -1;\n      })\n    ) {\n      return;\n    }\n\n    this.$link.addClass(\"external-link-container\");\n    let spacer = \"&nbsp;\";\n    if (this.$link.text().trim().length < 1) {\n      // Fixes image links extra space\n      spacer = \"\";\n    }\n    this.$link.append(`${spacer}${this.generateElement()}`);\n  }\n\n  generateElement() {\n    let content = `${this.generateIcon()}${this.generateScreenReaderLabel()}`;\n\n    return `<span class=\"external-link-indicator\">${content}</span>`;\n  }\n\n  generateIcon() {\n    return icon(\"external-link\");\n  }\n\n  generateScreenReaderLabel() {\n    return `<span class=\"show-for-sr\">(${MESSAGES.externalLink})</span>`;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}